<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="ESRI" type="TransportDirect.Presentation.InteractiveMapping.ESRISettingsSectionHandler,td.interactivemapping"/>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>
  <ESRI>

    <!-- THESE ARE THE THINGS THAT NEED TO BE CHANGED ON SITE -->
    <MapServer name="full" serverName="tdpapp" mapService="tdparc93"/>
    <MapServer name="cycle" serverName="tdpapp" mapService="tdp_cycle_prints"/>
    <OverviewMap enabled="true" service="tdpoverview" width="95" height="128"/>
    <Database name="maps" connection="data source=tdpdb\sql2008;initial catalog=TDP_MAPS;user id=mapsadmin;password=mapsadmin" tableowner="mapsadmin"/>
    <Database name="routes" connection="data source=tdpdb\sql2008;initial catalog=TDP_ROUTES;user id=routesadmin;password=routesadmin" tableowner="routesadmin"/>
    <!-- END OF ON SITE REQUIRED CHANGES - Also see Log4Net config log file location, and AppSettings FilePaths -->
    
    <Debug level="0"/>
    <Server url="/servlet/com.esri.esrimap.Esrimap" port="5300"/>
    <ServerConnection tcphttp="tcp"/>

    <Client version="ClientVersion=4.0"/>
    <Pan factor="0.5"/>
    <ZoomFull minx="0" miny="-50000" maxx="660000" maxy="1220000"/>
    <ZoomRoute border="1.1"/>
    <Map name="full" minscale="2000"/>

    <Scalebar enabled="false" coords="250 5" fontcolor="0,0,0" barcolor="153,153,153" outline="255,255,255" font="Arial" fontsize="12" screenlength="120" barwidth="8" mapunits="meters" scaleunits="miles" precision="2" antialiasing="true"/>
    <!--
		Route renderer information
		name must match values to be populated into PT_ROUTES table
		type can be "hash" or not specified (="simple")
		style (for simple type) can be solid, dash, dot, dash_dot, dash_dot_dot (See AXL Guide SIMPLELINESYMBOL)
		colour is r,g,b
	-->
    <Route line-width="6" style="solid" type="simple" color="0,0,0"/>
    <Route name="AIR" color="0,255,0"/>
    <Route name="BUS" style="dash" color="153,0,255"/>
    <Route name="CAR" style="dash_dot_dot" color="0,255,204"/>
    <Route name="COACH" style="dash_dot" color="51,204,153"/>
    <Route name="CYCLE" color="204,255,255"/>
    <Route name="DRT" color="204,255,0"/>
    <Route name="FERRY" color="153,153,0"/>
    <Route name="METRO" type="hash" color="255,255,051"/>
    <Route name="RAIL" type="hash" color="255,204,0"/>
    <Route name="TAXI" color="255,102,051"/>
    <Route name="TRAM" color="255,204,153"/>
    <Route name="UNDERGROUND" type="hash" color="204,204,204"/>
    <Route name="WALK" style="dot" color="255,0,0"/>
    <!--
		Cycle route settings
	-->
    <CycleRoute printMapWidth="800" printMapHeight="600" printMapDPI="100" defaultPolylineColour="255,0,255" defaultPolylineWidth="20" defaultPolylineStyle="solid" transparency="0.25" markerImagePath="d:/arcims/website/tdp_images" printOverlayColour="255,255,0" printOverlayStyle="dash" printOverlayWidth="3" printOverlayTransparency="0.8" printStartSectionMarker="cycleSectionStart.gif" printEndSectionMarker="cycleSectionEnd.gif"/>
    <!--Copyright x="5" y="5" 
			text="&amp;#169; Crown Copyright License number 100020237" 
			font-name="Arial" font-style="regular" font-size="10" 
			font-rgb="0,0,0" glowing-rgb="255,255,255" />
	<Copyright name="Congestion" font-size="8" /-->
    <Copyright x="5" y="5" text="Ordnance Survey Maps &amp;#169; Crown Copyright. 100020237" font-name="Arial" font-style="regular" font-size="10" font-rgb="0,0,0" glowing-rgb="255,255,255"/>
    <Copyright name="Congestion" font-size="10"/>
    <Layer name="ITN" id="ITN Roads" tableName="ITN"/>
    <Layer name="ITNZoom" id="Zoom ITN Roads" tableName="ITNZoom"/>
    <Layer name="ITNRoadNode" id="Zoom ITN Road Node" tableName="ITNRoadNode"/>
    <Layer name="Stops" id="Full Stops" tableName="Stops"/>
    <Layer name="PointX" id="Full PointX" tableName="PointX"/>
    <Layer name="CarParks" id="CarParks" tableName="CarParks"/>
    <Layer name="CycleDataAreas" id="CycleDataAreas" tableName="CycleDataAreas"/>
    <RouteRenderer name="Road" line-style="solid" width="0,50000,20;50000,1000000,12;1000000,20000000,5" rgb="0,4,0,255,0;4,8,204,204,127;8,11,255,0,0" transparency="0,50000,0.3;50000,1000000,0.5;1000000,20000000,0.7"/>
    <RouteRenderer name="UnajRoad" line-style="solid" width="0,50000,10;50000,1000000,6;1000000,20000000,2" rgb="-1,-1,0,0,0" transparency="0,50000,0.5;50000,1000000,0.6;1000000,20000000,0.7"/>
    <Raster imagepath="d:/arcims/website/tdp_images" urlpath="/website/tdp_images"/>
    <Image name="StartPoint" file="tdpstarticon.gif"/>
    <Image name="EndPoint" file="tdpendicon.gif"/>
    <Image name="ViaPoint" file="tdpviaicon.gif"/>
    <Point font-name="Arial" font-style="regular" font-size="11" font-rgb="0,0,0" glowing-rgb="255,255,255"/>
    <Symbols image="TRIANGLE=m_trlrg.gif;CIRCLE=m_cirlrg_w.gif;SQUARE=m_sqlrg.gif;DIAMOND=m_dimlrg.gif;PUSHPIN=m_dimlrg.gif"/>

    <!--
		Incidents information
		roadLayerID and publicLayerID are "id" in map service of those layers
		severeIncidents are the values in the data to use when considering SEVERE incidents
		recentIncidentHours are the number of hours that recent incidents are considered as being
	-->
    <Incidents roadLayerID="RoadIncidents" publicLayerID="PublicIncidents" severeIncidents="'Critical','Very Severe','Severe'" recentIncidentHours="1" />

  </ESRI>

  <log4net>
    <appender name="GeneralAppender" type="log4net.Appender.RollingFileAppender">
      <file value="c:\\temp\\TransportDirectMapWebService_Log.txt" />
      <appendToFile value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="1000KB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger - %message%newline" />
      </layout>
    </appender>
    <root>
      <!-- 
      level is one of (in decreasing order):
      ALL
      DEBUG
      INFO
      WARN
      ERROR
      FATAL
      OFF
      -->
      <level value="DEBUG" />
      <appender-ref ref="GeneralAppender" />
    </root>
  </log4net>

  <appSettings>
    <add key="appDomainFriendlyName" value=""/>
    <!--<add key="appDomainFriendlyName" value="/lm/w3svc/1/root/web2"/>-->
    <add key="propertyservice.themeid" value="1"/>
    <add key="propertyservice.applicationid" value="Web"/>
    <add key="propertyservice.groupid" value="UserPortal"/>
    <add key="propertyservice.providerassembly" value="td.common.propertyservice.filepropertyprovider"/>
    <add key="propertyservice.providerclass" value="TransportDirect.Common.PropertyService.FilePropertyProvider.FilePropertyProvider"/>
    <!--
    <add key="propertyservice.providers.fileprovider.filepath" value="C:\Inetpub\wwwroot\TransportDirectMapWebService\bin\Properties.xml"/>
    <add key="propertyservice.providers.fileprovider.filepath" value="C:\work\TDP\Mapping\Mainline\TransportDirectMapWebService\bin\Properties.xml"/>
    <add key="propertyservice.providers.fileprovider.filepath" value="C:\Projects\TransportDirect\Mapping\Mainline\TransportDirectMapWebService\bin\Properties.xml"/>
    <add key="propertyservice.providers.fileprovider.filepath" value="C:\Projects\TransportDirect\TFS\TransportDirect\Mapping\Mainline\TransportDirectMapWebService\bin\Properties.xml"/>
    -->
    <add key="propertyservice.providers.fileprovider.filepath" value="C:\Inetpub\wwwroot\TransportDirectMapWebService\bin\Properties.xml"/>
    <add key="themeinfrastructure.provider.type" value="file"/>
    <!--
    <add key="themeinfrastructure.provider.theme.filepath" value="C:\Inetpub\wwwroot\TransportDirectMapWebService\bin\Themes.xml"/>
    <add key="themeinfrastructure.provider.theme.filepath" value="C:\work\TDP\Mapping\Mainline\TransportDirectMapWebService\bin\Themes.xml"/>
    <add key="themeinfrastructure.provider.theme.filepath" value="C:\Projects\TransportDirect\Mapping\Mainline\TransportDirectMapWebService\bin\Themes.xml"/>
    <add key="themeinfrastructure.provider.theme.filepath" value="C:\Projects\TransportDirect\TFS\TransportDirect\Mapping\Mainline\TransportDirectMapWebService\bin\Themes.xml"/>
    -->
    <add key="themeinfrastructure.provider.theme.filepath" value="C:\Inetpub\wwwroot\TransportDirectMapWebService\bin\Themes.xml"/>
  </appSettings>
  <connectionStrings/>
  <system.web>
    <!-- 
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.
        -->
    <compilation debug="true">
    </compilation>
    <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
        -->

    <authentication mode="Windows"/>
    <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.

        <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
            <error statusCode="403" redirect="NoAccess.htm" />
            <error statusCode="404" redirect="FileNotFound.htm" />
        </customErrors>
        -->
    <!--  
			SESSION STATE SETTINGS
            By default ASP.NET uses cookies to identify which requests belong to a particular session. 
            If cookies are not available, a session can be tracked by adding a session identifier to the URL. 
            To disable cookies, set sessionState cookieless="true".
        -->
    <!--<sessionState useHostingIdentity="false" mode="SQLServer" stateConnectionString="tcpip=127.0.0.1:42424" sqlConnectionString="data source=127.0.0.1;Trusted_Connection=Yes" cookieless="false" timeout="20"/>-->
    <sessionState useHostingIdentity="false" mode="SQLServer" stateConnectionString="tcpip=tdpdb\SQL2008:42424" sqlConnectionString="data source=tdpdb\SQL2008;UID=stateadmin;PWD=stateadmin" cookieless="false" timeout="20"/>
    <trace enabled="true"/>
  </system.web>
</configuration>
