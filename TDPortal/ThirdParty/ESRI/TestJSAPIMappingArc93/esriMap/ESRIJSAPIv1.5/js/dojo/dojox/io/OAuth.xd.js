/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.io.OAuth"],["require","dojox.encoding.digests.SHA1"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.io.OAuth"]){_4._hasResource["dojox.io.OAuth"]=true;_4.provide("dojox.io.OAuth");_4.require("dojox.encoding.digests.SHA1");_6.io.OAuth=new (function(){var _7=this.encode=function(s){if(!s){return "";}return encodeURIComponent(s).replace(/\!/g,"%21").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29");};var _9=this.decode=function(_a){var a=[],_c=_a.split("&");for(var i=0,l=_c.length;i<l;i++){var _f=_c[i];if(_c[i]==""){continue;}if(_c[i].indexOf("=")>-1){var tmp=_c[i].split("=");a.push([decodeURIComponent(tmp[0]),decodeURIComponent(tmp[1])]);}else{a.push([decodeURIComponent(_c[i]),null]);}}return a;};function _11(url){var _13=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],_14=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,_15=_14.exec(url),map={},i=_13.length;while(i--){map[_13[i]]=_15[i]||"";}var p=map.protocol.toLowerCase(),a=map.authority.toLowerCase(),b=(p=="http"&&map.port==80)||(p=="https"&&map.port==443);if(b){if(a.lastIndexOf(":")>-1){a=a.substring(0,a.lastIndexOf(":"));}}var _1b=map.path||"/";map.url=p+"://"+a+_1b;return map;};var tab="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";function _1d(_1e){var s="",tl=tab.length;for(var i=0;i<_1e;i++){s+=tab.charAt(Math.floor(Math.random()*tl));}return s;};function _22(){return Math.floor(new Date().valueOf()/1000)-2;};function _23(_24,key,_26){if(_26&&_26!="PLAINTEXT"&&_26!="HMAC-SHA1"){throw new Error("dojox.io.OAuth: the only supported signature encodings are PLAINTEXT and HMAC-SHA1.");}if(_26=="PLAINTEXT"){return key;}else{return _6.encoding.digests.SHA1._hmac(_24,key);}};function key(_28){return _7(_28.consumer.secret)+"&"+(_28.token&&_28.token.secret?_7(_28.token.secret):"");};function _29(_2a,oaa){var o={oauth_consumer_key:oaa.consumer.key,oauth_nonce:_1d(16),oauth_signature_method:oaa.sig_method||"HMAC-SHA1",oauth_timestamp:_22(),oauth_version:"1.0"};if(oaa.token){o.oauth_token=oaa.token.key;}_2a.content=_4.mixin(_2a.content||{},o);};function _2d(_2e){var _2f=[{}],_30;if(_2e.form){if(!_2e.content){_2e.content={};}var _31=_4.byId(_2e.form);var _32=_31.getAttributeNode("action");_2e.url=_2e.url||(_32?_32.value:null);_30=_4.formToObject(_31);delete _2e.form;}if(_30){_2f.push(_30);}if(_2e.content){_2f.push(_2e.content);}var map=_11(_2e.url);if(map.query){var tmp=_4.queryToObject(map.query);for(var p in tmp){tmp[p]=encodeURIComponent(tmp[p]);}_2f.push(tmp);}_2e._url=map.url;var a=[];for(var i=0,l=_2f.length;i<l;i++){var _39=_2f[i];for(var p in _39){if(_4.isArray(_39[p])){for(var j=0,jl=_39.length;j<jl;j++){a.push([p,_39[j]]);}}else{a.push([p,_39[p]]);}}}_2e._parameters=a;return _2e;};function _3c(_3d,_3e,oaa){_29(_3e,oaa);_2d(_3e);var a=_3e._parameters;a.sort(function(a,b){if(a[0]>b[0]){return 1;}if(a[0]<b[0]){return -1;}if(a[1]>b[1]){return 1;}if(a[1]<b[1]){return -1;}return 0;});var s=_4.map(a,function(_44){return _7(_44[0])+"%3D"+_7(_44[1]||"");}).join("%26");var _45=_3d.toUpperCase()+"&"+_7(_3e._url)+"&"+s;return _45;};function _46(_47,_48,oaa){var k=key(oaa),_4b=_3c(_47,_48,oaa),s=_23(_4b,k,oaa.sig_method||"HMAC-SHA1");_48.content["oauth_signature"]=s;return _48;};this.sign=function(_4d,_4e,oaa){return _46(_4d,_4e,oaa);};this.xhr=function(_50,_51,oaa,_53){_46(_50,_51,oaa);return _4.xhr(_50,_51,_53);};this.xhrGet=function(_54,oaa){return this.xhr("GET",_54,oaa);};this.xhrPost=this.xhrRawPost=function(_56,oaa){return this.xhr("POST",_56,oaa,true);};this.xhrPut=this.xhrRawPut=function(_58,oaa){return this.xhr("PUT",_58,oaa,true);};this.xhrDelete=function(_5a,oaa){return this.xhr("DELETE",_5a,oaa);};})();}}};});