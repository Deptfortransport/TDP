/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.jsonPath.query"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.jsonPath.query"]){_4._hasResource["dojox.jsonPath.query"]=true;_4.provide("dojox.jsonPath.query");_6.jsonPath.query=function(_7,_8,_9){var re=_6.jsonPath._regularExpressions;if(!_9){_9={};}var _b=[];function _c(i){return _b[i];};var _e;if(_9.resultType=="PATH"&&_9.evalType=="RESULT"){throw Error("RESULT based evaluation not supported with PATH based results");}var P={resultType:_9.resultType||"VALUE",normalize:function(_10){var _11=[];_10=_10.replace(/'([^']|'')*'/g,function(t){return "_str("+(_b.push(eval(t))-1)+")";});var ll=-1;while(ll!=_11.length){ll=_11.length;_10=_10.replace(/(\??\([^\(\)]*\))/g,function($0){return "#"+(_11.push($0)-1);});}_10=_10.replace(/[\['](#[0-9]+)[\]']/g,"[$1]").replace(/'?\.'?|\['?/g,";").replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"");ll=-1;while(ll!=_10){ll=_10;_10=_10.replace(/#([0-9]+)/g,function($0,$1){return _11[$1];});}return _10.split(";");},asPaths:function(_17){for(var j=0;j<_17.length;j++){var p="$";var x=_17[j];for(var i=1,n=x.length;i<n;i++){p+=/^[0-9*]+$/.test(x[i])?("["+x[i]+"]"):("['"+x[i]+"']");}_17[j]=p;}return _17;},exec:function(_1d,val,rb){var _20=["$"];var _21=rb?val:[val];var _22=[_20];function add(v,p,def){if(v&&v.hasOwnProperty(p)&&P.resultType!="VALUE"){_22.push(_20.concat([p]));}if(def){_21=v[p];}else{if(v&&v.hasOwnProperty(p)){_21.push(v[p]);}}};function _27(v){_21.push(v);_22.push(_20);P.walk(v,function(i){if(typeof v[i]==="object"){var _2a=_20;_20=_20.concat(i);_27(v[i]);_20=_2a;}});};function _2b(loc,val){if(val instanceof Array){var len=val.length,_2f=0,end=len,_31=1;loc.replace(/^(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)$/g,function($0,$1,$2,$3){_2f=parseInt($1||_2f);end=parseInt($2||end);_31=parseInt($3||_31);});_2f=(_2f<0)?Math.max(0,_2f+len):Math.min(len,_2f);end=(end<0)?Math.max(0,end+len):Math.min(len,end);for(var i=_2f;i<end;i+=_31){add(val,i);}}};function _37(str){var i=loc.match(/^_str\(([0-9]+)\)$/);return i?_b[i[1]]:str;};function _3b(val){if(/^\(.*?\)$/.test(loc)){add(val,P.eval(loc,val),rb);}else{if(loc==="*"){P.walk(val,rb&&val instanceof Array?function(i){P.walk(val[i],function(j){add(val[i],j);});}:function(i){add(val,i);});}else{if(loc===".."){_27(val);}else{if(/,/.test(loc)){for(var s=loc.split(/'?,'?/),i=0,n=s.length;i<n;i++){add(val,_37(s[i]));}}else{if(/^\?\(.*?\)$/.test(loc)){P.walk(val,function(i){if(P.eval(loc.replace(/^\?\((.*?)\)$/,"$1"),val[i])){add(val,i);}});}else{if(/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(loc)){_2b(loc,val);}else{loc=_37(loc);if(rb&&val instanceof Array&&!/^[0-9*]+$/.test(loc)){P.walk(val,function(i){add(val[i],loc);});}else{add(val,loc,rb);}}}}}}}};while(_1d.length){var loc=_1d.shift();if((val=_21)===null||val===undefined){return val;}_21=[];var _45=_22;_22=[];if(rb){_3b(val);}else{P.walk(val,function(i){_20=_45[i]||_20;_3b(val[i]);});}}if(P.resultType=="BOTH"){_22=P.asPaths(_22);var _47=[];for(var i=0;i<_22.length;i++){_47.push({path:_22[i],value:_21[i]});}return _47;}return P.resultType=="PATH"?P.asPaths(_22):_21;},walk:function(val,f){if(val instanceof Array){for(var i=0,n=val.length;i<n;i++){if(i in val){f(i);}}}else{if(typeof val==="object"){for(var m in val){if(val.hasOwnProperty(m)){f(m);}}}}},eval:function(x,_v){try{return $&&_v&&eval(x.replace(/@/g,"_v"));}catch(e){throw new SyntaxError("jsonPath: "+e.message+": "+x.replace(/@/g,"_v").replace(/\^/g,"_a"));}}};var $=_7;if(_8&&_7){return P.exec(P.normalize(_8).slice(1),_7,_9.evalType=="RESULT");}return false;};}}};});