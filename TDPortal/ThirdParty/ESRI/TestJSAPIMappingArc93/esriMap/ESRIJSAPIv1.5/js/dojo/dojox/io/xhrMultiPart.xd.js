/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.io.xhrMultiPart"],["require","dojox.uuid.generateRandomUuid"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.io.xhrMultiPart"]){_4._hasResource["dojox.io.xhrMultiPart"]=true;_4.provide("dojox.io.xhrMultiPart");_4.require("dojox.uuid.generateRandomUuid");(function(){function _7(_8,_9){if(!_8["name"]&&!_8["content"]){throw new Error("Each part of a multi-part request requires 'name' and 'content'.");}var _a=[];_a.push("--"+_9,"Content-Disposition: form-data; name=\""+_8.name+"\""+(_8["filename"]?"; filename=\""+_8.filename+"\"":""));if(_8["contentType"]){var ct="Content-Type: "+_8.contentType;if(_8["charset"]){ct+="; Charset="+_8.charset;}_a.push(ct);}if(_8["contentTransferEncoding"]){_a.push("Content-Transfer-Encoding: "+_8.contentTransferEncoding);}_a.push("",_8.content);return _a;};function _c(_d,_e){var o=_4.formToObject(_d),_10=[];for(var p in o){if(_4.isArray(o[p])){_4.forEach(o[p],function(_12){_10=_10.concat(_7({name:p,content:_12},_e));});}else{_10=_10.concat(_7({name:p,content:o[p]},_e));}}return _10;};_6.io.xhrMultiPart=function(_13){if(!_13["file"]&&!_13["content"]&&!_13["form"]){throw new Error("content, file or form must be provided to dojox.io.xhrMultiPart's arguments");}var _14=_6.uuid.generateRandomUuid(),tmp=[],out="";if(_13["file"]||_13["content"]){var v=_13["file"]||_13["content"];_4.forEach((_4.isArray(v)?v:[v]),function(_18){tmp=tmp.concat(_7(_18,_14));});}else{if(_13["form"]){if(_4.query("input[type=file]",_13["form"]).length){throw new Error("dojox.io.xhrMultiPart cannot post files that are values of an INPUT TYPE=FILE.  Use dojo.io.iframe.send() instead.");}tmp=_c(_13["form"],_14);}}if(tmp.length){tmp.push("--"+_14+"--","");out=tmp.join("\r\n");}console.log(out);return _4.rawXhrPost(_4.mixin(_13,{contentType:"multipart/form-data; boundary="+_14,postData:out}));};})();}}};});