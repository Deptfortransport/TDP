/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit._KeyNavContainer"],["require","dijit._Container"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit._KeyNavContainer"]){_4._hasResource["dijit._KeyNavContainer"]=true;_4.provide("dijit._KeyNavContainer");_4.require("dijit._Container");_4.declare("dijit._KeyNavContainer",[_5._Container],{tabIndex:"0",_keyNavCodes:{},connectKeyNavHandlers:function(_7,_8){var _9=this._keyNavCodes={};var _a=_4.hitch(this,this.focusPrev);var _b=_4.hitch(this,this.focusNext);_4.forEach(_7,function(_c){_9[_c]=_a;});_4.forEach(_8,function(_d){_9[_d]=_b;});this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){_4.forEach(this.getChildren(),_4.hitch(this,"_startupChild"));},addChild:function(_e,_f){_5._KeyNavContainer.superclass.addChild.apply(this,arguments);this._startupChild(_e);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusNext:function(){if(this.focusedChild&&this.focusedChild.hasNextFocalNode&&this.focusedChild.hasNextFocalNode()){this.focusedChild.focusNext();return;}var _10=this._getNextFocusableChild(this.focusedChild,1);if(_10.getFocalNodes){this.focusChild(_10,_10.getFocalNodes()[0]);}else{this.focusChild(_10);}},focusPrev:function(){if(this.focusedChild&&this.focusedChild.hasPrevFocalNode&&this.focusedChild.hasPrevFocalNode()){this.focusedChild.focusPrev();return;}var _11=this._getNextFocusableChild(this.focusedChild,-1);if(_11.getFocalNodes){var _12=_11.getFocalNodes();this.focusChild(_11,_12[_12.length-1]);}else{this.focusChild(_11);}},focusChild:function(_13,_14){if(_13){if(this.focusedChild&&_13!==this.focusedChild){this._onChildBlur(this.focusedChild);}this.focusedChild=_13;if(_14&&_13.focusFocalNode){_13.focusFocalNode(_14);}else{_13.focus();}}},_startupChild:function(_15){if(_15.getFocalNodes){_4.forEach(_15.getFocalNodes(),function(_16){_4.attr(_16,"tabindex",-1);this._connectNode(_16);},this);}else{var _17=_15.focusNode||_15.domNode;if(_15.isFocusable()){_4.attr(_17,"tabindex",-1);}this._connectNode(_17);}},_connectNode:function(_18){this.connect(_18,"onfocus","_onNodeFocus");this.connect(_18,"onblur","_onNodeBlur");},_onContainerFocus:function(evt){if(evt.target!==this.domNode){return;}this.focusFirstChild();_4.removeAttr(this.domNode,"tabIndex");},_onBlur:function(evt){if(this.tabIndex){_4.attr(this.domNode,"tabindex",this.tabIndex);}},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var _1c=this._keyNavCodes[evt.charOrCode];if(_1c){_1c();_4.stopEvent(evt);}},_onNodeFocus:function(evt){var _1e=_5.getEnclosingWidget(evt.target);if(_1e&&_1e.isFocusable()){this.focusedChild=_1e;}_4.stopEvent(evt);},_onNodeBlur:function(evt){_4.stopEvent(evt);},_onChildBlur:function(_20){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getNextFocusableChild:function(_21,dir){if(_21){_21=this._getSiblingOfChild(_21,dir);}var _23=this.getChildren();for(var i=0;i<_23.length;i++){if(!_21){_21=_23[(dir>0)?0:(_23.length-1)];}if(_21.isFocusable()){return _21;}_21=this._getSiblingOfChild(_21,dir);}return null;}});}}};});