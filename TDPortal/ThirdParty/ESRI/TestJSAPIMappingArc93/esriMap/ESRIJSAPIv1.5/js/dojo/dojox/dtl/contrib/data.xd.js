/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.dtl.contrib.data"],["require","dojox.dtl._base"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.dtl.contrib.data"]){_4._hasResource["dojox.dtl.contrib.data"]=true;_4.provide("dojox.dtl.contrib.data");_4.require("dojox.dtl._base");(function(){var dd=_6.dtl;var _8=dd.contrib.data;var _9=true;_8._BoundItem=_4.extend(function(_a,_b){this.item=_a;this.store=_b;},{get:function(_c){var _d=this.store;var _e=this.item;if(_c=="getLabel"){return _d.getLabel(_e);}else{if(_c=="getAttributes"){return _d.getAttributes(_e);}else{if(_c=="getIdentity"){if(_d.getIdentity){return _d.getIdentity(_e);}return "Store has no identity API";}else{if(!_d.hasAttribute(_e,_c)){if(_c.slice(-1)=="s"){if(_9){_9=false;_4.deprecated("You no longer need an extra s to call getValues, it can be figured out automatically");}_c=_c.slice(0,-1);}if(!_d.hasAttribute(_e,_c)){return;}}var _f=_d.getValues(_e,_c);if(!_f){return;}if(!_4.isArray(_f)){return new _8._BoundItem(_f,_d);}_f=_4.map(_f,function(_10){if(_4.isObject(_10)&&_d.isItem(_10)){return new _8._BoundItem(_10,_d);}return _10;});_f.get=_8._get;return _f;}}}}});_8._BoundItem.prototype.get.safe=true;_8.BindDataNode=_4.extend(function(_11,_12,_13,_14){this.items=_11&&new dd._Filter(_11);this.query=_12&&new dd._Filter(_12);this.store=new dd._Filter(_13);this.alias=_14;},{render:function(_15,_16){var _17=this.items&&this.items.resolve(_15);var _18=this.query&&this.query.resolve(_15);var _19=this.store.resolve(_15);if(!_19||!_19.getFeatures){throw new Error("data_bind didn't receive a store");}if(_18){var _1a=false;_19.fetch({query:_18,sync:true,scope:this,onComplete:function(it){_1a=true;_17=it;}});if(!_1a){throw new Error("The bind_data tag only works with a query if the store executed synchronously");}}var _1c=[];if(_17){for(var i=0,_1e;_1e=_17[i];i++){_1c.push(new _8._BoundItem(_1e,_19));}}_15[this.alias]=_1c;return _16;},unrender:function(_1f,_20){return _20;},clone:function(){return this;}});_4.mixin(_8,{_get:function(key){if(this.length){return (this[0] instanceof _8._BoundItem)?this[0].get(key):this[0][key];}},bind_data:function(_22,_23){var _24=_23.contents.split();if(_24[2]!="to"||_24[4]!="as"||!_24[5]){throw new Error("data_bind expects the format: 'data_bind items to store as varName'");}return new _8.BindDataNode(_24[1],null,_24[3],_24[5]);},bind_query:function(_25,_26){var _27=_26.contents.split();if(_27[2]!="to"||_27[4]!="as"||!_27[5]){throw new Error("data_bind expects the format: 'bind_query query to store as varName'");}return new _8.BindDataNode(null,_27[1],_27[3],_27[5]);}});_8._get.safe=true;dd.register.tags("dojox.dtl.contrib",{"data":["bind_data","bind_query"]});})();}}};});