/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["require","dojox.gfx.svg"]],defineResource:function(_4,_5,_6){_4.require("dojox.gfx.svg");_4.experimental("dojox.gfx.svg_attach");(function(){_6.gfx.attachNode=function(_7){if(!_7){return null;}var s=null;switch(_7.tagName.toLowerCase()){case _6.gfx.Rect.nodeType:s=new _6.gfx.Rect(_7);_9(s);break;case _6.gfx.Ellipse.nodeType:s=new _6.gfx.Ellipse(_7);_a(s,_6.gfx.defaultEllipse);break;case _6.gfx.Polyline.nodeType:s=new _6.gfx.Polyline(_7);_a(s,_6.gfx.defaultPolyline);break;case _6.gfx.Path.nodeType:s=new _6.gfx.Path(_7);_a(s,_6.gfx.defaultPath);break;case _6.gfx.Circle.nodeType:s=new _6.gfx.Circle(_7);_a(s,_6.gfx.defaultCircle);break;case _6.gfx.Line.nodeType:s=new _6.gfx.Line(_7);_a(s,_6.gfx.defaultLine);break;case _6.gfx.Image.nodeType:s=new _6.gfx.Image(_7);_a(s,_6.gfx.defaultImage);break;case _6.gfx.Text.nodeType:var t=_7.getElementsByTagName("textPath");if(t&&t.length){s=new _6.gfx.TextPath(_7);_a(s,_6.gfx.defaultPath);_c(s);}else{s=new _6.gfx.Text(_7);_d(s);}_e(s);break;default:return null;}if(!(s instanceof _6.gfx.Image)){_f(s);_10(s);}_11(s);return s;};_6.gfx.attachSurface=function(_12){var s=new _6.gfx.Surface();s.rawNode=_12;var _14=_12.getElementsByTagName("defs");if(_14.length==0){return null;}s.defNode=_14[0];return s;};var _f=function(_15){var _16=_15.rawNode.getAttribute("fill");if(_16=="none"){_15.fillStyle=null;return;}var _17=null,_18=_6.gfx.svg.getRef(_16);if(_18){switch(_18.tagName.toLowerCase()){case "lineargradient":_17=_19(_6.gfx.defaultLinearGradient,_18);_4.forEach(["x1","y1","x2","y2"],function(x){_17[x]=_18.getAttribute(x);});break;case "radialgradient":_17=_19(_6.gfx.defaultRadialGradient,_18);_4.forEach(["cx","cy","r"],function(x){_17[x]=_18.getAttribute(x);});_17.cx=_18.getAttribute("cx");_17.cy=_18.getAttribute("cy");_17.r=_18.getAttribute("r");break;case "pattern":_17=_4.lang.shallowCopy(_6.gfx.defaultPattern,true);_4.forEach(["x","y","width","height"],function(x){_17[x]=_18.getAttribute(x);});_17.src=_18.firstChild.getAttributeNS(_6.gfx.svg.xmlns.xlink,"href");break;}}else{_17=new _4.Color(_16);var _1d=_15.rawNode.getAttribute("fill-opacity");if(_1d!=null){_17.a=_1d;}}_15.fillStyle=_17;};var _19=function(_1e,_1f){var _20=_4.clone(_1e);_20.colors=[];for(var i=0;i<_1f.childNodes.length;++i){_20.colors.push({offset:_1f.childNodes[i].getAttribute("offset"),color:new _4.Color(_1f.childNodes[i].getAttribute("stop-color"))});}return _20;};var _10=function(_22){var _23=_22.rawNode,_24=_23.getAttribute("stroke");if(_24==null||_24=="none"){_22.strokeStyle=null;return;}var _25=_22.strokeStyle=_4.clone(_6.gfx.defaultStroke);var _26=new _4.Color(_24);if(_26){_25.color=_26;_25.color.a=_23.getAttribute("stroke-opacity");_25.width=_23.getAttribute("stroke-width");_25.cap=_23.getAttribute("stroke-linecap");_25.join=_23.getAttribute("stroke-linejoin");if(_25.join=="miter"){_25.join=_23.getAttribute("stroke-miterlimit");}_25.style=_23.getAttribute("dojoGfxStrokeStyle");}};var _11=function(_27){var _28=_27.rawNode.getAttribute("transform");if(_28.match(/^matrix\(.+\)$/)){var t=_28.slice(7,-1).split(",");_27.matrix=_6.gfx.matrix.normalize({xx:parseFloat(t[0]),xy:parseFloat(t[2]),yx:parseFloat(t[1]),yy:parseFloat(t[3]),dx:parseFloat(t[4]),dy:parseFloat(t[5])});}else{_27.matrix=null;}};var _e=function(_2a){var _2b=_2a.fontStyle=_4.clone(_6.gfx.defaultFont),r=_2a.rawNode;_2b.style=r.getAttribute("font-style");_2b.variant=r.getAttribute("font-variant");_2b.weight=r.getAttribute("font-weight");_2b.size=r.getAttribute("font-size");_2b.family=r.getAttribute("font-family");};var _a=function(_2d,def){var _2f=_2d.shape=_4.clone(def),r=_2d.rawNode;for(var i in _2f){_2f[i]=r.getAttribute(i);}};var _9=function(_32){_a(_32,_6.gfx.defaultRect);_32.shape.r=Math.min(_32.rawNode.getAttribute("rx"),_32.rawNode.getAttribute("ry"));};var _d=function(_33){var _34=_33.shape=_4.clone(_6.gfx.defaultText),r=_33.rawNode;_34.x=r.getAttribute("x");_34.y=r.getAttribute("y");_34.align=r.getAttribute("text-anchor");_34.decoration=r.getAttribute("text-decoration");_34.rotated=parseFloat(r.getAttribute("rotate"))!=0;_34.kerning=r.getAttribute("kerning")=="auto";_34.text=r.firstChild.nodeValue;};var _c=function(_36){var _37=_36.shape=_4.clone(_6.gfx.defaultTextPath),r=_36.rawNode;_37.align=r.getAttribute("text-anchor");_37.decoration=r.getAttribute("text-decoration");_37.rotated=parseFloat(r.getAttribute("rotate"))!=0;_37.kerning=r.getAttribute("kerning")=="auto";_37.text=r.firstChild.nodeValue;};})();}};});