/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.charting.widget.Chart2D"],["require","dijit._Widget"],["require","dojox.charting.Chart2D"],["require","dojox.lang.functional"],["require","dojox.charting.action2d.Highlight"],["require","dojox.charting.action2d.Magnify"],["require","dojox.charting.action2d.MoveSlice"],["require","dojox.charting.action2d.Shake"],["require","dojox.charting.action2d.Tooltip"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.charting.widget.Chart2D"]){_4._hasResource["dojox.charting.widget.Chart2D"]=true;_4.provide("dojox.charting.widget.Chart2D");_4.require("dijit._Widget");_4.require("dojox.charting.Chart2D");_4.require("dojox.lang.functional");_4.require("dojox.charting.action2d.Highlight");_4.require("dojox.charting.action2d.Magnify");_4.require("dojox.charting.action2d.MoveSlice");_4.require("dojox.charting.action2d.Shake");_4.require("dojox.charting.action2d.Tooltip");(function(){var _7,_8,_9,_a,_b,_c=function(o){return o;},df=_6.lang.functional,du=_6.lang.utils,dc=_6.charting,d=_4;_4.declare("dojox.charting.widget.Chart2D",_5._Widget,{theme:null,margins:null,stroke:null,fill:null,buildRendering:function(){var n=this.domNode=this.srcNodeRef;var _13=d.query("> .axis",n).map(_8).filter(_c),_14=d.query("> .plot",n).map(_9).filter(_c),_15=d.query("> .action",n).map(_a).filter(_c),_16=d.query("> .series",n).map(_b).filter(_c);n.innerHTML="";var c=this.chart=new dc.Chart2D(n,{margins:this.margins,stroke:this.stroke,fill:this.fill});if(this.theme){c.setTheme(this.theme);}_13.forEach(function(_18){c.addAxis(_18.name,_18.kwArgs);});_14.forEach(function(_19){c.addPlot(_19.name,_19.kwArgs);});this.actions=_15.map(function(_1a){return new _1a.action(c,_1a.plot,_1a.kwArgs);});var _1b=df.foldl(_16,function(_1c,_1d){if(_1d.type=="data"){c.addSeries(_1d.name,_1d.data,_1d.kwArgs);_1c=true;}else{c.addSeries(_1d.name,[0],_1d.kwArgs);var kw={};du.updateWithPattern(kw,_1d.kwArgs,{"query":"","queryOptions":null,"start":0,"count":1},true);if(_1d.kwArgs.sort){kw.sort=_4.clone(_1d.kwArgs.sort);}d.mixin(kw,{onComplete:function(_1f){var _20;if("valueFn" in _1d.kwArgs){var fn=_1d.kwArgs.valueFn;_20=d.map(_1f,function(x){return fn(_1d.data.getValue(x,_1d.field,0));});}else{_20=d.map(_1f,function(x){return _1d.data.getValue(x,_1d.field,0);});}c.addSeries(_1d.name,_20,_1d.kwArgs).render();}});_1d.data.fetch(kw);}return _1c;},false);if(_1b){c.render();}},destroy:function(){this.chart.destroy();this.inherited(arguments);},resize:function(box){if(box.w>0&&box.h>0){_4.marginBox(this.domNode,box);this.chart.resize();}}});_7=function(_25,_26,kw){var dp=eval("("+_26+".prototype.defaultParams)");var x,_2a;for(x in dp){if(x in kw){continue;}_2a=_25.getAttribute(x);kw[x]=du.coerceType(dp[x],_2a==null||typeof _2a=="undefined"?dp[x]:_2a);}var op=eval("("+_26+".prototype.optionalParams)");for(x in op){if(x in kw){continue;}_2a=_25.getAttribute(x);if(_2a!=null){kw[x]=du.coerceType(op[x],_2a);}}};_8=function(_2c){var _2d=_2c.getAttribute("name"),_2e=_2c.getAttribute("type");if(!_2d){return null;}var o={name:_2d,kwArgs:{}},kw=o.kwArgs;if(_2e){if(dc.axis2d[_2e]){_2e=_6._scopeName+".charting.axis2d."+_2e;}var _31=eval("("+_2e+")");if(_31){kw.type=_31;}}else{_2e=_6._scopeName+".charting.axis2d.Default";}_7(_2c,_2e,kw);return o;};_9=function(_32){var _33=_32.getAttribute("name"),_34=_32.getAttribute("type");if(!_33){return null;}var o={name:_33,kwArgs:{}},kw=o.kwArgs;if(_34){if(dc.plot2d[_34]){_34=_6._scopeName+".charting.plot2d."+_34;}var _37=eval("("+_34+")");if(_37){kw.type=_37;}}else{_34=_6._scopeName+".charting.plot2d.Default";}_7(_32,_34,kw);return o;};_a=function(_38){var _39=_38.getAttribute("plot"),_3a=_38.getAttribute("type");if(!_39){_39="default";}var o={plot:_39,kwArgs:{}},kw=o.kwArgs;if(_3a){if(dc.action2d[_3a]){_3a=_6._scopeName+".charting.action2d."+_3a;}var _3d=eval("("+_3a+")");if(!_3d){return null;}o.action=_3d;}else{return null;}_7(_38,_3a,kw);return o;};_b=function(_3e){var ga=d.partial(d.attr,_3e);var _40=ga("name");if(!_40){return null;}var o={name:_40,kwArgs:{}},kw=o.kwArgs,t;t=ga("plot");if(t!=null){kw.plot=t;}t=ga("marker");if(t!=null){kw.marker=t;}t=ga("stroke");if(t!=null){kw.stroke=eval("("+t+")");}t=ga("fill");if(t!=null){kw.fill=eval("("+t+")");}t=ga("legend");if(t!=null){kw.legend=t;}t=ga("data");if(t!=null){o.type="data";o.data=_4.map(String(t).split(","),Number);return o;}t=ga("array");if(t!=null){o.type="data";o.data=eval("("+t+")");return o;}t=ga("store");if(t!=null){o.type="store";o.data=eval("("+t+")");t=ga("field");o.field=t!=null?t:"value";t=ga("query");if(!!t){kw.query=t;}t=ga("queryOptions");if(!!t){kw.queryOptions=eval("("+t+")");}t=ga("start");if(!!t){kw.start=Number(t);}t=ga("count");if(!!t){kw.count=Number(t);}t=ga("sort");if(!!t){kw.sort=eval("("+t+")");}t=ga("valueFn");if(!!t){kw.valueFn=df.lambda(t);}return o;}return null;};})();}}};});