/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojo.html"],["require","dojo.parser"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojo.html"]){_4._hasResource["dojo.html"]=true;_4.provide("dojo.html");_4.require("dojo.parser");(function(){var _7=0;_4.html._secureForInnerHtml=function(_8){return _8.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"");};_4.html._emptyNode=_4.empty;_4.html._setNodeContent=function(_9,_a,_b){if(_b){_4.html._emptyNode(_9);}if(typeof _a=="string"){var _c="",_d="",_e=0,_f=_9.nodeName.toLowerCase();switch(_f){case "tr":_c="<tr>";_d="</tr>";_e+=1;case "tbody":case "thead":_c="<tbody>"+_c;_d+="</tbody>";_e+=1;case "table":_c="<table>"+_c;_d+="</table>";_e+=1;break;}if(_e){var n=_9.ownerDocument.createElement("div");n.innerHTML=_c+_a+_d;do{n=n.firstChild;}while(--_e);_4.forEach(n.childNodes,function(n){_9.appendChild(n.cloneNode(true));});}else{_9.innerHTML=_a;}}else{if(_a.nodeType){_9.appendChild(_a);}else{_4.forEach(_a,function(n){_9.appendChild(n.cloneNode(true));});}}return _9;};_4.declare("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,constructor:function(_13,_14){_4.mixin(this,_13||{});_14=this.node=_4.byId(this.node||_14);if(!this.id){this.id=["Setter",(_14)?_14.id||_14.tagName:"",_7++].join("_");}if(!(this.node||_14)){new Error(this.declaredClass+": no node provided to "+this.id);}},set:function(_15,_16){if(undefined!==_15){this.content=_15;}if(_16){this._mixin(_16);}this.onBegin();this.setContent();this.onEnd();return this.node;},setContent:function(){var _17=this.node;if(!_17){console.error("setContent given no node");}try{_17=_4.html._setNodeContent(_17,this.content);}catch(e){var _18=this.onContentError(e);try{_17.innerHTML=_18;}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e);}}this.node=_17;},empty:function(){if(this.parseResults&&this.parseResults.length){_4.forEach(this.parseResults,function(w){if(w.destroy){w.destroy();}});delete this.parseResults;}_4.html._emptyNode(this.node);},onBegin:function(){var _1a=this.content;if(_4.isString(_1a)){if(this.cleanContent){_1a=_4.html._secureForInnerHtml(_1a);}if(this.extractContent){var _1b=_1a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_1b){_1a=_1b[1];}}}this.empty();this.content=_1a;return this.node;},onEnd:function(){if(this.parseContent){this._parse();}return this.node;},tearDown:function(){delete this.parseResults;delete this.node;delete this.content;},onContentError:function(err){return "Error occured setting content: "+err;},_mixin:function(_1d){var _1e={},key;for(key in _1d){if(key in _1e){continue;}this[key]=_1d[key];}},_parse:function(){var _20=this.node;try{this.parseResults=_4.parser.parse(_20,true);}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);}},_onError:function(_21,err,_23){var _24=this["on"+_21+"Error"].call(this,err);if(_23){console.error(_23,err);}else{if(_24){_4.html._setNodeContent(this.node,_24,true);}}}});_4.html.set=function(_25,_26,_27){if(undefined==_26){console.warn("dojo.html.set: no cont argument provided, using empty string");_26="";}if(!_27){return _4.html._setNodeContent(_25,_26,true);}else{var op=new _4.html._ContentSetter(_4.mixin(_27,{content:_26,node:_25}));return op.set();}};})();}}};});