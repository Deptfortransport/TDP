/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit.layout.SplitContainer"],["require","dojo.cookie"],["require","dijit.layout._LayoutWidget"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit.layout.SplitContainer"]){_4._hasResource["dijit.layout.SplitContainer"]=true;_4.provide("dijit.layout.SplitContainer");_4.require("dojo.cookie");_4.require("dijit.layout._LayoutWidget");_4.declare("dijit.layout.SplitContainer",_5.layout._LayoutWidget,{constructor:function(){_4.deprecated("dijit.layout.SplitContainer is deprecated","use BorderContainer with splitter instead",2);},activeSizing:false,sizerWidth:7,orientation:"horizontal",persist:true,baseClass:"dijitSplitContainer",postMixInProperties:function(){this.inherited("postMixInProperties",arguments);this.isHorizontal=(this.orientation=="horizontal");},postCreate:function(){this.inherited(arguments);this.sizers=[];if(_4.isMozilla){this.domNode.style.overflow="-moz-scrollbars-none";}if(typeof this.sizerWidth=="object"){try{this.sizerWidth=parseInt(this.sizerWidth.toString());}catch(e){this.sizerWidth=7;}}var _7=_4.doc.createElement("div");this.virtualSizer=_7;_7.style.position="relative";_7.style.zIndex=10;_7.className=this.isHorizontal?"dijitSplitContainerVirtualSizerH":"dijitSplitContainerVirtualSizerV";this.domNode.appendChild(_7);_4.setSelectable(_7,false);},destroy:function(){delete this.virtualSizer;_4.forEach(this._ownconnects,_4.disconnect);this.inherited(arguments);},startup:function(){if(this._started){return;}_4.forEach(this.getChildren(),function(_8,i,_a){this._setupChild(_8);if(i<_a.length-1){this._addSizer();}},this);if(this.persist){this._restoreState();}this.inherited(arguments);},_setupChild:function(_b){this.inherited(arguments);_b.domNode.style.position="absolute";_4.addClass(_b.domNode,"dijitSplitPane");},_onSizerMouseDown:function(e){if(e.target.id){for(var i=0;i<this.sizers.length;i++){if(this.sizers[i].id==e.target.id){break;}}if(i<this.sizers.length){this.beginSizing(e,i);}}},_addSizer:function(_e){_e=_e===undefined?this.sizers.length:_e;var _f=_4.doc.createElement("div");_f.id=_5.getUniqueId("dijit_layout_SplitterContainer_Splitter");this.sizers.splice(_e,0,_f);this.domNode.appendChild(_f);_f.className=this.isHorizontal?"dijitSplitContainerSizerH":"dijitSplitContainerSizerV";var _10=_4.doc.createElement("div");_10.className="thumb";_10.id=_f.id;_f.appendChild(_10);this.connect(_f,"onmousedown","_onSizerMouseDown");_4.setSelectable(_f,false);},removeChild:function(_11){if(this.sizers.length){var i=_4.indexOf(this.getChildren(),_11);if(i!=-1){if(i==this.sizers.length){i--;}_4.destroy(this.sizers[i]);this.sizers.splice(i,1);}}this.inherited(arguments);if(this._started){this.layout();}},addChild:function(_13,_14){this.inherited(arguments);if(this._started){var _15=this.getChildren();if(_15.length>1){this._addSizer(_14);}this.layout();}},layout:function(){this.paneWidth=this._contentBox.w;this.paneHeight=this._contentBox.h;var _16=this.getChildren();if(!_16.length){return;}var _17=this.isHorizontal?this.paneWidth:this.paneHeight;if(_16.length>1){_17-=this.sizerWidth*(_16.length-1);}var _18=0;_4.forEach(_16,function(_19){_18+=_19.sizeShare;});var _1a=_17/_18;var _1b=0;_4.forEach(_16.slice(0,_16.length-1),function(_1c){var _1d=Math.round(_1a*_1c.sizeShare);_1c.sizeActual=_1d;_1b+=_1d;});_16[_16.length-1].sizeActual=_17-_1b;this._checkSizes();var pos=0;var _1f=_16[0].sizeActual;this._movePanel(_16[0],pos,_1f);_16[0].position=pos;pos+=_1f;if(!this.sizers){return;}_4.some(_16.slice(1),function(_20,i){if(!this.sizers[i]){return true;}this._moveSlider(this.sizers[i],pos,this.sizerWidth);this.sizers[i].position=pos;pos+=this.sizerWidth;_1f=_20.sizeActual;this._movePanel(_20,pos,_1f);_20.position=pos;pos+=_1f;},this);},_movePanel:function(_22,pos,_24){if(this.isHorizontal){_22.domNode.style.left=pos+"px";_22.domNode.style.top=0;var box={w:_24,h:this.paneHeight};if(_22.resize){_22.resize(box);}else{_4.marginBox(_22.domNode,box);}}else{_22.domNode.style.left=0;_22.domNode.style.top=pos+"px";var box={w:this.paneWidth,h:_24};if(_22.resize){_22.resize(box);}else{_4.marginBox(_22.domNode,box);}}},_moveSlider:function(_26,pos,_28){if(this.isHorizontal){_26.style.left=pos+"px";_26.style.top=0;_4.marginBox(_26,{w:_28,h:this.paneHeight});}else{_26.style.left=0;_26.style.top=pos+"px";_4.marginBox(_26,{w:this.paneWidth,h:_28});}},_growPane:function(_29,_2a){if(_29>0){if(_2a.sizeActual>_2a.sizeMin){if((_2a.sizeActual-_2a.sizeMin)>_29){_2a.sizeActual=_2a.sizeActual-_29;_29=0;}else{_29-=_2a.sizeActual-_2a.sizeMin;_2a.sizeActual=_2a.sizeMin;}}}return _29;},_checkSizes:function(){var _2b=0;var _2c=0;var _2d=this.getChildren();_4.forEach(_2d,function(_2e){_2c+=_2e.sizeActual;_2b+=_2e.sizeMin;});if(_2b<=_2c){var _2f=0;_4.forEach(_2d,function(_30){if(_30.sizeActual<_30.sizeMin){_2f+=_30.sizeMin-_30.sizeActual;_30.sizeActual=_30.sizeMin;}});if(_2f>0){var _31=this.isDraggingLeft?_2d.reverse():_2d;_4.forEach(_31,function(_32){_2f=this._growPane(_2f,_32);},this);}}else{_4.forEach(_2d,function(_33){_33.sizeActual=Math.round(_2c*(_33.sizeMin/_2b));});}},beginSizing:function(e,i){var _36=this.getChildren();this.paneBefore=_36[i];this.paneAfter=_36[i+1];this.isSizing=true;this.sizingSplitter=this.sizers[i];if(!this.cover){this.cover=_4.create("div",{style:{position:"absolute",zIndex:5,top:0,left:0,width:"100%",height:"100%"}},this.domNode);}else{this.cover.style.zIndex=5;}this.sizingSplitter.style.zIndex=6;this.originPos=_4.coords(_36[0].domNode,true);if(this.isHorizontal){var _37=e.layerX||e.offsetX||0;var _38=e.pageX;this.originPos=this.originPos.x;}else{var _37=e.layerY||e.offsetY||0;var _38=e.pageY;this.originPos=this.originPos.y;}this.startPoint=this.lastPoint=_38;this.screenToClientOffset=_38-_37;this.dragOffset=this.lastPoint-this.paneBefore.sizeActual-this.originPos-this.paneBefore.position;if(!this.activeSizing){this._showSizingLine();}this._ownconnects=[];this._ownconnects.push(_4.connect(_4.doc.documentElement,"onmousemove",this,"changeSizing"));this._ownconnects.push(_4.connect(_4.doc.documentElement,"onmouseup",this,"endSizing"));_4.stopEvent(e);},changeSizing:function(e){if(!this.isSizing){return;}this.lastPoint=this.isHorizontal?e.pageX:e.pageY;this.movePoint();if(this.activeSizing){this._updateSize();}else{this._moveSizingLine();}_4.stopEvent(e);},endSizing:function(e){if(!this.isSizing){return;}if(this.cover){this.cover.style.zIndex=-1;}if(!this.activeSizing){this._hideSizingLine();}this._updateSize();this.isSizing=false;if(this.persist){this._saveState(this);}_4.forEach(this._ownconnects,_4.disconnect);},movePoint:function(){var p=this.lastPoint-this.screenToClientOffset;var a=p-this.dragOffset;a=this.legaliseSplitPoint(a);p=a+this.dragOffset;this.lastPoint=p+this.screenToClientOffset;},legaliseSplitPoint:function(a){a+=this.sizingSplitter.position;this.isDraggingLeft=!!(a>0);if(!this.activeSizing){var min=this.paneBefore.position+this.paneBefore.sizeMin;if(a<min){a=min;}var max=this.paneAfter.position+(this.paneAfter.sizeActual-(this.sizerWidth+this.paneAfter.sizeMin));if(a>max){a=max;}}a-=this.sizingSplitter.position;this._checkSizes();return a;},_updateSize:function(){var pos=this.lastPoint-this.dragOffset-this.originPos;var _41=this.paneBefore.position;var _42=this.paneAfter.position+this.paneAfter.sizeActual;this.paneBefore.sizeActual=pos-_41;this.paneAfter.position=pos+this.sizerWidth;this.paneAfter.sizeActual=_42-this.paneAfter.position;_4.forEach(this.getChildren(),function(_43){_43.sizeShare=_43.sizeActual;});if(this._started){this.layout();}},_showSizingLine:function(){this._moveSizingLine();_4.marginBox(this.virtualSizer,this.isHorizontal?{w:this.sizerWidth,h:this.paneHeight}:{w:this.paneWidth,h:this.sizerWidth});this.virtualSizer.style.display="block";},_hideSizingLine:function(){this.virtualSizer.style.display="none";},_moveSizingLine:function(){var pos=(this.lastPoint-this.startPoint)+this.sizingSplitter.position;_4.style(this.virtualSizer,(this.isHorizontal?"left":"top"),pos+"px");},_getCookieName:function(i){return this.id+"_"+i;},_restoreState:function(){_4.forEach(this.getChildren(),function(_46,i){var _48=this._getCookieName(i);var _49=_4.cookie(_48);if(_49){var pos=parseInt(_49);if(typeof pos=="number"){_46.sizeShare=pos;}}},this);},_saveState:function(){if(!this.persist){return;}_4.forEach(this.getChildren(),function(_4b,i){_4.cookie(this._getCookieName(i),_4b.sizeShare,{expires:365});},this);}});_4.extend(_5._Widget,{sizeMin:10,sizeShare:10});}}};});