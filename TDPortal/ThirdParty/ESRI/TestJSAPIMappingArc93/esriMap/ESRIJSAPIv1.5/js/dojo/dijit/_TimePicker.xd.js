/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit._TimePicker"],["require","dijit.form._FormWidget"],["require","dojo.date.locale"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit._TimePicker"]){_4._hasResource["dijit._TimePicker"]=true;_4.provide("dijit._TimePicker");_4.require("dijit.form._FormWidget");_4.require("dojo.date.locale");_4.declare("dijit._TimePicker",[_5._Widget,_5._Templated],{templateString:"<div id=\"widget_${id}\" class=\"dijitMenu ${baseClass}\"\r\n    ><div dojoAttachPoint=\"upArrow\" class=\"dijitButtonNode dijitUpArrowButton\" dojoAttachEvent=\"onmouseenter:_buttonMouse,onmouseleave:_buttonMouse\"\r\n\t\t><div class=\"dijitReset dijitInline dijitArrowButtonInner\" wairole=\"presentation\" role=\"presentation\">&nbsp;</div\r\n\t\t><div class=\"dijitArrowButtonChar\">&#9650;</div></div\r\n    ><div dojoAttachPoint=\"timeMenu,focusNode\" dojoAttachEvent=\"onclick:_onOptionSelected,onmouseover,onmouseout\"></div\r\n    ><div dojoAttachPoint=\"downArrow\" class=\"dijitButtonNode dijitDownArrowButton\" dojoAttachEvent=\"onmouseenter:_buttonMouse,onmouseleave:_buttonMouse\"\r\n\t\t><div class=\"dijitReset dijitInline dijitArrowButtonInner\" wairole=\"presentation\" role=\"presentation\">&nbsp;</div\r\n\t\t><div class=\"dijitArrowButtonChar\">&#9660;</div></div\r\n></div>\r\n",baseClass:"dijitTimePicker",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",visibleRange:"T05:00:00",value:new Date(),_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:_4.date.stamp.toISOString,_filterString:"",setValue:function(_7){_4.deprecated("dijit._TimePicker:setValue() is deprecated.  Use attr('value') instead.","","2.0");this.attr("value",_7);},_setValueAttr:function(_8){this.value=_8;this._showText();},onOpen:function(_9){if(this._beenOpened&&this.domNode.parentNode){var p=_5.byId(this.domNode.parentNode.dijitPopupParent);if(p){var _b=p.getDisplayedValue();if(_b&&!p.parse(_b,p.constraints)){this._filterString=_b;}else{this._filterString="";}this._showText();}}this._beenOpened=true;},isDisabledDate:function(_c,_d){return false;},_getFilteredNodes:function(_e,_f,_10){var _11=[],n,i=_e,max=this._maxIncrement+Math.abs(i),chk=_10?-1:1,dec=_10?1:0,inc=_10?0:1;do{i=i-dec;n=this._createOption(i);if(n){_11.push(n);}i=i+inc;}while(_11.length<_f&&(i*chk)<max);if(_10){_11.reverse();}return _11;},_showText:function(){this.timeMenu.innerHTML="";var _18=_4.date.stamp.fromISOString;this._clickableIncrementDate=_18(this.clickableIncrement);this._visibleIncrementDate=_18(this.visibleIncrement);this._visibleRangeDate=_18(this.visibleRange);var _19=function(_1a){return _1a.getHours()*60*60+_1a.getMinutes()*60+_1a.getSeconds();};var _1b=_19(this._clickableIncrementDate);var _1c=_19(this._visibleIncrementDate);var _1d=_19(this._visibleRangeDate);var _1e=this.value.getTime();this._refDate=new Date(_1e-_1e%(_1c*1000));this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._totalIncrements=_1d/_1b;this._visibleIncrement=_1c/_1b;this._maxIncrement=(60*60*24)/_1b;var _1f=this._getFilteredNodes(0,this._totalIncrements>>1,true);var _20=this._getFilteredNodes(0,this._totalIncrements>>1,false);if(_1f.length<this._totalIncrements>>1){_1f=_1f.slice(_1f.length/2);_20=_20.slice(0,_20.length/2);}_4.forEach(_1f.concat(_20),function(n){this.timeMenu.appendChild(n);},this);},postCreate:function(){if(this.constraints===_5._TimePicker.prototype.constraints){this.constraints={};}_4.mixin(this,this.constraints);if(!this.constraints.locale){this.constraints.locale=this.lang;}this.connect(this.timeMenu,_4.isIE?"onmousewheel":"DOMMouseScroll","_mouseWheeled");var _22=this;var _23=function(){_22._connects.push(_5.typematic.addMouseListener.apply(null,arguments));};_23(this.upArrow,this,this._onArrowUp,1,50);_23(this.downArrow,this,this._onArrowDown,1,50);var _24=function(cb){return function(cnt){if(cnt>0){cb.call(this,arguments);}};};var _27=function(_28,cb){return function(e){_4.stopEvent(e);_5.typematic.trigger(e,this,_28,_24(cb),_28,1,50);};};this.connect(this.upArrow,"onmouseover",_27(this.upArrow,this._onArrowUp));this.connect(this.downArrow,"onmouseover",_27(this.downArrow,this._onArrowDown));this.inherited(arguments);},_buttonMouse:function(e){_4.toggleClass(e.currentTarget,"dijitButtonNodeHover",e.type=="mouseover");},_createOption:function(_2c){var _2d=new Date(this._refDate);var _2e=this._clickableIncrementDate;_2d.setHours(_2d.getHours()+_2e.getHours()*_2c,_2d.getMinutes()+_2e.getMinutes()*_2c,_2d.getSeconds()+_2e.getSeconds()*_2c);var _2f=_4.date.locale.format(_2d,this.constraints);if(this._filterString&&_2f.toLowerCase().indexOf(this._filterString)!==0){return null;}var div=_4.create("div",{"class":this.baseClass+"Item"});div.date=_2d;div.index=_2c;_4.create("div",{"class":this.baseClass+"ItemInner",innerHTML:_2f},div);if(_2c%this._visibleIncrement<1&&_2c%this._visibleIncrement>-1){_4.addClass(div,this.baseClass+"Marker");}else{if(!(_2c%this._clickableIncrement)){_4.addClass(div,this.baseClass+"Tick");}}if(this.isDisabledDate(_2d)){_4.addClass(div,this.baseClass+"ItemDisabled");}if(!_4.date.compare(this.value,_2d,this.constraints.selector)){div.selected=true;_4.addClass(div,this.baseClass+"ItemSelected");if(_4.hasClass(div,this.baseClass+"Marker")){_4.addClass(div,this.baseClass+"MarkerSelected");}else{_4.addClass(div,this.baseClass+"TickSelected");}}return div;},_onOptionSelected:function(tgt){var _32=tgt.target.date||tgt.target.parentNode.date;if(!_32||this.isDisabledDate(_32)){return;}this._highlighted_option=null;this.attr("value",_32);this.onValueSelected(_32);},onValueSelected:function(_33){},_highlightOption:function(_34,_35){if(!_34){return;}if(_35){if(this._highlighted_option){this._highlightOption(this._highlighted_option,false);}this._highlighted_option=_34;}else{if(this._highlighted_option!==_34){return;}else{this._highlighted_option=null;}}_4.toggleClass(_34,this.baseClass+"ItemHover",_35);if(_4.hasClass(_34,this.baseClass+"Marker")){_4.toggleClass(_34,this.baseClass+"MarkerHover",_35);}else{_4.toggleClass(_34,this.baseClass+"TickHover",_35);}},onmouseover:function(e){var tgr=(e.target.parentNode===this.timeMenu)?e.target:e.target.parentNode;if(!_4.hasClass(tgr,this.baseClass+"Item")){return;}this._highlightOption(tgr,true);},onmouseout:function(e){var tgr=(e.target.parentNode===this.timeMenu)?e.target:e.target.parentNode;this._highlightOption(tgr,false);},_mouseWheeled:function(e){_4.stopEvent(e);var _3b=(_4.isIE?e.wheelDelta:-e.detail);this[(_3b>0?"_onArrowUp":"_onArrowDown")]();},_onArrowUp:function(_3c){if(typeof _3c=="number"&&_3c==-1){return;}if(!this.timeMenu.childNodes.length){return;}var _3d=this.timeMenu.childNodes[0].index;var _3e=this._getFilteredNodes(_3d,1,true);if(_3e.length){this.timeMenu.removeChild(this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]);this.timeMenu.insertBefore(_3e[0],this.timeMenu.childNodes[0]);}},_onArrowDown:function(_3f){if(typeof _3f=="number"&&_3f==-1){return;}if(!this.timeMenu.childNodes.length){return;}var _40=this.timeMenu.childNodes[this.timeMenu.childNodes.length-1].index+1;var _41=this._getFilteredNodes(_40,1,false);if(_41.length){this.timeMenu.removeChild(this.timeMenu.childNodes[0]);this.timeMenu.appendChild(_41[0]);}},handleKey:function(e){var dk=_4.keys;if(e.keyChar||e.charOrCode===dk.BACKSPACE||e.charOrCode==dk.DELETE){setTimeout(_4.hitch(this,function(){this._filterString=e.target.value.toLowerCase();this._showText();}),1);}else{if(e.charOrCode==dk.DOWN_ARROW||e.charOrCode==dk.UP_ARROW){_4.stopEvent(e);if(this._highlighted_option&&!this._highlighted_option.parentNode){this._highlighted_option=null;}var _44=this.timeMenu,tgt=this._highlighted_option||_4.query("."+this.baseClass+"ItemSelected",_44)[0];if(!tgt){tgt=_44.childNodes[0];}else{if(_44.childNodes.length){if(e.charOrCode==dk.DOWN_ARROW&&!tgt.nextSibling){this._onArrowDown();}else{if(e.charOrCode==dk.UP_ARROW&&!tgt.previousSibling){this._onArrowUp();}}if(e.charOrCode==dk.DOWN_ARROW){tgt=tgt.nextSibling;}else{tgt=tgt.previousSibling;}}}this._highlightOption(tgt,true);}else{if(this._highlighted_option&&(e.charOrCode==dk.ENTER||e.charOrCode===dk.TAB)){if(e.charOrCode==dk.ENTER){_4.stopEvent(e);}setTimeout(_4.hitch(this,function(){this._onOptionSelected({target:this._highlighted_option});}),1);}}}}});}}};});