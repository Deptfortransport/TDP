/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.widget.RollingList"],["require","dijit._Templated"],["require","dijit.layout.ContentPane"],["require","dijit.layout._LayoutWidget"],["require","dijit.Menu"],["require","dojox.html.metrics"],["require","dijit.form.Button"],["require","dojo.i18n"],["requireLocalization","dojox.widget","RollingList",null,"ROOT,ca,sk,sl,th","ROOT,ca,sk,sl,th"],["requireLocalization","dijit","common",null,"ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,ko,nb,nl,pl,pt,pt-pt,ru,sk,sl,sv,th,tr,zh,zh-tw","ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,ko,nb,nl,pl,pt,pt-pt,ru,sk,sl,sv,th,tr,zh,zh-tw"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.widget.RollingList"]){_4._hasResource["dojox.widget.RollingList"]=true;_4.provide("dojox.widget.RollingList");_4.experimental("dojox.widget.RollingList");_4.require("dijit._Templated");_4.require("dijit.layout.ContentPane");_4.require("dijit.layout._LayoutWidget");_4.require("dijit.Menu");_4.require("dojox.html.metrics");_4.require("dijit.form.Button");_4.require("dojo.i18n");_4.declare("dojox.widget._RollingListPane",[_5.layout.ContentPane,_5._Templated,_5._Contained],{templateString:"<div class=\"dojoxRollingListPane\"><table><tbody><tr><td dojoAttachPoint=\"containerNode\"></td></tr></tbody></div>",parentWidget:null,parentPane:null,store:null,items:null,query:null,queryOptions:null,_focusByNode:true,minWidth:0,_setContentAndScroll:function(_7,_8){this._setContent(_7,_8);this.parentWidget.scrollIntoView(this);},_updateNodeWidth:function(n,_a){n.style.width="";var _b=_4.marginBox(n).w;if(_b<_a){_4.marginBox(n,{w:_a});}},_onMinWidthChange:function(v){this._updateNodeWidth(this.domNode,v);},_setMinWidthAttr:function(v){if(v!==this.minWidth){this.minWidth=v;this._onMinWidthChange(v);}},startup:function(){if(this._started){return;}if(this.store&&this.store.getFeatures()["dojo.data.api.Notification"]){window.setTimeout(_4.hitch(this,function(){this.connect(this.store,"onSet","_onSetItem");this.connect(this.store,"onNew","_onNewItem");this.connect(this.store,"onDelete","_onDeleteItem");}),1);}this.connect(this.focusNode||this.domNode,"onkeypress","_focusKey");this.parentWidget._updateClass(this.domNode,"Pane");this.inherited(arguments);this._onMinWidthChange(this.minWidth);},_focusKey:function(e){if(e.charOrCode==_4.keys.BACKSPACE){_4.stopEvent(e);return;}else{if(e.charOrCode==_4.keys.LEFT_ARROW&&this.parentPane){this.parentPane.focus();this.parentWidget.scrollIntoView(this.parentPane);}else{if(e.charOrCode==_4.keys.ENTER){this.parentWidget._onExecute();}}}},focus:function(_f){if(this.parentWidget._focusedPane!=this){this.parentWidget._focusedPane=this;this.parentWidget.scrollIntoView(this);if(this._focusByNode&&(!this.parentWidget._savedFocus||_f)){try{(this.focusNode||this.domNode).focus();}catch(e){}}}},_loadCheck:function(){if(!this._started){var c=this.connect(this,"startup",function(){this.disconnect(c);this._loadCheck();});}var _11=this.domNode&&this._isShown();if((this.store||this.items)&&((this.refreshOnShow&&_11)||(!this.isLoaded&&_11))){this._loadQuery();}},_loadQuery:function(){this.isLoaded=false;if(this.items){this._setContentAndScroll(this.onLoadStart(),true);window.setTimeout(_4.hitch(this,"_doQuery"),1);}else{this._doQuery();}},_doLoadItems:function(_12,_13){var _14=0,_15=this.store;_4.forEach(_12,function(_16){if(!_15.isItemLoaded(_16)){_14++;}});if(_14===0){_13();}else{var _17=function(_18){_14--;if((_14)===0){_13();}};_4.forEach(_12,function(_19){if(!_15.isItemLoaded(_19)){_15.loadItem({item:_19,onItem:_17});}});}},_doQuery:function(){var _1a=this.parentWidget.preloadItems;_1a=(_1a===true||(this.items&&this.items.length<=Number(_1a)));if(this.items&&_1a){this._doLoadItems(this.items,_4.hitch(this,"onItems"));}else{if(this.items){this.onItems();}else{this._setContentAndScroll(this.onFetchStart(),true);this.store.fetch({query:this.query,onComplete:function(_1b){this.items=_1b;this.onItems();},onError:function(e){this._onError("Fetch",e);},scope:this});}}},_hasItem:function(_1d){var _1e=this.items||[];for(var i=0,_20;(_20=_1e[i]);i++){if(this.parentWidget._itemsMatch(_20,_1d)){return true;}}return false;},_onSetItem:function(_21,_22,_23,_24){if(this._hasItem(_21)){this._loadCheck(true);}},_onNewItem:function(_25,_26){var sel;if((!_26&&!this.parentPane)||(_26&&this.parentPane&&this.parentPane._hasItem(_26.item)&&(sel=this.parentPane._getSelected())&&this.parentWidget._itemsMatch(sel.item,_26.item))){this.items.push(_25);this._loadCheck(true);}else{if(_26&&this.parentPane&&this._hasItem(_26.item)){this._loadCheck(true);}}},_onDeleteItem:function(_28){if(this._hasItem(_28)){this.items=_4.filter(this.items,function(i){return (i!=_28);});this._loadCheck(true);}},onFetchStart:function(){return this.loadingMessage;},onFetchError:function(_2a){return this.errorMessage;},onLoadStart:function(){return this.loadingMessage;},onLoadError:function(_2b){return this.errorMessage;},onItems:function(){this._onLoadHandler();}});_4.declare("dojox.widget._RollingListGroupPane",[_6.widget._RollingListPane],{templateString:"<div><div dojoAttachPoint=\"containerNode\"></div>"+"<div dojoAttachPoint=\"menuContainer\">"+"<div dojoAttachPoint=\"menuNode\"></div>"+"</div></div>",_menu:null,_loadCheck:function(){var _2c=this._isShown();if((this.store||this.items)&&((this.refreshOnShow&&_2c)||(!this.isLoaded&&_2c))){this._loadQuery();}},_setContent:function(_2d){if(!this._menu){this.inherited(arguments);}},_onMinWidthChange:function(v){if(!this._menu){return;}var _2f=_4.marginBox(this.domNode).w;var _30=_4.marginBox(this._menu.domNode).w;this._updateNodeWidth(this._menu.domNode,v-(_2f-_30));},onItems:function(){var _31,_32=false;if(this._menu){_31=this._getSelected();this._menu.destroyRecursive();}this._menu=this._getMenu();var _33,_34;if(this.items.length){_4.forEach(this.items,function(_35){_33=this.parentWidget._getMenuItemForItem(_35,this);if(_33){if(_31&&this.parentWidget._itemsMatch(_33.item,_31.item)){_34=_33;}this._menu.addChild(_33);}},this);}else{_33=this.parentWidget._getMenuItemForItem(null,this);if(_33){this._menu.addChild(_33);}}if(_34){this._setSelected(_34);if((_31&&!_31.children&&_34.children)||(_31&&_31.children&&!_34.children)){var _36=this.parentWidget._getPaneForItem(_34.item,this,_34.children);if(_36){this.parentWidget.addChild(_36,this.getIndexInParent()+1);}else{this.parentWidget._removeAfter(this);this.parentWidget._onItemClick(null,this,_34.item,_34.children);}}}else{if(_31){this.parentWidget._removeAfter(this);}}this.containerNode.innerHTML="";this.containerNode.appendChild(this._menu.domNode);this.parentWidget.scrollIntoView(this);this._checkScrollConnection(true);this.inherited(arguments);this._onMinWidthChange(this.minWidth);},_checkScrollConnection:function(_37){var _38=this.store;if(this._scrollConn){this.disconnect(this._scrollConn);}delete this._scrollConn;if(!_4.every(this.items,function(i){return _38.isItemLoaded(i);})){if(_37){this._loadVisibleItems();}this._scrollConn=this.connect(this.domNode,"onscroll","_onScrollPane");}},startup:function(){this.inherited(arguments);this.parentWidget._updateClass(this.domNode,"GroupPane");},focus:function(_3a){if(this._menu){if(this._pendingFocus){this.disconnect(this._pendingFocus);}delete this._pendingFocus;var _3b=this._menu.focusedChild;if(!_3b){var _3c=_4.query(".dojoxRollingListItemSelected",this.domNode)[0];if(_3c){_3b=_5.byNode(_3c);}}if(!_3b){_3b=this._menu.getChildren()[0]||this._menu;}this._focusByNode=false;if(_3b.focusNode){if(!this.parentWidget._savedFocus||_3a){try{_3b.focusNode.focus();}catch(e){}}window.setTimeout(function(){try{_5.scrollIntoView(_3b.focusNode);}catch(e){}},1);}else{if(_3b.focus){if(!this.parentWidget._savedFocus||_3a){_3b.focus();}}else{this._focusByNode=true;}}this.inherited(arguments);}else{if(!this._pendingFocus){this._pendingFocus=this.connect(this,"onItems","focus");}}},_getMenu:function(){var _3d=this;var _3e=new _5.Menu({parentMenu:this.parentPane?this.parentPane._menu:null,onCancel:function(_3f){if(_3d.parentPane){_3d.parentPane.focus(true);}},_moveToPopup:function(evt){if(this.focusedChild&&!this.focusedChild.disabled){this.focusedChild._onClick(evt);}}},this.menuNode);this.connect(_3e,"onItemClick",function(_41,evt){if(_41.disabled){return;}evt.alreadySelected=_4.hasClass(_41.domNode,"dojoxRollingListItemSelected");if(evt.alreadySelected&&((evt.type=="keypress"&&evt.charOrCode!=_4.keys.ENTER)||(evt.type=="internal"))){var p=this.parentWidget.getChildren()[this.getIndexInParent()+1];if(p){p.focus(true);this.parentWidget.scrollIntoView(p);}}else{this._setSelected(_41,_3e);this.parentWidget._onItemClick(evt,this,_41.item,_41.children);if(evt.type=="keypress"&&evt.charOrCode==_4.keys.ENTER){this.parentWidget._onExecute();}}});if(!_3e._started){_3e.startup();}return _3e;},_onScrollPane:function(){if(this._visibleLoadPending){window.clearTimeout(this._visibleLoadPending);}this._visibleLoadPending=window.setTimeout(_4.hitch(this,"_loadVisibleItems"),500);},_layoutHack:function(){if(_4.isFF==2&&!this._layoutHackHandle){var _44=this.domNode;var old=_44.style.opacity;_44.style.opacity="0.999";this._layoutHackHandle=setTimeout(_4.hitch(this,function(){this._layoutHackHandle=null;_44.style.opacity=old;}),0);}},_loadVisibleItems:function(){delete this._visibleLoadPending;var _46=this._menu;if(!_46){return;}var _47=_46.getChildren();if(!_47||!_47.length){return;}var _48=function(n,m,pb){var s=_4.getComputedStyle(n);var r=0;if(m){r+=_4._getMarginExtents(n,s).t;}if(pb){r+=_4._getPadBorderExtents(n,s).t;}return r;};var _4e=_48(this.domNode,false,true)+_48(this.containerNode,true,true)+_48(_46.domNode,true,true)+_48(_47[0].domNode,true,false);var h=_4.contentBox(this.domNode).h;var _50=this.domNode.scrollTop-_4e-(h/2);var _51=_50+(3*h/2);var _52=_4.filter(_47,function(c){var cnt=c.domNode.offsetTop;var s=c.store;var i=c.item;return (cnt>=_50&&cnt<=_51&&!s.isItemLoaded(i));});var _57=_4.map(_52,function(c){return c.item;});var _59=_4.hitch(this,function(){var _5a=this._getSelected();var _5b;_4.forEach(_57,function(_5c,idx){var _5e=this.parentWidget._getMenuItemForItem(_5c,this);var _5f=_52[idx];var _60=_5f.getIndexInParent();_46.removeChild(_5f);if(_5e){if(_5a&&this.parentWidget._itemsMatch(_5e.item,_5a.item)){_5b=_5e;}_46.addChild(_5e,_60);if(_46.focusedChild==_5f){_46.focusChild(_5e);}}_5f.destroy();},this);this._checkScrollConnection(false);this._layoutHack();});this._doLoadItems(_57,_59);},_getSelected:function(_61){if(!_61){_61=this._menu;}if(_61){var _62=this._menu.getChildren();for(var i=0,_64;(_64=_62[i]);i++){if(_4.hasClass(_64.domNode,"dojoxRollingListItemSelected")){return _64;}}}return null;},_setSelected:function(_65,_66){if(!_66){_66=this._menu;}if(_66){_4.forEach(_66.getChildren(),function(i){this.parentWidget._updateClass(i.domNode,"Item",{"Selected":(_65&&(i==_65&&!i.disabled))});},this);}},destroy:function(){if(this._layoutHackHandle){clearTimeout(this._layoutHackHandle);}this.inherited(arguments);}});_4.declare("dojox.widget.RollingList",[_5._Widget,_5._Templated,_5._Container],{templateString:"<div class=\"dojoxRollingList ${className}\"\r\n\t><div class=\"dojoxRollingListContainer\" dojoAttachPoint=\"containerNode\" dojoAttachEvent=\"onkeypress:_onKey\"\r\n\t></div\r\n\t><div class=\"dojoxRollingListButtons\" dojoAttachPoint=\"buttonsNode\"\r\n        ><button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"okButton\"\r\n\t\t\t\tdojoAttachEvent=\"onClick:_onExecute\">${okButtonLabel}</button\r\n        ><button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"cancelButton\"\r\n\t\t\t\tdojoAttachEvent=\"onClick:_onCancel\">${cancelButtonLabel}</button\r\n\t></div\r\n></div>\r\n",widgetsInTemplate:true,className:"",store:null,query:null,queryOptions:null,childrenAttrs:["children"],parentAttr:"",value:null,executeOnDblClick:true,preloadItems:false,showButtons:false,okButtonLabel:"",cancelButtonLabel:"",minPaneWidth:0,postMixInProperties:function(){this.inherited(arguments);var loc=_4.i18n.getLocalization("dijit","common");this.okButtonLabel=this.okButtonLabel||loc.buttonOk;this.cancelButtonLabel=this.cancelButtonLabel||loc.buttonCancel;},_setShowButtonsAttr:function(_69){var _6a=false;if((this.showButtons!=_69&&this._started)||(this.showButtons==_69&&!this.started)){_6a=true;}_4.toggleClass(this.domNode,"dojoxRollingListButtonsHidden",!_69);this.showButtons=_69;if(_6a){if(this._started){this.layout();}else{window.setTimeout(_4.hitch(this,"layout"),0);}}},_itemsMatch:function(_6b,_6c){if(!_6b&&!_6c){return true;}else{if(!_6b||!_6c){return false;}}return (_6b==_6c||(this._isIdentity&&this.store.getIdentity(_6b)==this.store.getIdentity(_6c)));},_removeAfter:function(idx){if(typeof idx!="number"){idx=this.getIndexOfChild(idx);}if(idx>=0){_4.forEach(this.getChildren(),function(c,i){if(i>idx){this.removeChild(c);c.destroyRecursive();}},this);}var _70=this.getChildren(),_71=_70[_70.length-1];var _72=null;while(_71&&!_72){var val=_71._getSelected?_71._getSelected():null;if(val){_72=val.item;}_71=_71.parentPane;}if(!this._setInProgress){this._setValue(_72);}},addChild:function(_74,_75){if(_75>0){this._removeAfter(_75-1);}this.inherited(arguments);if(!_74._started){_74.startup();}_74.attr("minWidth",this.minPaneWidth);this.layout();if(!this._savedFocus){_74.focus();}},_setMinPaneWidthAttr:function(_76){if(_76!==this.minPaneWidth){this.minPaneWidth=_76;_4.forEach(this.getChildren(),function(c){c.attr("minWidth",_76);});}},_updateClass:function(_78,_79,_7a){if(!this._declaredClasses){this._declaredClasses=("dojoxRollingList "+this.className).split(" ");}_4.forEach(this._declaredClasses,function(c){if(c){_4.addClass(_78,c+_79);for(var k in _7a||{}){_4.toggleClass(_78,c+_79+k,_7a[k]);}_4.toggleClass(_78,c+_79+"FocusSelected",(_4.hasClass(_78,c+_79+"Focus")&&_4.hasClass(_78,c+_79+"Selected")));_4.toggleClass(_78,c+_79+"HoverSelected",(_4.hasClass(_78,c+_79+"Hover")&&_4.hasClass(_78,c+_79+"Selected")));}});},scrollIntoView:function(_7d){if(this._scrollingTimeout){window.clearTimeout(this._scrollingTimeout);}delete this._scrollingTimeout;this._scrollingTimeout=window.setTimeout(_4.hitch(this,function(){if(_7d.domNode){_5.scrollIntoView(_7d.domNode);}delete this._scrollingTimeout;return;}),1);},resize:function(_7e){_5.layout._LayoutWidget.prototype.resize.call(this,_7e);},layout:function(){var _7f=this.getChildren();if(this._contentBox){var bn=this.buttonsNode;var _81=this._contentBox.h-_4.marginBox(bn).h-_6.html.metrics.getScrollbar().h;_4.forEach(_7f,function(c){_4.marginBox(c.domNode,{h:_81});});}if(this._focusedPane){var foc=this._focusedPane;delete this._focusedPane;if(!this._savedFocus){foc.focus();}}else{if(_7f&&_7f.length){if(!this._savedFocus){_7f[0].focus();}}}},_onChange:function(_84){this.onChange(_84);},_setValue:function(_85){delete this._setInProgress;if(!this._itemsMatch(this.value,_85)){this.value=_85;this._onChange(_85);}},_setValueAttr:function(_86){if(this._itemsMatch(this.value,_86)&&!_86){return;}if(this._setInProgress&&this._setInProgress===_86){return;}this._setInProgress=_86;if(!_86||!this.store.isItem(_86)){var _87=this.getChildren()[0];_87._setSelected(null);this._onItemClick(null,_87,null,null);return;}var _88=_4.hitch(this,function(_89,_8a){var _8b=this.store,id;if(this.parentAttr&&_8b.getFeatures()["dojo.data.api.Identity"]&&((id=this.store.getValue(_89,this.parentAttr))||id==="")){var cb=function(i){if(_8b.getIdentity(i)==_8b.getIdentity(_89)){_8a(null);}else{_8a([i]);}};if(id===""){_8a(null);}else{if(typeof id=="string"){_8b.fetchItemByIdentity({identity:id,onItem:cb});}else{if(_8b.isItem(id)){cb(id);}}}}else{var _8f=this.childrenAttrs.length;var _90=[];_4.forEach(this.childrenAttrs,function(_91){var q={};q[_91]=_89;_8b.fetch({query:q,scope:this,onComplete:function(_93){if(this._setInProgress!==_86){return;}_90=_90.concat(_93);_8f--;if(_8f===0){_8a(_90);}}});},this);}});var _94=_4.hitch(this,function(_95,idx){var set=_95[idx];var _98=this.getChildren()[idx];var _99;if(set&&_98){var fx=_4.hitch(this,function(){if(_99){this.disconnect(_99);}delete _99;if(this._setInProgress!==_86){return;}var _9b=_4.filter(_98._menu.getChildren(),function(i){return this._itemsMatch(i.item,set);},this)[0];if(_9b){idx++;_98._menu.onItemClick(_9b,{type:"internal",stopPropagation:function(){},preventDefault:function(){}});if(_95[idx]){_94(_95,idx);}else{this._setValue(set);this.onItemClick(set,_98,this.getChildItems(set));}}});if(!_98.isLoaded){_99=this.connect(_98,"onLoad",fx);}else{fx();}}else{if(idx===0){this.attr("value",null);}}});var _9d=[];var _9e=_4.hitch(this,function(_9f){if(_9f&&_9f.length){_9d.push(_9f[0]);_88(_9f[0],_9e);}else{if(!_9f){_9d.pop();}_9d.reverse();_94(_9d,0);}});var ns=this.domNode.style;if(ns.display=="none"||ns.visibility=="hidden"){this._setValue(_86);}else{if(!this._itemsMatch(_86,this._visibleItem)){_9e([_86]);}}},_onItemClick:function(evt,_a2,_a3,_a4){if(evt){var _a5=this._getPaneForItem(_a3,_a2,_a4);var _a6=(evt.type=="click"&&evt.alreadySelected);if(_a6&&_a5){this._removeAfter(_a2.getIndexInParent()+1);var _a7=_a2.getNextSibling();if(_a7&&_a7._setSelected){_a7._setSelected(null);}this.scrollIntoView(_a7);}else{if(_a5){this.addChild(_a5,_a2.getIndexInParent()+1);if(this._savedFocus){_a5.focus(true);}}else{this._removeAfter(_a2);this.scrollIntoView(_a2);}}}else{if(_a2){this._removeAfter(_a2);this.scrollIntoView(_a2);}}if(!evt||evt.type!="internal"){this._setValue(_a3);this.onItemClick(_a3,_a2,_a4);}this._visibleItem=_a3;},_getPaneForItem:function(_a8,_a9,_aa){var ret=this.getPaneForItem(_a8,_a9,_aa);ret.store=this.store;ret.parentWidget=this;ret.parentPane=_a9||null;if(!_a8){ret.query=this.query;ret.queryOptions=this.queryOptions;}else{if(_aa){ret.items=_aa;}else{ret.items=[_a8];}}return ret;},_getMenuItemForItem:function(_ac,_ad){var _ae=this.store;if(!_ac||!_ae||!_ae.isItem(_ac)){var i=new _5.MenuItem({label:_4.i18n.getLocalization("dojox.widget","RollingList",this.lang).empty,disabled:true,iconClass:"dojoxEmpty",focus:function(){}});this._updateClass(i.domNode,"Item");return i;}else{var _b0=_ae.isItemLoaded(_ac);var _b1=_b0?this.getChildItems(_ac):undefined;var _b2;if(_b1){_b2=this.getMenuItemForItem(_ac,_ad,_b1);_b2.children=_b1;this._updateClass(_b2.domNode,"Item",{"Expanding":true});if(!_b2._started){var c=_b2.connect(_b2,"startup",function(){this.disconnect(c);_4.style(this.arrowWrapper,"display","");});}else{_4.style(_b2.arrowWrapper,"display","");}}else{_b2=this.getMenuItemForItem(_ac,_ad,null);if(_b0){this._updateClass(_b2.domNode,"Item",{"Single":true});}else{this._updateClass(_b2.domNode,"Item",{"Unloaded":true});_b2.attr("disabled",true);}}_b2.store=this.store;_b2.item=_ac;if(!_b2.label){_b2.attr("label",this.store.getLabel(_ac).replace(/</,"&lt;"));}if(_b2.focusNode){var _b4=this;_b2.focus=function(){if(!this.disabled){try{this.focusNode.focus();}catch(e){}}};_b2.connect(_b2.focusNode,"onmouseenter",function(){if(!this.disabled){_b4._updateClass(this.domNode,"Item",{"Hover":true});}});_b2.connect(_b2.focusNode,"onmouseleave",function(){if(!this.disabled){_b4._updateClass(this.domNode,"Item",{"Hover":false});}});_b2.connect(_b2.focusNode,"blur",function(){_b4._updateClass(this.domNode,"Item",{"Focus":false,"Hover":false});});_b2.connect(_b2.focusNode,"focus",function(){_b4._updateClass(this.domNode,"Item",{"Focus":true});_b4._focusedPane=_ad;});if(this.executeOnDblClick){_b2.connect(_b2.focusNode,"ondblclick",function(){_b4._onExecute();});}}return _b2;}},_setStore:function(_b5){if(_b5===this.store&&this._started){return;}this.store=_b5;this._isIdentity=_b5.getFeatures()["dojo.data.api.Identity"];var _b6=this._getPaneForItem();this.addChild(_b6,0);},_onKey:function(e){if(e.charOrCode==_4.keys.BACKSPACE){_4.stopEvent(e);return;}else{if(e.charOrCode==_4.keys.ESCAPE&&this._savedFocus){try{_5.focus(this._savedFocus);}catch(e){}_4.stopEvent(e);return;}else{if(e.charOrCode==_4.keys.LEFT_ARROW||e.charOrCode==_4.keys.RIGHT_ARROW){_4.stopEvent(e);return;}}}},_resetValue:function(){this.attr("value",this._lastExecutedValue);},_onCancel:function(){this._resetValue();this.onCancel();},_onExecute:function(){this._lastExecutedValue=this.attr("value");this.onExecute();},focus:function(){var _b8=this._savedFocus;this._savedFocus=_5.getFocus(this);if(!this._savedFocus.node){delete this._savedFocus;}if(!this._focusedPane){var _b9=this.getChildren()[0];if(_b9&&!_b8){_b9.focus(true);}}else{this._savedFocus=_5.getFocus(this);var foc=this._focusedPane;delete this._focusedPane;if(!_b8){foc.focus(true);}}},handleKey:function(e){if(e.charOrCode==_4.keys.DOWN_ARROW){delete this._savedFocus;this.focus();return false;}else{if(e.charOrCode==_4.keys.ESCAPE){this._onCancel();return false;}}return true;},_updateChildClasses:function(){var _bc=this.getChildren();var _bd=_bc.length;_4.forEach(_bc,function(c,idx){_4.toggleClass(c.domNode,"dojoxRollingListPaneCurrentChild",(idx==(_bd-1)));_4.toggleClass(c.domNode,"dojoxRollingListPaneCurrentSelected",(idx==(_bd-2)));});},startup:function(){if(this._started){return;}if(!this.getParent||!this.getParent()){this.resize();this.connect(_4.global,"onresize","resize");}this.connect(this,"addChild","_updateChildClasses");this.connect(this,"removeChild","_updateChildClasses");this._setStore(this.store);this.attr("showButtons",this.showButtons);this.inherited(arguments);this._lastExecutedValue=this.attr("value");},getChildItems:function(_c0){var _c1,_c2=this.store;_4.forEach(this.childrenAttrs,function(_c3){var _c4=_c2.getValues(_c0,_c3);if(_c4&&_c4.length){_c1=(_c1||[]).concat(_c4);}});return _c1;},getMenuItemForItem:function(_c5,_c6,_c7){return new _5.MenuItem({});},getPaneForItem:function(_c8,_c9,_ca){if(!_c8||_ca){return new _6.widget._RollingListGroupPane({});}else{return null;}},onItemClick:function(_cb,_cc,_cd){},onExecute:function(){},onCancel:function(){},onChange:function(_ce){}});}}};});