/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.rpc.Rest"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.rpc.Rest"]){_4._hasResource["dojox.rpc.Rest"]=true;_4.provide("dojox.rpc.Rest");(function(){if(_6.rpc&&_6.rpc.transportRegistry){_6.rpc.transportRegistry.register("REST",function(_7){return _7=="REST";},{getExecutor:function(_8,_9,_a){return new _6.rpc.Rest(_9.name,(_9.contentType||_a._smd.contentType||"").match(/json|javascript/),null,function(id,_c){var _d=_a._getRequest(_9,[id]);_d.url=_d.target+(_d.data?"?"+_d.data:"");return _d;});}});}var _e;function _f(_10,_11,_12,id){_10.addCallback(function(_14){if(_12){_12=_10.ioArgs.xhr&&_10.ioArgs.xhr.getResponseHeader("Content-Range");_10.fullLength=_12&&(_12=_12.match(/\/(.*)/))&&parseInt(_12[1]);}return _14;});return _10;};_e=_6.rpc.Rest=function(_15,_16,_17,_18){var _19;_15=_15.match(/\/$/)?_15:(_15+"/");_19=function(id,_1b){return _e._get(_19,id,_1b);};_19.isJson=_16;_19._schema=_17;_19.cache={serialize:_16?((_6.json&&_6.json.ref)||_4).toJson:function(_1c){return _1c;}};_19._getRequest=_18||function(id,_1e){var _1f={url:_15+(_4.isObject(id)?"?"+_4.objectToQuery(id):id==null?"":id),handleAs:_16?"json":"text",contentType:_16?"application/json":"text/plain",sync:_6.rpc._sync,headers:{Accept:_16?"application/json,application/javascript":"*/*"}};if(_1e&&(_1e.start>=0||_1e.count>=0)){_1f.headers.Range="items="+(_1e.start||"0")+"-"+((_1e.count&&_1e.count!=Infinity&&(_1e.count+(_1e.start||0)-1))||"");}_6.rpc._sync=false;return _1f;};function _20(_21){_19[_21]=function(id,_23){return _e._change(_21,_19,id,_23);};};_20("put");_20("post");_20("delete");_19.servicePath=_15;return _19;};_e._index={};_e._timeStamps={};_e._change=function(_24,_25,id,_27){var _28=_25._getRequest(id);_28[_24+"Data"]=_27;return _f(_4.xhr(_24.toUpperCase(),_28,true),_25);};_e._get=function(_29,id,_2b){_2b=_2b||{};return _f(_4.xhrGet(_29._getRequest(id,_2b)),_29,(_2b.start>=0||_2b.count>=0),id);};})();}}};});