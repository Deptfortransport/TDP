/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.charting.plot2d.Bubble"],["require","dojox.charting.plot2d.Base"],["require","dojox.lang.functional"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.charting.plot2d.Bubble"]){_4._hasResource["dojox.charting.plot2d.Bubble"]=true;_4.provide("dojox.charting.plot2d.Bubble");_4.require("dojox.charting.plot2d.Base");_4.require("dojox.lang.functional");(function(){var df=_6.lang.functional,du=_6.lang.utils,dc=_6.charting.plot2d.common,_a=df.lambda("item.purgeGroup()");_4.declare("dojox.charting.plot2d.Bubble",_6.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y"},optionalParams:{},constructor:function(_b,_c){this.opt=_4.clone(this.defaultParams);du.updateWithObject(this.opt,_c);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;},calculateAxes:function(_d){this._calc(_d,dc.collectSimpleStats(this.series));return this;},render:function(_e,_f){this.dirty=this.isDirty();if(this.dirty){_4.forEach(this.series,_a);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(_11){_11.cleanGroup(s);});}var t=this.chart.theme,_13,_14,_15,_16,_17,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_1a=this.events();this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;continue;}if(typeof run.data[0]=="number"){console.warn("dojox.charting.plot2d.Bubble: the data in the following series cannot be rendered as a bubble chart; ",run);continue;}var s=run.group,_1d=_4.map(run.data,function(v,i){return {x:ht(v.x)+_f.l,y:_e.height-_f.b-vt(v.y),radius:this._vScaler.bounds.scale*(v.size/2)};},this);if(run.fill){_15=run.fill;}else{if(run.stroke){_15=run.stroke;}else{_15=run.dyn.color=new _4.Color(t.next("color"));}}run.dyn.fill=_15;_13=run.dyn.stroke=run.stroke?dc.makeStroke(run.stroke):dc.augmentStroke(t.series.stroke,_15);var _20=null,_21=null,_22=null;if(this.opt.shadows&&_13){var sh=this.opt.shadows,_17=new _4.Color([0,0,0,0.2]),_16=_4.clone(_14?_14:_13);_16.color=_17;_16.width+=sh.dw?sh.dw:0;run.dyn.shadow=_16;var _24=_4.map(_1d,function(_25){var sh=this.opt.shadows;return s.createCircle({cx:_25.x+sh.dx,cy:_25.y+sh.dy,r:_25.radius}).setStroke(_16).setFill(_17);},this);}if(run.outline||t.series.outline){_14=dc.makeStroke(run.outline?run.outline:t.series.outline);_14.width=2*_14.width+_13.width;run.dyn.outline=_14;_21=_4.map(_1d,function(_27){s.createCircle({cx:_27.x,cy:_27.y,r:_27.radius}).setStroke(_14);},this);}_20=_4.map(_1d,function(_28){return s.createCircle({cx:_28.x,cy:_28.y,r:_28.radius}).setStroke(_13).setFill(_15);},this);if(_1a){_4.forEach(_20,function(s,i){var o={element:"circle",index:i,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:s,outline:_21&&_21[i]||null,shadow:_22&&_22[i]||null,x:run.data[i].x,y:run.data[i].y,r:run.data[i].size/2,cx:_1d[i].x,cy:_1d[i].y,cr:_1d[i].radius};this._connectEvents(s,o);},this);}run.dirty=false;}this.dirty=false;return this;}});})();}}};});