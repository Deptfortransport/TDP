/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.io.windowName"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.io.windowName"]){_4._hasResource["dojox.io.windowName"]=true;_4.provide("dojox.io.windowName");_6.io.windowName={send:function(_7,_8){_8.url+=(_8.url.match(/\?/)?"&":"?")+"windowname="+(_8.authElement?"auth":true);var _9=_8.authElement;var _a=function(_b){try{var _c=_d.ioArgs.frame.contentWindow.document;_c.write(" ");_c.close();}catch(e){}(_9||_4.body()).removeChild(_d.ioArgs.outerFrame);return _b;};var _d=_4._ioSetArgs(_8,_a,_a,_a);if(_8.timeout){setTimeout(function(){if(_d.fired==-1){_d.callback(new Error("Timeout"));}},_8.timeout);}var _e=_6.io.windowName;if(_4.body()){_e._send(_d,_7,_9,_8.onAuthLoad);}else{_4.addOnLoad(function(){_e._send(_d,_7,_9,_8.onAuthLoad);});}return _d;},_send:function(_f,_10,_11,_12){var _13=_f.ioArgs;var _14=_6.io.windowName._frameNum++;var _15=(_4.config["dojoCallbackUrl"]||_4.moduleUrl("dojo","resources/blank.html"))+"#"+_14;var _16=new _4._Url(window.location,_15);var doc=_4.doc;var _18=_11||_4.body();function _19(_1a){_1a.style.width="100%";_1a.style.height="100%";_1a.style.border="0px";};if(_4.isMoz&&![].reduce){var _1b=doc.createElement("iframe");_19(_1b);if(!_11){_1b.style.display="none";}_18.appendChild(_1b);var _1c=_1b.contentWindow;doc=_1c.document;doc.write("<html><body margin='0px'><iframe style='width:100%;height:100%;border:0px' name='protectedFrame'></iframe></body></html>");doc.close();var _1d=_1c[0];_1c.__defineGetter__(0,function(){});_1c.__defineGetter__("protectedFrame",function(){});doc=_1d.document;doc.write("<html><body margin='0px'></body></html>");doc.close();_18=doc.body;}var _1e=_13.frame=_1e=doc.createElement(_4.isIE?"<iframe name=\""+_16+"\" onload=\"dojox.io.windowName["+_14+"]()\">":"iframe");_19(_1e);_13.outerFrame=_1b=_1b||_1e;if(!_11){_1b.style.display="none";}var _1f=0;function _20(){var _21=_1e.contentWindow.name;if(typeof _21=="string"){if(_21!=_16){_1f=2;_f.ioArgs.hash=_1e.contentWindow.location.hash;_f.callback(_21);}}};_6.io.windowName[_14]=_1e.onload=function(){try{if(!_4.isMoz&&_1e.contentWindow.location=="about:blank"){return;}}catch(e){}if(!_1f){_1f=1;if(_11){if(_12){_12();}}else{_1e.contentWindow.location=_15;}}try{if(_1f<2){_20();}}catch(e){}};_1e.name=_16;if(_10.match(/GET/i)){_4._ioAddQueryToUrl(_13);_1e.src=_13.url;_18.appendChild(_1e);if(_1e.contentWindow){_1e.contentWindow.location.replace(_13.url);}}else{if(_10.match(/POST/i)){_18.appendChild(_1e);var _22=_4.doc.createElement("form");_4.body().appendChild(_22);var _23=_4.queryToObject(_13.query);for(var i in _23){var _25=_23[i];_25=_25 instanceof Array?_25:[_25];for(var j=0;j<_25.length;j++){var _27=doc.createElement("input");_27.type="hidden";_27.name=i;_27.value=_25[j];_22.appendChild(_27);}}_22.method="POST";_22.action=_13.url;_22.target=_16;_22.submit();_22.parentNode.removeChild(_22);}else{throw new Error("Method "+_10+" not supported with the windowName transport");}}if(_1e.contentWindow){_1e.contentWindow.name=_16;}},_frameNum:0};}}};});