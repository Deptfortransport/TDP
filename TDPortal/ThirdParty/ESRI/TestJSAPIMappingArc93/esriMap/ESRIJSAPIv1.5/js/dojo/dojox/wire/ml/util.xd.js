/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.wire.ml.util"],["require","dojox.xml.parser"],["require","dojox.wire.Wire"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.wire.ml.util"]){_4._hasResource["dojox.wire.ml.util"]=true;_4.provide("dojox.wire.ml.util");_4.require("dojox.xml.parser");_4.require("dojox.wire.Wire");_6.wire.ml._getValue=function(_7,_8){if(!_7){return undefined;}var _9=undefined;if(_8&&_7.length>=9&&_7.substring(0,9)=="arguments"){_9=_7.substring(9);return new _6.wire.Wire({property:_9}).getValue(_8);}var i=_7.indexOf(".");if(i>=0){_9=_7.substring(i+1);_7=_7.substring(0,i);}var _b=(_5.byId(_7)||_4.byId(_7)||_4.getObject(_7));if(!_b){return undefined;}if(!_9){return _b;}else{return new _6.wire.Wire({object:_b,property:_9}).getValue();}};_6.wire.ml._setValue=function(_c,_d){if(!_c){return;}var i=_c.indexOf(".");if(i<0){return;}var _f=this._getValue(_c.substring(0,i));if(!_f){return;}var _10=_c.substring(i+1);var _11=new _6.wire.Wire({object:_f,property:_10}).setValue(_d);};_4.declare("dojox.wire.ml.XmlElement",null,{constructor:function(_12){if(_4.isString(_12)){_12=this._getDocument().createElement(_12);}this.element=_12;},getPropertyValue:function(_13){var _14=undefined;if(!this.element){return _14;}if(!_13){return _14;}if(_13.charAt(0)=="@"){var _15=_13.substring(1);_14=this.element.getAttribute(_15);}else{if(_13=="text()"){var _16=this.element.firstChild;if(_16){_14=_16.nodeValue;}}else{var _17=[];for(var i=0;i<this.element.childNodes.length;i++){var _19=this.element.childNodes[i];if(_19.nodeType===1&&_19.nodeName==_13){_17.push(new _6.wire.ml.XmlElement(_19));}}if(_17.length>0){if(_17.length===1){_14=_17[0];}else{_14=_17;}}}}return _14;},setPropertyValue:function(_1a,_1b){var i;var _1d;if(!this.element){return;}if(!_1a){return;}if(_1a.charAt(0)=="@"){var _1e=_1a.substring(1);if(_1b){this.element.setAttribute(_1e,_1b);}else{this.element.removeAttribute(_1e);}}else{if(_1a=="text()"){while(this.element.firstChild){this.element.removeChild(this.element.firstChild);}if(_1b){_1d=this._getDocument().createTextNode(_1b);this.element.appendChild(_1d);}}else{var _1f=null;var _20;for(i=this.element.childNodes.length-1;i>=0;i--){_20=this.element.childNodes[i];if(_20.nodeType===1&&_20.nodeName==_1a){if(!_1f){_1f=_20.nextSibling;}this.element.removeChild(_20);}}if(_1b){if(_4.isArray(_1b)){for(i in _1b){var e=_1b[i];if(e.element){this.element.insertBefore(e.element,_1f);}}}else{if(_1b instanceof _6.wire.ml.XmlElement){if(_1b.element){this.element.insertBefore(_1b.element,_1f);}}else{_20=this._getDocument().createElement(_1a);_1d=this._getDocument().createTextNode(_1b);_20.appendChild(_1d);this.element.insertBefore(_20,_1f);}}}}}},toString:function(){var s="";if(this.element){var _23=this.element.firstChild;if(_23){s=_23.nodeValue;}}return s;},toObject:function(){if(!this.element){return null;}var _24="";var obj={};var _26=0;var i;for(i=0;i<this.element.childNodes.length;i++){var _28=this.element.childNodes[i];if(_28.nodeType===1){_26++;var o=new _6.wire.ml.XmlElement(_28).toObject();var _2a=_28.nodeName;var p=obj[_2a];if(!p){obj[_2a]=o;}else{if(_4.isArray(p)){p.push(o);}else{obj[_2a]=[p,o];}}}else{if(_28.nodeType===3||_28.nodeType===4){_24+=_28.nodeValue;}}}var _2c=0;if(this.element.nodeType===1){_2c=this.element.attributes.length;for(i=0;i<_2c;i++){var _2d=this.element.attributes[i];obj["@"+_2d.nodeName]=_2d.nodeValue;}}if(_26===0){if(_2c===0){return _24;}obj["text()"]=_24;}return obj;},_getDocument:function(){if(this.element){return (this.element.nodeType==9?this.element:this.element.ownerDocument);}else{return _6.xml.parser.parse();}}});}}};});