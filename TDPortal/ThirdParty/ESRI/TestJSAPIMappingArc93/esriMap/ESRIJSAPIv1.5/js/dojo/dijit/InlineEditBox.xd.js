/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit.InlineEditBox"],["require","dojo.i18n"],["require","dijit._Widget"],["require","dijit._Container"],["require","dijit.form.Button"],["require","dijit.form.TextBox"],["requireLocalization","dijit","common",null,"ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,ko,nb,nl,pl,pt,pt-pt,ru,sk,sl,sv,th,tr,zh,zh-tw","ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,ko,nb,nl,pl,pt,pt-pt,ru,sk,sl,sv,th,tr,zh,zh-tw"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit.InlineEditBox"]){_4._hasResource["dijit.InlineEditBox"]=true;_4.provide("dijit.InlineEditBox");_4.require("dojo.i18n");_4.require("dijit._Widget");_4.require("dijit._Container");_4.require("dijit.form.Button");_4.require("dijit.form.TextBox");_4.declare("dijit.InlineEditBox",_5._Widget,{editing:false,autoSave:true,buttonSave:"",buttonCancel:"",renderAsHtml:false,editor:"dijit.form.TextBox",editorParams:{},onChange:function(_7){},onCancel:function(){},width:"100%",value:"",noValueIndicator:"<span style='font-family: wingdings; text-decoration: underline;'>&nbsp;&nbsp;&nbsp;&nbsp;&#x270d;&nbsp;&nbsp;&nbsp;&nbsp;</span>",constructor:function(){this.editorParams={};},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;var _8={ondijitclick:"_onClick",onmouseover:"_onMouseOver",onmouseout:"_onMouseOut",onfocus:"_onMouseOver",onblur:"_onMouseOut"};for(var _9 in _8){this.connect(this.displayNode,_9,_8[_9]);}_5.setWaiRole(this.displayNode,"button");if(!this.displayNode.getAttribute("tabIndex")){this.displayNode.setAttribute("tabIndex",0);}this.attr("value",this.value||this.displayNode.innerHTML);},setDisabled:function(_a){_4.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use attr('disabled', bool) instead.","","2.0");this.attr("disabled",_a);},_setDisabledAttr:function(_b){this.disabled=_b;_5.setWaiState(this.domNode,"disabled",_b);},_onMouseOver:function(){_4.addClass(this.displayNode,this.disabled?"dijitDisabledClickableRegion":"dijitClickableRegion");},_onMouseOut:function(){_4.removeClass(this.displayNode,this.disabled?"dijitDisabledClickableRegion":"dijitClickableRegion");},_onClick:function(e){if(this.disabled){return;}if(e){_4.stopEvent(e);}this._onMouseOut();setTimeout(_4.hitch(this,"edit"),0);},edit:function(){if(this.disabled||this.editing){return;}this.editing=true;var _d=(this.renderAsHtml?this.value:this.value.replace(/\s*\r?\n\s*/g,"").replace(/<br\/?>/gi,"\n").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/&quot;/g,"\""));var _e=_4.create("span",null,this.domNode,"before");var ew=this.editWidget=new _5._InlineEditor({value:_4.trim(_d),autoSave:this.autoSave,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,renderAsHtml:this.renderAsHtml,editor:this.editor,editorParams:this.editorParams,sourceStyle:_4.getComputedStyle(this.displayNode),save:_4.hitch(this,"save"),cancel:_4.hitch(this,"cancel"),width:this.width},_e);var ews=ew.domNode.style;this.displayNode.style.display="none";ews.position="static";ews.visibility="visible";this.domNode=ew.domNode;setTimeout(function(){ew.focus();ew._resetValue=ew.getValue();},100);},_showText:function(_11){this.displayNode.style.display="";var ew=this.editWidget;var ews=ew.domNode.style;ews.position="absolute";ews.visibility="hidden";this.domNode=this.displayNode;if(_11){_5.focus(this.displayNode);}ews.display="none";setTimeout(function(){ew.destroy();delete ew;if(_4.isIE){_5.focus(_5.getFocus());}},1000);},save:function(_14){if(this.disabled||!this.editing){return;}this.editing=false;var _15=this.editWidget.getValue()+"";this.attr("value",this.renderAsHtml?_15:_15.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/\n/g,"<br>"));this.onChange(_15);this._showText(_14);},setValue:function(val){_4.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use attr('value', ...) instead.","","2.0");return this.attr("value",val);},_setValueAttr:function(val){this.value=val;this.displayNode.innerHTML=_4.trim(val)||this.noValueIndicator;},getValue:function(){_4.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use attr('value') instead.","","2.0");return this.attr("value");},cancel:function(_18){this.editing=false;this.onCancel();this._showText(_18);}});_4.declare("dijit._InlineEditor",[_5._Widget,_5._Templated],{templateString:"<span dojoAttachPoint=\"editNode\" waiRole=\"presentation\" style=\"position: absolute; visibility:hidden\" class=\"dijitReset dijitInline\"\r\n\tdojoAttachEvent=\"onkeypress: _onKeyPress\" \r\n\t><span dojoAttachPoint=\"editorPlaceholder\"></span\r\n\t><span dojoAttachPoint=\"buttonContainer\"\r\n\t\t><button class='saveButton' dojoAttachPoint=\"saveButton\" dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:save\" disabled=\"true\" label=\"${buttonSave}\"></button\r\n\t\t><button class='cancelButton' dojoAttachPoint=\"cancelButton\" dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:cancel\" label=\"${buttonCancel}\"></button\r\n\t></span\r\n></span>\r\n",widgetsInTemplate:true,postMixInProperties:function(){this.inherited(arguments);this.messages=_4.i18n.getLocalization("dijit","common",this.lang);_4.forEach(["buttonSave","buttonCancel"],function(_19){if(!this[_19]){this[_19]=this.messages[_19];}},this);},postCreate:function(){var cls=_4.getObject(this.editor);var _1b=this.sourceStyle;var _1c="line-height:"+_1b.lineHeight+";";_4.forEach(["Weight","Family","Size","Style"],function(_1d){_1c+="font-"+_1d+":"+_1b["font"+_1d]+";";},this);_4.forEach(["marginTop","marginBottom","marginLeft","marginRight"],function(_1e){this.domNode.style[_1e]=_1b[_1e];},this);if(this.width=="100%"){_1c+="width:100%;";this.domNode.style.display="block";}else{_1c+="width:"+(this.width+(Number(this.width)==this.width?"px":""))+";";}this.editorParams.style=_1c;this.editorParams["displayedValue" in cls.prototype?"displayedValue":"value"]=this.value;var ew=this.editWidget=new cls(this.editorParams,this.editorPlaceholder);this.connect(ew,"onChange","_onChange");this.connect(ew,"onKeyPress","_onKeyPress");this.connect(ew,"onKeyUp","_onKeyPress");if(this.autoSave){this.buttonContainer.style.display="none";}},destroy:function(){this.editWidget.destroy();this.inherited(arguments);},getValue:function(){var ew=this.editWidget;return ew.attr("displayedValue" in ew?"displayedValue":"value");},_onKeyPress:function(e){if(this._exitInProgress){return;}if(this.autoSave){if(e.altKey||e.ctrlKey){return;}if(e.charOrCode==_4.keys.ESCAPE){_4.stopEvent(e);this._exitInProgress=true;this.cancel(true);}else{if(e.charOrCode==_4.keys.ENTER&&this.editWidget.focusNode.tagName=="INPUT"){_4.stopEvent(e);this._exitInProgress=true;this.save(true);}else{if(e.charOrCode===_4.keys.TAB){this._exitInProgress=true;setTimeout(_4.hitch(this,"save",false),0);}}}}else{var _22=this;setTimeout(function(){_22._onChange();},100);}},_onBlur:function(){this.inherited(arguments);if(this._exitInProgress){return;}if(this.autoSave){this._exitInProgress=true;if(this.getValue()==this._resetValue){this.cancel(false);}else{this.save(false);}}},_onChange:function(){if(this._exitInProgress){return;}if(this.autoSave){this._exitInProgress=true;this.save(true);}else{this.saveButton.attr("disabled",(this.getValue()==this._resetValue)||!this.enableSave());}},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():true;},focus:function(){this.editWidget.focus();_5.selectInputText(this.editWidget.focusNode);}});}}};});