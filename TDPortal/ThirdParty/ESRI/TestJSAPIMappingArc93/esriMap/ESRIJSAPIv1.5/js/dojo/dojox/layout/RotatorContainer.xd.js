/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.layout.RotatorContainer"],["require","dojo.fx"],["require","dijit.layout.StackContainer"],["require","dijit.layout.StackController"],["require","dijit._Widget"],["require","dijit._Templated"],["require","dijit._Contained"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.layout.RotatorContainer"]){_4._hasResource["dojox.layout.RotatorContainer"]=true;_4.provide("dojox.layout.RotatorContainer");_4.require("dojo.fx");_4.require("dijit.layout.StackContainer");_4.require("dijit.layout.StackController");_4.require("dijit._Widget");_4.require("dijit._Templated");_4.require("dijit._Contained");_4.declare("dojox.layout.RotatorContainer",[_5.layout.StackContainer,_5._Templated],{templateString:"<div class=\"dojoxRotatorContainer\"><div dojoAttachPoint=\"tabNode\"></div><div class=\"dojoxRotatorPager\" dojoAttachPoint=\"pagerNode\"></div><div class=\"dojoxRotatorContent\" dojoAttachPoint=\"containerNode\"></div></div>",showTabs:true,transitionDelay:5000,transition:"fade",transitionDuration:1000,autoStart:true,suspendOnHover:false,pauseOnManualChange:null,reverse:false,pagerId:"",cycles:-1,_timer:null,_over:false,_playing:false,pagerClass:"dojox.layout.RotatorPager",postCreate:function(){this.inherited(arguments);_4.style(this.domNode,"position","relative");if(this.cycles-0==this.cycles&&this.cycles!=-1){this.cycles++;}else{this.cycles=-1;}if(this.pauseOnManualChange===null){this.pauseOnManualChange=!this.suspendOnHover;}var id=this.id||"rotator"+(new Date()).getTime();var sc=new _5.layout.StackController({containerId:id},this.tabNode);this.tabNode=sc.domNode;this._stackController=sc;_4.style(this.tabNode,"display",this.showTabs?"":"none");this.connect(sc,"onButtonClick","_manualChange");this._subscriptions=[_4.subscribe(this.id+"-cycle",this,"_cycle"),_4.subscribe(this.id+"-state",this,"_state")];var d=Math.round(this.transitionDelay*0.75);if(d<this.transitionDuration){this.transitionDuration=d;}if(this.suspendOnHover){this.connect(this.domNode,"onmouseover","_onMouseOver");this.connect(this.domNode,"onmouseout","_onMouseOut");}},startup:function(){if(this._started){return;}var c=this.getChildren();for(var i=0,_c=c.length;i<_c;i++){if(c[i].declaredClass==this.pagerClass){this.pagerNode.appendChild(c[i].domNode);break;}}this.inherited(arguments);if(this.autoStart){setTimeout(_4.hitch(this,"_play"),10);}else{this._updatePager();}},destroy:function(){_4.forEach(this._subscriptions,_4.unsubscribe);this.inherited(arguments);},setAttribute:function(_d,_e){this.inherited(arguments);switch(_d){case "showTabs":this.showTabs=_e;_4.style(this.tabNode,"display",_e?"":"none");break;case "transitionDelay":case "transitionDuration":case "suspendOnHover":case "pauseOnManualChange":case "reverse":this[_d]=_e;}},_updatePager:function(){var c=this.getChildren();_4.publish(this.id+"-update",[this._playing,_4.indexOf(c,this.selectedChildWidget)+1,c.length]);},_onMouseOver:function(){this._resetTimer();this._over=true;},_onMouseOut:function(){this._over=false;if(this._playing){clearTimeout(this._timer);this._timer=setTimeout(_4.hitch(this,"_play",true),200);}},_resetTimer:function(){clearTimeout(this._timer);this._timer=null;},_cycle:function(_10){if(_10 instanceof Boolean||typeof _10=="boolean"){this._manualChange();}var c=this.getChildren();var len=c.length;var i=_4.indexOf(c,this.selectedChildWidget)+(_10===false||(_10!==true&&this.reverse)?-1:1);this.selectChild(c[(i<len?(i<0?len-1:i):0)]);this._updatePager();},_manualChange:function(){if(this.pauseOnManualChange){this._playing=false;}this.cycles=-1;},_play:function(_14){this._playing=true;this._resetTimer();if(_14!==true&&this.cycles>0){this.cycles--;}if(this.cycles==0){this._pause();}else{if((!this.suspendOnHover||!this._over)&&this.transitionDelay){this._timer=setTimeout(_4.hitch(this,"_cycle"),this.selectedChildWidget.domNode.getAttribute("transitionDelay")||this.transitionDelay);}}this._updatePager();},_pause:function(){this._playing=false;this._resetTimer();},_state:function(_15){if(_15){this.cycles=-1;this._play();}else{this._pause();}},_transition:function(_16,_17){this._resetTimer();if(_17&&this.transitionDuration){switch(this.transition){case "fade":this._fade(_16,_17);return;}}this._transitionEnd();this.inherited(arguments);},_transitionEnd:function(){if(this._playing){this._play();}else{this._updatePager();}},_fade:function(_18,_19){this._styleNode(_19.domNode,1,1);this._styleNode(_18.domNode,0,2);this._showChild(_18);if(this.doLayout&&_18.resize){_18.resize(this._containerContentBox||this._contentBox);}var _1a={duration:this.transitionDuration};var _1b=_4.fx.combine([_4["fadeOut"](_4.mixin({node:_19.domNode},_1a)),_4["fadeIn"](_4.mixin({node:_18.domNode},_1a))]);this.connect(_1b,"onEnd",_4.hitch(this,function(){this._hideChild(_19);this._transitionEnd();}));_1b.play();},_styleNode:function(_1c,_1d,_1e){console.log(arguments);_4.style(_1c,"opacity",_1d);_4.style(_1c,"zIndex",_1e);_4.style(_1c,"position","absolute");}});_4.declare("dojox.layout.RotatorPager",[_5._Widget,_5._Templated,_5._Contained],{widgetsInTemplate:true,rotatorId:"",postMixInProperties:function(){this.templateString="<div>"+this.srcNodeRef.innerHTML+"</div>";},postCreate:function(){var p=_5.byId(this.rotatorId)||this.getParent();if(p&&p.declaredClass=="dojox.layout.RotatorContainer"){if(this.previous){_4.connect(this.previous,"onClick",function(){_4.publish(p.id+"-cycle",[false]);});}if(this.next){_4.connect(this.next,"onClick",function(){_4.publish(p.id+"-cycle",[true]);});}if(this.playPause){_4.connect(this.playPause,"onClick",function(){this.attr("label",this.checked?"Pause":"Play");_4.publish(p.id+"-state",[this.checked]);});}this._subscriptions=[_4.subscribe(p.id+"-state",this,"_state"),_4.subscribe(p.id+"-update",this,"_update")];}},destroy:function(){_4.forEach(this._subscriptions,_4.unsubscribe);this.inherited(arguments);},_state:function(_20){if(this.playPause&&this.playPause.checked!=_20){this.playPause.attr("label",_20?"Pause":"Play");this.playPause.setAttribute("checked",_20);}},_update:function(_21,_22,_23){this._state(_21);if(this.current&&_22){this.current.innerHTML=_22;}if(this.total&&_23){this.total.innerHTML=_23;}}});}}};});