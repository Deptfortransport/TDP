/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.xmpp.util"],["require","dojox.string.Builder"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.xmpp.util"]){_4._hasResource["dojox.xmpp.util"]=true;_4.provide("dojox.xmpp.util");_4.require("dojox.string.Builder");_6.xmpp.util.xmlEncode=function(_7){if(_7){_7=_7.replace("&","&amp;").replace(">","&gt;").replace("<","&lt;").replace("'","&apos;").replace("\"","&quot;");}return _7;};_6.xmpp.util.encodeJid=function(_8){var _9=new _6.string.Builder();for(var i=0;i<_8.length;i++){var ch=_8.charAt(i);var _c=ch;switch(ch){case " ":_c="\\20";break;case "\"":_c="\\22";break;case "#":_c="\\23";break;case "&":_c="\\26";break;case "'":_c="\\27";break;case "/":_c="\\2f";break;case ":":_c="\\3a";break;case "<":_c="\\3c";break;case ">":_c="\\3e";break;}_9.append(_c);}return _9.toString();};_6.xmpp.util.decodeJid=function(_d){_d=_d.replace(/\\([23][02367acef])/g,function(_e){switch(_e){case "\\20":return " ";case "\\22":return "\"";case "\\23":return "#";case "\\26":return "&";case "\\27":return "'";case "\\2f":return "/";case "\\3a":return ":";case "\\3c":return "<";case "\\3e":return ">";}return "ARG";});return _d;};_6.xmpp.util.createElement=function(_f,_10,_11){var _12=new _6.string.Builder("<");_12.append(_f+" ");for(var _13 in _10){_12.append(_13+"=\"");_12.append(_10[_13]);_12.append("\" ");}if(_11){_12.append("/>");}else{_12.append(">");}return _12.toString();};_6.xmpp.util.stripHtml=function(str){var re=/<[^>]*?>/gi;for(var i=0;i<arguments.length;i++){}return str.replace(re,"");};_6.xmpp.util.decodeHtmlEntities=function(str){var ta=_4.doc.createElement("textarea");ta.innerHTML=str.replace(/</g,"&lt;").replace(/>/g,"&gt;");return ta.value;};_6.xmpp.util.htmlToPlain=function(str){str=_6.xmpp.util.decodeHtmlEntities(str);str=str.replace(/<br\s*[i\/]{0,1}>/gi,"\n");str=_6.xmpp.util.stripHtml(str);return str;};_6.xmpp.util.Base64={};_6.xmpp.util.Base64.keylist="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";_6.xmpp.util.Base64.encode=function(_1a){var _1b="";var c1,c2,c3;var _1f,_20,_21,_22;var i=0;do{c1=c2=c3="";_1f=_20=_21=_22="";c1=_1a.charCodeAt(i++);c2=_1a.charCodeAt(i++);c3=_1a.charCodeAt(i++);_1f=c1>>2;_20=((c1&3)<<4)|(c2>>4);_21=((c2&15)<<2)|(c3>>6);_22=c3&63;if(isNaN(c2)){_21=_22=64;}else{if(isNaN(c3)){_22=64;}}_1b=_1b+_6.xmpp.util.Base64.keylist.charAt(_1f)+_6.xmpp.util.Base64.keylist.charAt(_20)+_6.xmpp.util.Base64.keylist.charAt(_21)+_6.xmpp.util.Base64.keylist.charAt(_22);}while(i<_1a.length);return _1b;};_6.xmpp.util.Base64.decode=function(_24){var _25="";var c1,c2,c3;var _29,_2a,_2b,_2c="";var i=0;do{c1=c2=c3="";_29=_2a=_2b=_2c="";_29=_6.xmpp.util.Base64.keylist.indexOf(_24.charAt(i++));_2a=_6.xmpp.util.Base64.keylist.indexOf(_24.charAt(i++));_2b=_6.xmpp.util.Base64.keylist.indexOf(_24.charAt(i++));_2c=_6.xmpp.util.Base64.keylist.indexOf(_24.charAt(i++));c1=(_29<<2)|(_2a>>4);c2=((_2a&15)<<4)|(_2b>>2);c3=((_2b&3)<<6)|_2c;_25=_25+String.fromCharCode(c1);if(_2b!=64){_25=_25+String.fromCharCode(c2);}if(_2c!=64){_25=_25+String.fromCharCode(c3);}}while(i<_24.length);return _25;};}}};});