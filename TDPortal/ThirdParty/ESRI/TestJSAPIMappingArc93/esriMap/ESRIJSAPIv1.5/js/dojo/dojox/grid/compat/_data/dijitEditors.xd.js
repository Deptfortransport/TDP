/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.grid.compat._data.dijitEditors"],["require","dojox.grid.compat._data.editors"],["require","dijit.form.DateTextBox"],["require","dijit.form.TimeTextBox"],["require","dijit.form.ComboBox"],["require","dojo.data.ItemFileReadStore"],["require","dijit.form.CheckBox"],["require","dijit.form.TextBox"],["require","dijit.form.NumberSpinner"],["require","dijit.form.NumberTextBox"],["require","dijit.form.CurrencyTextBox"],["require","dijit.form.Slider"],["require","dijit.Editor"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.grid.compat._data.dijitEditors"]){_4._hasResource["dojox.grid.compat._data.dijitEditors"]=true;_4.provide("dojox.grid.compat._data.dijitEditors");_4.require("dojox.grid.compat._data.editors");_4.require("dijit.form.DateTextBox");_4.require("dijit.form.TimeTextBox");_4.require("dijit.form.ComboBox");_4.require("dojo.data.ItemFileReadStore");_4.require("dijit.form.CheckBox");_4.require("dijit.form.TextBox");_4.require("dijit.form.NumberSpinner");_4.require("dijit.form.NumberTextBox");_4.require("dijit.form.CurrencyTextBox");_4.require("dijit.form.Slider");_4.require("dijit.Editor");_4.declare("dojox.grid.editors.Dijit",_6.grid.editors.base,{editorClass:"dijit.form.TextBox",constructor:function(_7){this.editor=null;this.editorClass=_4.getObject(this.cell.editorClass||this.editorClass);},format:function(_8,_9){this.needFormatNode(_8,_9);return "<div></div>";},getValue:function(_a){return this.editor.getValue();},setValue:function(_b,_c){if(this.editor&&this.editor.setValue){if(this.editor.onLoadDeferred){var _d=this;this.editor.onLoadDeferred.addCallback(function(){_d.editor.setValue(_c==null?"":_c);});}else{this.editor.setValue(_c);}}else{this.inherited(arguments);}},getEditorProps:function(_e){return _4.mixin({},this.cell.editorProps||{},{constraints:_4.mixin({},this.cell.constraint)||{},value:_e});},createEditor:function(_f,_10,_11){return new this.editorClass(this.getEditorProps(_10),_f);},attachEditor:function(_12,_13,_14){_12.appendChild(this.editor.domNode);this.setValue(_14,_13);},formatNode:function(_15,_16,_17){if(!this.editorClass){return _16;}if(!this.editor){this.editor=this.createEditor.apply(this,arguments);}else{this.attachEditor.apply(this,arguments);}this.sizeEditor.apply(this,arguments);this.cell.grid.rowHeightChanged(_17);this.focus();},sizeEditor:function(_18,_19,_1a){var p=this.cell.getNode(_1a),box=_4.contentBox(p);_4.marginBox(this.editor.domNode,{w:box.w});},focus:function(_1d,_1e){if(this.editor){setTimeout(_4.hitch(this.editor,function(){_6.grid.fire(this,"focus");}),0);}},_finish:function(_1f){this.inherited(arguments);_6.grid.removeNode(this.editor.domNode);}});_4.declare("dojox.grid.editors.ComboBox",_6.grid.editors.Dijit,{editorClass:"dijit.form.ComboBox",getEditorProps:function(_20){var _21=[];_4.forEach(this.cell.options,function(o){_21.push({name:o,value:o});});var _23=new _4.data.ItemFileReadStore({data:{identifier:"name",items:_21}});return _4.mixin({},this.cell.editorProps||{},{value:_20,store:_23});},getValue:function(){var e=this.editor;e.setDisplayedValue(e.getDisplayedValue());return e.getValue();}});_4.declare("dojox.grid.editors.DateTextBox",_6.grid.editors.Dijit,{editorClass:"dijit.form.DateTextBox",setValue:function(_25,_26){if(this.editor){this.editor.setValue(new Date(_26));}else{this.inherited(arguments);}},getEditorProps:function(_27){return _4.mixin(this.inherited(arguments),{value:new Date(_27)});}});_4.declare("dojox.grid.editors.CheckBox",_6.grid.editors.Dijit,{editorClass:"dijit.form.CheckBox",getValue:function(){return this.editor.checked;},setValue:function(_28,_29){if(this.editor&&this.editor.setAttribute){this.editor.setAttribute("checked",_29);}else{this.inherited(arguments);}},sizeEditor:function(_2a,_2b,_2c){return;}});_4.declare("dojox.grid.editors.Editor",_6.grid.editors.Dijit,{editorClass:"dijit.Editor",getEditorProps:function(_2d){return _4.mixin({},this.cell.editorProps||{},{height:this.cell.editorHeight||"100px"});},createEditor:function(_2e,_2f,_30){var _31=new this.editorClass(this.getEditorProps(_2f),_2e);_4.connect(_31,"onLoad",_4.hitch(this,"populateEditor"));return _31;},formatNode:function(_32,_33,_34){this.content=_33;this.inherited(arguments);if(_4.isMoz){var e=this.editor;e.open();if(this.cell.editorToolbar){_4.place(e.toolbar.domNode,e.editingArea,"before");}}},populateEditor:function(){this.editor.setValue(this.content);this.editor.placeCursorAtEnd();}});}}};});