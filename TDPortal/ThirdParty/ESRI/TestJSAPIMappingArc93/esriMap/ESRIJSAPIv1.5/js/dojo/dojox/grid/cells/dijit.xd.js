/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.grid.cells.dijit"],["require","dojox.grid.cells"],["require","dijit.form.DateTextBox"],["require","dijit.form.TimeTextBox"],["require","dijit.form.ComboBox"],["require","dojo.data.ItemFileReadStore"],["require","dijit.form.CheckBox"],["require","dijit.form.TextBox"],["require","dijit.form.NumberSpinner"],["require","dijit.form.NumberTextBox"],["require","dijit.form.CurrencyTextBox"],["require","dijit.form.HorizontalSlider"],["require","dijit.Editor"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.grid.cells.dijit"]){_4._hasResource["dojox.grid.cells.dijit"]=true;_4.provide("dojox.grid.cells.dijit");_4.require("dojox.grid.cells");_4.require("dijit.form.DateTextBox");_4.require("dijit.form.TimeTextBox");_4.require("dijit.form.ComboBox");_4.require("dojo.data.ItemFileReadStore");_4.require("dijit.form.CheckBox");_4.require("dijit.form.TextBox");_4.require("dijit.form.NumberSpinner");_4.require("dijit.form.NumberTextBox");_4.require("dijit.form.CurrencyTextBox");_4.require("dijit.form.HorizontalSlider");_4.require("dijit.Editor");(function(){var _7=_6.grid.cells;_4.declare("dojox.grid.cells._Widget",_7._Base,{widgetClass:_5.form.TextBox,constructor:function(_8){this.widget=null;if(typeof this.widgetClass=="string"){_4.deprecated("Passing a string to widgetClass is deprecated","pass the widget class object instead","2.0");this.widgetClass=_4.getObject(this.widgetClass);}},formatEditing:function(_9,_a){this.needFormatNode(_9,_a);return "<div></div>";},getValue:function(_b){return this.widget.attr("value");},setValue:function(_c,_d){if(this.widget&&this.widget.attr){if(this.widget.onLoadDeferred){var _e=this;this.widget.onLoadDeferred.addCallback(function(){_e.widget.attr("value",_d==null?"":_d);});}else{this.widget.attr("value",_d);}}else{this.inherited(arguments);}},getWidgetProps:function(_f){return _4.mixin({},this.widgetProps||{},{constraints:_4.mixin({},this.constraint)||{},value:_f});},createWidget:function(_10,_11,_12){return new this.widgetClass(this.getWidgetProps(_11),_10);},attachWidget:function(_13,_14,_15){_13.appendChild(this.widget.domNode);this.setValue(_15,_14);},formatNode:function(_16,_17,_18){if(!this.widgetClass){return _17;}if(!this.widget){this.widget=this.createWidget.apply(this,arguments);}else{this.attachWidget.apply(this,arguments);}this.sizeWidget.apply(this,arguments);this.grid.rowHeightChanged(_18);this.focus();},sizeWidget:function(_19,_1a,_1b){var p=this.getNode(_1b),box=_4.contentBox(p);_4.marginBox(this.widget.domNode,{w:box.w});},focus:function(_1e,_1f){if(this.widget){setTimeout(_4.hitch(this.widget,function(){_6.grid.util.fire(this,"focus");}),0);}},_finish:function(_20){this.inherited(arguments);_6.grid.util.removeNode(this.widget.domNode);}});_7._Widget.markupFactory=function(_21,_22){_7._Base.markupFactory(_21,_22);var d=_4;var _24=d.trim(d.attr(_21,"widgetProps")||"");var _25=d.trim(d.attr(_21,"constraint")||"");var _26=d.trim(d.attr(_21,"widgetClass")||"");if(_24){_22.widgetProps=d.fromJson(_24);}if(_25){_22.constraint=d.fromJson(_25);}if(_26){_22.widgetClass=d.getObject(_26);}};_4.declare("dojox.grid.cells.ComboBox",_7._Widget,{widgetClass:_5.form.ComboBox,getWidgetProps:function(_27){var _28=[];_4.forEach(this.options,function(o){_28.push({name:o,value:o});});var _2a=new _4.data.ItemFileReadStore({data:{identifier:"name",items:_28}});return _4.mixin({},this.widgetProps||{},{value:_27,store:_2a});},getValue:function(){var e=this.widget;e.attr("displayedValue",e.attr("displayedValue"));return e.attr("value");}});_7.ComboBox.markupFactory=function(_2c,_2d){_7._Widget.markupFactory(_2c,_2d);var d=_4;var _2f=d.trim(d.attr(_2c,"options")||"");if(_2f){var o=_2f.split(",");if(o[0]!=_2f){_2d.options=o;}}};_4.declare("dojox.grid.cells.DateTextBox",_7._Widget,{widgetClass:_5.form.DateTextBox,setValue:function(_31,_32){if(this.widget){this.widget.attr("value",new Date(_32));}else{this.inherited(arguments);}},getWidgetProps:function(_33){return _4.mixin(this.inherited(arguments),{value:new Date(_33)});}});_7.DateTextBox.markupFactory=function(_34,_35){_7._Widget.markupFactory(_34,_35);};_4.declare("dojox.grid.cells.CheckBox",_7._Widget,{widgetClass:_5.form.CheckBox,getValue:function(){return this.widget.checked;},setValue:function(_36,_37){if(this.widget&&this.widget.attributeMap.checked){this.widget.attr("checked",_37);}else{this.inherited(arguments);}},sizeWidget:function(_38,_39,_3a){return;}});_7.CheckBox.markupFactory=function(_3b,_3c){_7._Widget.markupFactory(_3b,_3c);};_4.declare("dojox.grid.cells.Editor",_7._Widget,{widgetClass:_5.Editor,getWidgetProps:function(_3d){return _4.mixin({},this.widgetProps||{},{height:this.widgetHeight||"100px"});},createWidget:function(_3e,_3f,_40){var _41=new this.widgetClass(this.getWidgetProps(_3f),_3e);_4.connect(_41,"onLoad",_4.hitch(this,"populateEditor"));return _41;},formatNode:function(_42,_43,_44){this.content=_43;this.inherited(arguments);if(_4.isMoz){var e=this.widget;e.open();if(this.widgetToolbar){_4.place(e.toolbar.domNode,e.editingArea,"before");}}},populateEditor:function(){this.widget.attr("value",this.content);this.widget.placeCursorAtEnd();}});_7.Editor.markupFactory=function(_46,_47){_7._Widget.markupFactory(_46,_47);var d=_4;var h=_4.trim(_4.attr(_46,"widgetHeight")||"");if(h){if((h!="auto")&&(h.substr(-2)!="em")){h=parseInt(h)+"px";}_47.widgetHeight=h;}};})();}}};});