/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit.form._DateTimeTextBox"],["require","dojo.date"],["require","dojo.date.locale"],["require","dojo.date.stamp"],["require","dijit.form.ValidationTextBox"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit.form._DateTimeTextBox"]){_4._hasResource["dijit.form._DateTimeTextBox"]=true;_4.provide("dijit.form._DateTimeTextBox");_4.require("dojo.date");_4.require("dojo.date.locale");_4.require("dojo.date.stamp");_4.require("dijit.form.ValidationTextBox");_4.declare("dijit.form._DateTimeTextBox",_5.form.RangeBoundTextBox,{regExpGen:_4.date.locale.regexp,compare:_4.date.compare,format:function(_7,_8){if(!_7){return "";}return _4.date.locale.format(_7,_8);},parse:function(_9,_a){return _4.date.locale.parse(_9,_a)||(this._isEmpty(_9)?null:undefined);},serialize:_4.date.stamp.toISOString,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",postMixInProperties:function(){this.inherited(arguments);if(!this.value||this.value.toString()==_5.form._DateTimeTextBox.prototype.value.toString()){this.value=null;}var _b=this.constraints;_b.selector=this._selector;_b.fullYear=true;var _c=_4.date.stamp.fromISOString;if(typeof _b.min=="string"){_b.min=_c(_b.min);}if(typeof _b.max=="string"){_b.max=_c(_b.max);}},_onFocus:function(_d){this._open();},_setValueAttr:function(_e,_f,_10){this.inherited(arguments);if(this._picker){if(!_e){_e=new Date();}this._picker.attr("value",_e);}},_open:function(){if(this.disabled||this.readOnly||!this.popupClass){return;}var _11=this;if(!this._picker){var _12=_4.getObject(this.popupClass,false);this._picker=new _12({onValueSelected:function(_13){if(_11._tabbingAway){delete _11._tabbingAway;}else{_11.focus();}setTimeout(_4.hitch(_11,"_close"),1);_5.form._DateTimeTextBox.superclass._setValueAttr.call(_11,_13,true);},lang:_11.lang,constraints:_11.constraints,isDisabledDate:function(_14){var _15=_4.date.compare;var _16=_11.constraints;return _16&&(_16.min&&(_15(_16.min,_14,"date")>0)||(_16.max&&_15(_16.max,_14,"date")<0));}});this._picker.attr("value",this.attr("value")||new Date());}if(!this._opened){_5.popup.open({parent:this,popup:this._picker,around:this.domNode,onCancel:_4.hitch(this,this._close),onClose:function(){_11._opened=false;}});this._opened=true;}_4.marginBox(this._picker.domNode,{w:this.domNode.offsetWidth});},_close:function(){if(this._opened){_5.popup.close(this._picker);this._opened=false;}},_onBlur:function(){this._close();if(this._picker){this._picker.destroy();delete this._picker;}this.inherited(arguments);},_getDisplayedValueAttr:function(){return this.textbox.value;},_setDisplayedValueAttr:function(_17,_18){this._setValueAttr(this.parse(_17,this.constraints),_18,_17);},destroy:function(){if(this._picker){this._picker.destroy();delete this._picker;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.connect(this.focusNode,"onkeypress",this._onKeyPress);},_onKeyPress:function(e){var p=this._picker,dk=_4.keys;if(p&&this._opened&&p.handleKey){if(p.handleKey(e)===false){return;}}if(this._opened&&e.charOrCode==dk.ESCAPE&&!e.shiftKey&&!e.ctrlKey&&!e.altKey){this._close();_4.stopEvent(e);}else{if(!this._opened&&e.charOrCode==dk.DOWN_ARROW){this._open();_4.stopEvent(e);}else{if(e.charOrCode===dk.TAB){this._tabbingAway=true;}else{if(this._opened&&(e.keyChar||e.charOrCode===dk.BACKSPACE||e.charOrCode==dk.DELETE)){setTimeout(_4.hitch(this,function(){_5.placeOnScreenAroundElement(p.domNode.parentNode,this.domNode,{"BL":"TL","TL":"BL"},p.orient?_4.hitch(p,"orient"):null);}),1);}}}}}});}}};});