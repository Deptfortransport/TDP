/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["require","dojox.gfx.vml"]],defineResource:function(_4,_5,_6){_4.require("dojox.gfx.vml");_4.experimental("dojox.gfx.vml_attach");(function(){_6.gfx.attachNode=function(_7){if(!_7){return null;}var s=null;switch(_7.tagName.toLowerCase()){case _6.gfx.Rect.nodeType:s=new _6.gfx.Rect(_7);_9(s);break;case _6.gfx.Ellipse.nodeType:if(_7.style.width==_7.style.height){s=new _6.gfx.Circle(_7);_a(s);}else{s=new _6.gfx.Ellipse(_7);_b(s);}break;case _6.gfx.Path.nodeType:switch(_7.getAttribute("dojoGfxType")){case "line":s=new _6.gfx.Line(_7);_c(s);break;case "polyline":s=new _6.gfx.Polyline(_7);_d(s);break;case "path":s=new _6.gfx.Path(_7);_e(s);break;case "text":s=new _6.gfx.Text(_7);_f(s);_10(s);_11(s);break;case "textpath":s=new _6.gfx.TextPath(_7);_e(s);_f(s);_10(s);break;}break;case _6.gfx.Image.nodeType:switch(_7.getAttribute("dojoGfxType")){case "image":s=new _6.gfx.Image(_7);_12(s);_13(s);break;}break;default:return null;}if(!(s instanceof _6.gfx.Image)){_14(s);_15(s);if(!(s instanceof _6.gfx.Text)){_16(s);}}return s;};_6.gfx.attachSurface=function(_17){var s=new _6.gfx.Surface();s.clipNode=_17;var r=s.rawNode=_17.firstChild;var b=r.firstChild;if(!b||b.tagName!="rect"){return null;}s.bgNode=r;return s;};var _14=function(_1b){var _1c=null,r=_1b.rawNode,fo=r.fill;if(fo.on&&fo.type=="gradient"){var _1c=_4.clone(_6.gfx.defaultLinearGradient),rad=_6.gfx.matrix._degToRad(fo.angle);_1c.x2=Math.cos(rad);_1c.y2=Math.sin(rad);_1c.colors=[];var _20=fo.colors.value.split(";");for(var i=0;i<_20.length;++i){var t=_20[i].match(/\S+/g);if(!t||t.length!=2){continue;}_1c.colors.push({offset:_6.gfx.vml._parseFloat(t[0]),color:new _4.Color(t[1])});}}else{if(fo.on&&fo.type=="gradientradial"){var _1c=_4.clone(_6.gfx.defaultRadialGradient),w=parseFloat(r.style.width),h=parseFloat(r.style.height);_1c.cx=isNaN(w)?0:fo.focusposition.x*w;_1c.cy=isNaN(h)?0:fo.focusposition.y*h;_1c.r=isNaN(w)?1:w/2;_1c.colors=[];var _20=fo.colors.value.split(";");for(var i=_20.length-1;i>=0;--i){var t=_20[i].match(/\S+/g);if(!t||t.length!=2){continue;}_1c.colors.push({offset:_6.gfx.vml._parseFloat(t[0]),color:new _4.Color(t[1])});}}else{if(fo.on&&fo.type=="tile"){var _1c=_4.clone(_6.gfx.defaultPattern);_1c.width=_6.gfx.pt2px(fo.size.x);_1c.height=_6.gfx.pt2px(fo.size.y);_1c.x=fo.origin.x*_1c.width;_1c.y=fo.origin.y*_1c.height;_1c.src=fo.src;}else{if(fo.on&&r.fillcolor){_1c=new _4.Color(r.fillcolor+"");_1c.a=fo.opacity;}}}}_1b.fillStyle=_1c;};var _15=function(_25){var r=_25.rawNode;if(!r.stroked){_25.strokeStyle=null;return;}var _27=_25.strokeStyle=_4.clone(_6.gfx.defaultStroke),rs=r.stroke;_27.color=new _4.Color(r.strokecolor.value);_27.width=_6.gfx.normalizedLength(r.strokeweight+"");_27.color.a=rs.opacity;_27.cap=this._translate(this._capMapReversed,rs.endcap);_27.join=rs.joinstyle=="miter"?rs.miterlimit:rs.joinstyle;_27.style=rs.dashstyle;};var _16=function(_29){var s=_29.rawNode.skew,sm=s.matrix,so=s.offset;_29.matrix=_6.gfx.matrix.normalize({xx:sm.xtox,xy:sm.ytox,yx:sm.xtoy,yy:sm.ytoy,dx:_6.gfx.pt2px(so.x),dy:_6.gfx.pt2px(so.y)});};var _2d=function(_2e){_2e.bgNode=_2e.rawNode.firstChild;};var _9=function(_2f){var r=_2f.rawNode,_31=r.outerHTML.match(/arcsize = \"(\d*\.?\d+[%f]?)\"/)[1],_32=r.style,_33=parseFloat(_32.width),_34=parseFloat(_32.height);_31=(_31.indexOf("%")>=0)?parseFloat(_31)/100:_6.gfx.vml._parseFloat(_31);_2f.shape=_6.gfx.makeParameters(_6.gfx.defaultRect,{x:parseInt(_32.left),y:parseInt(_32.top),width:_33,height:_34,r:Math.min(_33,_34)*_31});};var _b=function(_35){var _36=_35.rawNode.style,rx=parseInt(_36.width)/2,ry=parseInt(_36.height)/2;_35.shape=_6.gfx.makeParameters(_6.gfx.defaultEllipse,{cx:parseInt(_36.left)+rx,cy:parseInt(_36.top)+ry,rx:rx,ry:ry});};var _a=function(_39){var _3a=_39.rawNode.style,r=parseInt(_3a.width)/2;_39.shape=_6.gfx.makeParameters(_6.gfx.defaultCircle,{cx:parseInt(_3a.left)+r,cy:parseInt(_3a.top)+r,r:r});};var _c=function(_3c){var _3d=_3c.shape=_4.clone(_6.gfx.defaultLine),p=_3c.rawNode.path.v.match(_6.gfx.pathVmlRegExp);do{if(p.length<7||p[0]!="m"||p[3]!="l"||p[6]!="e"){break;}_3d.x1=parseInt(p[1]);_3d.y1=parseInt(p[2]);_3d.x2=parseInt(p[4]);_3d.y2=parseInt(p[5]);}while(false);};var _d=function(_3f){var _40=_3f.shape=_4.clone(_6.gfx.defaultPolyline),p=_3f.rawNode.path.v.match(_6.gfx.pathVmlRegExp);do{if(p.length<3||p[0]!="m"){break;}var x=parseInt(p[0]),y=parseInt(p[1]);if(isNaN(x)||isNaN(y)){break;}_40.points.push({x:x,y:y});if(p.length<6||p[3]!="l"){break;}for(var i=4;i<p.length;i+=2){x=parseInt(p[i]);y=parseInt(p[i+1]);if(isNaN(x)||isNaN(y)){break;}_40.points.push({x:x,y:y});}}while(false);};var _12=function(_45){_45.shape=_4.clone(_6.gfx.defaultImage);_45.shape.src=_45.rawNode.firstChild.src;};var _13=function(_46){var m=_46.rawNode.filters["DXImageTransform.Microsoft.Matrix"];_46.matrix=_6.gfx.matrix.normalize({xx:m.M11,xy:m.M12,yx:m.M21,yy:m.M22,dx:m.Dx,dy:m.Dy});};var _f=function(_48){var _49=_48.shape=_4.clone(_6.gfx.defaultText),r=_48.rawNode,p=r.path.v.match(_6.gfx.pathVmlRegExp);do{if(!p||p.length!=7){break;}var c=r.childNodes,i=0;for(;i<c.length&&c[i].tagName!="textpath";++i){}if(i>=c.length){break;}var s=c[i].style;_49.text=c[i].string;switch(s["v-text-align"]){case "left":_49.x=parseInt(p[1]);_49.align="start";break;case "center":_49.x=(parseInt(p[1])+parseInt(p[4]))/2;_49.align="middle";break;case "right":_49.x=parseInt(p[4]);_49.align="end";break;}_49.y=parseInt(p[2]);_49.decoration=s["text-decoration"];_49.rotated=s["v-rotate-letters"].toLowerCase() in _6.gfx.vml._bool;_49.kerning=s["v-text-kern"].toLowerCase() in _6.gfx.vml._bool;return;}while(false);_48.shape=null;};var _10=function(_4f){var _50=_4f.fontStyle=_4.clone(_6.gfx.defaultFont),c=_4f.rawNode.childNodes,i=0;for(;i<c.length&&c[i].tagName=="textpath";++i){}if(i>=c.length){_4f.fontStyle=null;return;}var s=c[i].style;_50.style=s.fontstyle;_50.variant=s.fontvariant;_50.weight=s.fontweight;_50.size=s.fontsize;_50.family=s.fontfamily;};var _11=function(_54){_16(_54);var _55=_54.matrix,fs=_54.fontStyle;if(_55&&fs){_54.matrix=_6.gfx.matrix.multiply(_55,{dy:_6.gfx.normalizedLength(fs.size)*0.35});}};var _e=function(_57){var _58=_57.shape=_4.clone(_6.gfx.defaultPath),p=_57.rawNode.path.v.match(_6.gfx.pathVmlRegExp),t=[],_5b=false,map=_6.gfx.Path._pathVmlToSvgMap;for(var i=0;i<p.length;++p){var s=p[i];if(s in map){_5b=false;t.push(map[s]);}else{if(!_5b){var n=parseInt(s);if(isNaN(n)){_5b=true;}else{t.push(n);}}}}var l=t.length;if(l>=4&&t[l-1]==""&&t[l-2]==0&&t[l-3]==0&&t[l-4]=="l"){t.splice(l-4,4);}if(l){_58.path=t.join(" ");}};})();}};});