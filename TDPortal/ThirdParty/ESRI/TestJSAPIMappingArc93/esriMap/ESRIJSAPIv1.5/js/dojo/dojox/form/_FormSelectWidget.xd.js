/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.form._FormSelectWidget"],["require","dijit.form._FormWidget"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.form._FormSelectWidget"]){_4._hasResource["dojox.form._FormSelectWidget"]=true;_4.provide("dojox.form._FormSelectWidget");_4.require("dijit.form._FormWidget");_4.declare("dojox.form._FormSelectWidget",_5.form._FormValueWidget,{multiple:"",_multiValue:false,options:null,getOptions:function(_7){var _8=_7,_9=this.options||[],l=_9.length;if(_8===undefined){return _9;}if(_4.isArray(_8)){return _4.map(_8,"return this.getOptions(item);",this);}if(_4.isObject(_7)){if(!_4.some(this.options,function(o,_c){if(o===_8||(o.value&&o.value===_8.value)){_8=_c;return true;}return false;})){_8=-1;}}if(typeof _8=="string"){for(var i=0;i<l;i++){if(_9[i].value===_8){_8=i;break;}}}if(typeof _8=="number"&&_8>=0&&_8<l){return this.options[_8];}return null;},addOption:function(_e){if(!_4.isArray(_e)){_e=[_e];}_4.forEach(_e,function(i){if(i&&_4.isObject(i)){this.options.push(i);}},this);this._loadChildren();},removeOption:function(_10){if(!_4.isArray(_10)){_10=[_10];}var _11=this.getOptions(_10);_4.forEach(_11,function(i){this.options=_4.filter(this.options,function(_13,idx){return (_13.value!==i.value);});this._removeOptionItem(i);},this);this._loadChildren();},updateOption:function(_15){if(!_4.isArray(_15)){_15=[_15];}_4.forEach(_15,function(i){var _17=this.getOptions(i),k;if(_17){for(k in i){_17[k]=i[k];}}},this);this._loadChildren();},_setValueAttr:function(_19,_1a){var _1b=this.getOptions()||[];if(!_4.isArray(_19)){_19=[_19];}_4.forEach(_19,function(i,idx){if(!_4.isObject(i)){i=i+"";}if(typeof i==="string"){_19[idx]=_4.filter(_1b,function(_1e){return _1e.value===i;})[0]||{value:"",label:""};}},this);_19=_4.filter(_19,function(i){return i&&i.value;});if(!this._multiValue&&(!_19[0]||!_19[0].value)&&_1b.length){_19[0]=_1b[0];}_4.forEach(_1b,function(i){i.selected=_4.some(_19,function(v){return v.value===i.value;});});var val=_4.map(_19,function(i){return i.value;}),_24=_4.map(_19,function(i){return i.label;});this.value=this._multiValue?val:val[0];this._setDisplay(this._multiValue?_24:_24[0]);this._updateSelection();this._handleOnChange(this.value,_1a);},_getDisplayedValueAttr:function(){var val=this.attr("value");if(!_4.isArray(val)){val=[val];}var ret=_4.map(this.getOptions(val),function(v){if(v&&"label" in v){return v.label;}else{if(v){return v.value;}}return null;},this);return this._multiValue?ret:ret[0];},_getValueDeprecated:false,getValue:function(){return this._lastValue;},undo:function(){this._setValueAttr(this._lastValueReported,false);},_loadChildren:function(){_4.forEach(this._getChildren(),function(_29){_29.destroyRecursive();});_4.forEach(this.options,this._addOptionItem,this);this._updateSelection();},_updateSelection:function(){this.value=this._getValueFromOpts();var val=this.value;if(!_4.isArray(val)){val=[val];}if(val&&val[0]){_4.forEach(this._getChildren(),function(_2b){var _2c=_4.some(val,function(v){return _2b.option&&(v===_2b.option.value);});_4.toggleClass(_2b.domNode,this.baseClass+"SelectedOption",_2c);_5.setWaiState(_2b.domNode,"selected",_2c);},this);}this._handleOnChange(this.value);},_getValueFromOpts:function(){var _2e=this.getOptions()||[];if(!this._multiValue&&_2e.length){var opt=_4.filter(_2e,function(i){return i.selected;})[0];if(opt&&opt.value){return opt.value;}else{_2e[0].selected=true;return _2e[0].value;}}else{if(this._multiValue){return _4.map(_4.filter(_2e,function(i){return i.selected;}),function(i){return i.value;})||[];}}return "";},postMixInProperties:function(){this._multiValue=(this.multiple.toLowerCase()==="true");this.inherited(arguments);},_fillContent:function(){var _33=this.options;if(!_33){_33=this.options=this.srcNodeRef?_4.query(">",this.srcNodeRef).map(function(_34){if(_34.getAttribute("type")==="separator"){return {value:"",label:"",selected:false,disabled:false};}return {value:_34.getAttribute("value"),label:String(_34.innerHTML),selected:_34.getAttribute("selected")||false,disabled:_34.getAttribute("disabled")||false};},this):[];}if(!this.value){this.value=this._getValueFromOpts();}else{if(this._multiValue&&typeof this.value=="string"){this.value=this.value.split(",");}}},postCreate:function(){_4.setSelectable(this.focusNode,false);this.inherited(arguments);this.connect(this,"onChange","_updateSelection");this.connect(this,"startup","_loadChildren");this._setValueAttr(this.value,null);},_addOptionItem:function(_35){},_removeOptionItem:function(_36){},_setDisplay:function(_37){},_getChildren:function(){return [];},_getSelectedOptionsAttr:function(){return this.getOptions(this.attr("value"));}});}}};});