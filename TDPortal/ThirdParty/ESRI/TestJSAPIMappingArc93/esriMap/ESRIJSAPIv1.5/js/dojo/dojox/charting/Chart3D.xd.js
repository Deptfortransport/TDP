/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.charting.Chart3D"],["require","dojox.gfx3d"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.charting.Chart3D"]){_4._hasResource["dojox.charting.Chart3D"]=true;_4.provide("dojox.charting.Chart3D");_4.require("dojox.gfx3d");(function(){var _7={x:0,y:0,z:1},v=_6.gfx3d.vector,n=_6.gfx.normalizedLength;_4.declare("dojox.charting.Chart3D",null,{constructor:function(_a,_b,_c,_d){this.node=_4.byId(_a);this.surface=_6.gfx.createSurface(this.node,n(this.node.style.width),n(this.node.style.height));this.view=this.surface.createViewport();this.view.setLights(_b.lights,_b.ambient,_b.specular);this.view.setCameraTransform(_c);this.theme=_d;this.walls=[];this.plots=[];},generate:function(){return this._generateWalls()._generatePlots();},invalidate:function(){this.view.invalidate();return this;},render:function(){this.view.render();return this;},addPlot:function(_e){return this._add(this.plots,_e);},removePlot:function(_f){return this._remove(this.plots,_f);},addWall:function(_10){return this._add(this.walls,_10);},removeWall:function(_11){return this._remove(this.walls,_11);},_add:function(_12,_13){if(!_4.some(_12,function(i){return i==_13;})){_12.push(_13);this.view.invalidate();}return this;},_remove:function(_15,_16){var a=_4.filter(_15,function(i){return i!=_16;});return a.length<_15.length?(_15=a,this.invalidate()):this;},_generateWalls:function(){for(var i=0;i<this.walls.length;++i){if(v.dotProduct(_7,this.walls[i].normal)>0){this.walls[i].generate(this);}}return this;},_generatePlots:function(){var _1a=0,m=_6.gfx3d.matrix,i=0;for(;i<this.plots.length;++i){_1a+=this.plots[i].getDepth();}for(--i;i>=0;--i){var _1d=this.view.createScene();_1d.setTransform(m.translate(0,0,-_1a));this.plots[i].generate(this,_1d);_1a-=this.plots[i].getDepth();}return this;}});})();}}};});