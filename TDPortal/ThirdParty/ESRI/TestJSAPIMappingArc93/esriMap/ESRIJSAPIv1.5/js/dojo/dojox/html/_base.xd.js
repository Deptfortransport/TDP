/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.html._base"],["require","dojo.html"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.html._base"]){_4._hasResource["dojox.html._base"]=true;_4.provide("dojox.html._base");_4.require("dojo.html");(function(){if(_4.isIE){var _7=/(AlphaImageLoader\([^)]*?src=(['"]))(?![a-z]+:|\/)([^\r\n;}]+?)(\2[^)]*\)\s*[;}]?)/g;}var _8=/(?:(?:@import\s*(['"])(?![a-z]+:|\/)([^\r\n;{]+?)\1)|url\(\s*(['"]?)(?![a-z]+:|\/)([^\r\n;]+?)\3\s*\))([a-z, \s]*[;}]?)/g;var _9=_6.html._adjustCssPaths=function(_a,_b){if(!_b||!_a){return;}if(_7){_b=_b.replace(_7,function(_c,_d,_e,_f,_10){return _d+(new _4._Url(_a,"./"+_f).toString())+_10;});}return _b.replace(_8,function(_11,_12,_13,_14,_15,_16){if(_13){return "@import \""+(new _4._Url(_a,"./"+_13).toString())+"\""+_16;}else{return "url("+(new _4._Url(_a,"./"+_15).toString())+")"+_16;}});};var _17=/(<[a-z][a-z0-9]*\s[^>]*)(?:(href|src)=(['"]?)([^>]*?)\3|style=(['"]?)([^>]*?)\5)([^>]*>)/gi;var _18=_6.html._adjustHtmlPaths=function(_19,_1a){var url=_19||"./";return _1a.replace(_17,function(tag,_1d,_1e,_1f,_20,_21,_22,end){return _1d+(_1e?(_1e+"="+_1f+(new _4._Url(url,_20).toString())+_1f):("style="+_21+_9(url,_22)+_21))+end;});};var _24=_6.html._snarfStyles=function(_25,_26,_27){_27.attributes=[];return _26.replace(/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,function(_28,_29,_2a,_2b,_2c,_2d){var i,_2f=(_29||_2b||"").replace(/^\s*([\s\S]*?)\s*$/i,"$1");if(_2a){i=_27.push(_25?_9(_25,_2a):_2a);}else{i=_27.push("@import \""+_2d+"\";");_2f=_2f.replace(/\s*(?:rel|href)=(['"])?[^\s]*\1\s*/gi,"");}if(_2f){_2f=_2f.split(/\s+/);var _30={},tmp;for(var j=0,e=_2f.length;j<e;j++){tmp=_2f[j].split("=");_30[tmp[0]]=tmp[1].replace(/^\s*['"]?([\s\S]*?)['"]?\s*$/,"$1");}_27.attributes[i-1]=_30;}return "";});};var _34=_6.html._snarfScripts=function(_35,_36){_36.code="";function _37(src){if(_36.downloadRemote){_4.xhrGet({url:src,sync:true,load:function(_39){_36.code+=_39+";";},error:_36.errBack});}};return _35.replace(/<script\s*(?![^>]*type=['"]?dojo)(?:[^>]*?(?:src=(['"]?)([^>]*?)\1[^>]*)?)*>([\s\S]*?)<\/script>/gi,function(_3a,_3b,src,_3d){if(src){_37(src);}else{_36.code+=_3d;}return "";});};var _3e=_6.html.evalInGlobal=function(_3f,_40){_40=_40||_4.doc.body;var n=_40.ownerDocument.createElement("script");n.type="text/javascript";_40.appendChild(n);n.text=_3f;};_4.declare("dojox.html._ContentSetter",[_4.html._ContentSetter],{adjustPaths:false,referencePath:".",renderStyles:false,executeScripts:false,scriptHasHooks:false,scriptHookReplacement:null,_renderStyles:function(_42){this._styleNodes=[];var st,att,_45,doc=this.node.ownerDocument;var _47=doc.getElementsByTagName("head")[0];for(var i=0,e=_42.length;i<e;i++){_45=_42[i];att=_42.attributes[i];st=doc.createElement("style");st.setAttribute("type","text/css");for(var x in att){st.setAttribute(x,att[x]);}this._styleNodes.push(st);_47.appendChild(st);if(st.styleSheet){st.styleSheet.cssText=_45;}else{st.appendChild(doc.createTextNode(_45));}}},empty:function(){this.inherited("empty",arguments);this._styles=[];},onBegin:function(){this.inherited("onBegin",arguments);var _4b=this.content,_4c=this.node;var _4d=this._styles;if(_4.isString(_4b)){if(this.adjustPaths&&this.referencePath){_4b=_18(this.referencePath,_4b);}if(this.renderStyles||this.cleanContent){_4b=_24(this.referencePath,_4b,_4d);}if(this.executeScripts){var _t=this;var _4f={downloadRemote:true,errBack:function(e){_t._onError.call(_t,"Exec","Error downloading remote script in \""+_t.id+"\"",e);}};_4b=_34(_4b,_4f);this._code=_4f.code;}}this.content=_4b;},onEnd:function(){var _51=this._code,_52=this._styles;if(this._styleNodes&&this._styleNodes.length){while(this._styleNodes.length){_4.destroy(this._styleNodes.pop());}}if(this.renderStyles&&_52&&_52.length){this._renderStyles(_52);}if(this.executeScripts&&_51){if(this.cleanContent){_51=_51.replace(/(<!--|(?:\/\/)?-->|<!\[CDATA\[|\]\]>)/g,"");}if(this.scriptHasHooks){_51=_51.replace(/_container_(?!\s*=[^=])/g,this.scriptHookReplacement);}try{_3e(_51,this.node);}catch(e){this._onError("Exec","Error eval script in "+this.id+", "+e.message,e);}}this.inherited("onEnd",arguments);},tearDown:function(){this.inherited(arguments);delete this._styles;if(this._styleNodes&&this._styleNodes.length){while(this._styleNodes.length){_4.destroy(this._styleNodes.pop());}}delete this._styleNodes;_4.mixin(this,_4.getObject(this.declaredClass).prototype);}});_6.html.set=function(_53,_54,_55){if(!_55){return _4.html._setNodeContent(_53,_54,true);}else{var op=new _6.html._ContentSetter(_4.mixin(_55,{content:_54,node:_53}));return op.set();}};})();}}};});