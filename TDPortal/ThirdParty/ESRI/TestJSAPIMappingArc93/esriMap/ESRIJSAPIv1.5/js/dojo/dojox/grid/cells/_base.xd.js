/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.grid.cells._base"],["require","dojox.grid.util"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.grid.cells._base"]){_4._hasResource["dojox.grid.cells._base"]=true;_4.provide("dojox.grid.cells._base");_4.require("dojox.grid.util");(function(){var _7=function(_8){try{_6.grid.util.fire(_8,"focus");_6.grid.util.fire(_8,"select");}catch(e){}};var _9=function(){setTimeout(_4.hitch.apply(_4,arguments),0);};var _a=_6.grid.cells;_4.declare("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:false,alwaysEditing:false,formatter:null,defaultValue:"...",value:null,hidden:false,noresize:false,_valueProp:"value",_formatPending:false,constructor:function(_b){this._props=_b||{};_4.mixin(this,_b);},format:function(_c,_d){var f,i=this.grid.edit.info,d=this.get?this.get(_c,_d):(this.value||this.defaultValue);d=(d&&d.replace)?d.replace(/</g,"&lt;"):d;if(this.editable&&(this.alwaysEditing||(i.rowIndex==_c&&i.cell==this))){return this.formatEditing(d,_c);}else{var v=(d!=this.defaultValue&&(f=this.formatter))?f.call(this,d,_c):d;return (typeof v=="undefined"?this.defaultValue:v);}},formatEditing:function(_12,_13){},getNode:function(_14){return this.view.getCellNode(_14,this.index);},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index);},getEditNode:function(_15){return (this.getNode(_15)||0).firstChild||0;},canResize:function(){var uw=this.unitWidth;return uw&&(uw!=="auto");},isFlex:function(){var uw=this.unitWidth;return uw&&_4.isString(uw)&&(uw=="auto"||uw.slice(-1)=="%");},applyEdit:function(_18,_19){this.grid.edit.applyCellEdit(_18,this,_19);},cancelEdit:function(_1a){this.grid.doCancelEdit(_1a);},_onEditBlur:function(_1b){if(this.grid.edit.isEditCell(_1b,this.index)){this.grid.edit.apply();}},registerOnBlur:function(_1c,_1d){if(this.commitOnBlur){_4.connect(_1c,"onblur",function(e){setTimeout(_4.hitch(this,"_onEditBlur",_1d),250);});}},needFormatNode:function(_1f,_20){this._formatPending=true;_9(this,"_formatNode",_1f,_20);},cancelFormatNode:function(){this._formatPending=false;},_formatNode:function(_21,_22){if(this._formatPending){this._formatPending=false;_4.setSelectable(this.grid.domNode,true);this.formatNode(this.getEditNode(_22),_21,_22);}},formatNode:function(_23,_24,_25){if(_4.isIE){_9(this,"focus",_25,_23);}else{this.focus(_25,_23);}},dispatchEvent:function(m,e){if(m in this){return this[m](e);}},getValue:function(_28){return this.getEditNode(_28)[this._valueProp];},setValue:function(_29,_2a){var n=this.getEditNode(_29);if(n){n[this._valueProp]=_2a;}},focus:function(_2c,_2d){_7(_2d||this.getEditNode(_2c));},save:function(_2e){this.value=this.value||this.getValue(_2e);},restore:function(_2f){this.setValue(_2f,this.value);},_finish:function(_30){_4.setSelectable(this.grid.domNode,false);this.cancelFormatNode();},apply:function(_31){this.applyEdit(this.getValue(_31),_31);this._finish(_31);},cancel:function(_32){this.cancelEdit(_32);this._finish(_32);}});_a._Base.markupFactory=function(_33,_34){var d=_4;var _36=d.trim(d.attr(_33,"formatter")||"");if(_36){_34.formatter=_4.getObject(_36);}var get=d.trim(d.attr(_33,"get")||"");if(get){_34.get=_4.getObject(get);}var _38=function(_39){var _3a=d.trim(d.attr(_33,_39)||"");return _3a?!(_3a.toLowerCase()=="false"):undefined;};_34.sortDesc=_38("sortDesc");_34.editable=_38("editable");_34.alwaysEditing=_38("alwaysEditing");_34.noresize=_38("noresize");var _3b=d.trim(d.attr(_33,"loadingText")||d.attr(_33,"defaultValue")||"");if(_3b){_34.defaultValue=_3b;}var _3c=function(_3d){return d.trim(d.attr(_33,_3d)||"")||undefined;};_34.styles=_3c("styles");_34.headerStyles=_3c("headerStyles");_34.cellStyles=_3c("cellStyles");_34.classes=_3c("classes");_34.headerClasses=_3c("headerClasses");_34.cellClasses=_3c("cellClasses");};_4.declare("dojox.grid.cells.Cell",_a._Base,{constructor:function(){this.keyFilter=this.keyFilter;},keyFilter:null,formatEditing:function(_3e,_3f){this.needFormatNode(_3e,_3f);return "<input class=\"dojoxGridInput\" type=\"text\" value=\""+_3e+"\">";},formatNode:function(_40,_41,_42){this.inherited(arguments);this.registerOnBlur(_40,_42);},doKey:function(e){if(this.keyFilter){var key=String.fromCharCode(e.charCode);if(key.search(this.keyFilter)==-1){_4.stopEvent(e);}}},_finish:function(_45){this.inherited(arguments);var n=this.getEditNode(_45);try{_6.grid.util.fire(n,"blur");}catch(e){}}});_a.Cell.markupFactory=function(_47,_48){_a._Base.markupFactory(_47,_48);var d=_4;var _4a=d.trim(d.attr(_47,"keyFilter")||"");if(_4a){_48.keyFilter=new RegExp(_4a);}};_4.declare("dojox.grid.cells.RowIndex",_a.Cell,{name:"Row",postscript:function(){this.editable=false;},get:function(_4b){return _4b+1;}});_a.RowIndex.markupFactory=function(_4c,_4d){_a.Cell.markupFactory(_4c,_4d);};_4.declare("dojox.grid.cells.Select",_a.Cell,{options:null,values:null,returnIndex:-1,constructor:function(_4e){this.values=this.values||this.options;},formatEditing:function(_4f,_50){this.needFormatNode(_4f,_50);var h=["<select class=\"dojoxGridSelect\">"];for(var i=0,o,v;((o=this.options[i])!==undefined)&&((v=this.values[i])!==undefined);i++){h.push("<option",(_4f==v?" selected":"")," value=\""+v+"\"",">",o,"</option>");}h.push("</select>");return h.join("");},getValue:function(_55){var n=this.getEditNode(_55);if(n){var i=n.selectedIndex,o=n.options[i];return this.returnIndex>-1?i:o.value||o.innerHTML;}}});_a.Select.markupFactory=function(_59,_5a){_a.Cell.markupFactory(_59,_5a);var d=_4;var _5c=d.trim(d.attr(_59,"options")||"");if(_5c){var o=_5c.split(",");if(o[0]!=_5c){_5a.options=o;}}var _5e=d.trim(d.attr(_59,"values")||"");if(_5e){var v=_5e.split(",");if(v[0]!=_5e){_5a.values=v;}}};_4.declare("dojox.grid.cells.AlwaysEdit",_a.Cell,{alwaysEditing:true,_formatNode:function(_60,_61){this.formatNode(this.getEditNode(_61),_60,_61);},applyStaticValue:function(_62){var e=this.grid.edit;e.applyCellEdit(this.getValue(_62),this,_62);e.start(this,_62,true);}});_a.AlwaysEdit.markupFactory=function(_64,_65){_a.Cell.markupFactory(_64,_65);};_4.declare("dojox.grid.cells.Bool",_a.AlwaysEdit,{_valueProp:"checked",formatEditing:function(_66,_67){return "<input class=\"dojoxGridInput\" type=\"checkbox\""+(_66?" checked=\"checked\"":"")+" style=\"width: auto\" />";},doclick:function(e){if(e.target.tagName=="INPUT"){this.applyStaticValue(e.rowIndex);}}});_a.Bool.markupFactory=function(_69,_6a){_a.AlwaysEdit.markupFactory(_69,_6a);};})();}}};});