/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.dtl.tag.logic"],["require","dojox.dtl._base"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.dtl.tag.logic"]){_4._hasResource["dojox.dtl.tag.logic"]=true;_4.provide("dojox.dtl.tag.logic");_4.require("dojox.dtl._base");(function(){var dd=_6.dtl;var _8=dd.text;var _9=dd.tag.logic;_9.IfNode=_4.extend(function(_a,_b,_c,_d){this.bools=_a;this.trues=_b;this.falses=_c;this.type=_d;},{render:function(_e,_f){var i,_11,_12,_13,_14;if(this.type=="or"){for(i=0;_11=this.bools[i];i++){_12=_11[0];_13=_11[1];_14=_13.resolve(_e);if((_14&&!_12)||(_12&&!_14)){if(this.falses){_f=this.falses.unrender(_e,_f);}return (this.trues)?this.trues.render(_e,_f,this):_f;}}if(this.trues){_f=this.trues.unrender(_e,_f);}return (this.falses)?this.falses.render(_e,_f,this):_f;}else{for(i=0;_11=this.bools[i];i++){_12=_11[0];_13=_11[1];_14=_13.resolve(_e);if(_14==_12){if(this.trues){_f=this.trues.unrender(_e,_f);}return (this.falses)?this.falses.render(_e,_f,this):_f;}}if(this.falses){_f=this.falses.unrender(_e,_f);}return (this.trues)?this.trues.render(_e,_f,this):_f;}return _f;},unrender:function(_15,_16){_16=(this.trues)?this.trues.unrender(_15,_16):_16;_16=(this.falses)?this.falses.unrender(_15,_16):_16;return _16;},clone:function(_17){var _18=(this.trues)?this.trues.clone(_17):null;var _19=(this.falses)?this.falses.clone(_17):null;return new this.constructor(this.bools,_18,_19,this.type);}});_9.IfEqualNode=_4.extend(function(_1a,_1b,_1c,_1d,_1e){this.var1=new dd._Filter(_1a);this.var2=new dd._Filter(_1b);this.trues=_1c;this.falses=_1d;this.negate=_1e;},{render:function(_1f,_20){var _21=this.var1.resolve(_1f);var _22=this.var2.resolve(_1f);_21=(typeof _21!="undefined")?_21:"";_22=(typeof _21!="undefined")?_22:"";if((this.negate&&_21!=_22)||(!this.negate&&_21==_22)){if(this.falses){_20=this.falses.unrender(_1f,_20,this);}return (this.trues)?this.trues.render(_1f,_20,this):_20;}if(this.trues){_20=this.trues.unrender(_1f,_20,this);}return (this.falses)?this.falses.render(_1f,_20,this):_20;},unrender:function(_23,_24){return _9.IfNode.prototype.unrender.call(this,_23,_24);},clone:function(_25){var _26=this.trues?this.trues.clone(_25):null;var _27=this.falses?this.falses.clone(_25):null;return new this.constructor(this.var1.getExpression(),this.var2.getExpression(),_26,_27,this.negate);}});_9.ForNode=_4.extend(function(_28,_29,_2a,_2b){this.assign=_28;this.loop=new dd._Filter(_29);this.reversed=_2a;this.nodelist=_2b;this.pool=[];},{render:function(_2c,_2d){var i,j,k;var _31=false;var _32=this.assign;for(k=0;k<_32.length;k++){if(typeof _2c[_32[k]]!="undefined"){_31=true;_2c=_2c.push();break;}}if(!_31&&_2c.forloop){_31=true;_2c=_2c.push();}var _33=this.loop.resolve(_2c)||[];for(i=_33.length;i<this.pool.length;i++){this.pool[i].unrender(_2c,_2d,this);}if(this.reversed){_33=_33.slice(0).reverse();}var _34=_4.isObject(_33)&&!_4.isArrayLike(_33);var _35=[];if(_34){for(var key in _33){_35.push(_33[key]);}}else{_35=_33;}var _37=_2c.forloop={parentloop:_2c.get("forloop",{})};var j=0;for(i=0;i<_35.length;i++){var _38=_35[i];_37.counter0=j;_37.counter=j+1;_37.revcounter0=_35.length-j-1;_37.revcounter=_35.length-j;_37.first=!j;_37.last=(j==_35.length-1);if(_32.length>1&&_4.isArrayLike(_38)){if(!_31){_31=true;_2c=_2c.push();}var _39={};for(k=0;k<_38.length&&k<_32.length;k++){_39[_32[k]]=_38[k];}_4.mixin(_2c,_39);}else{_2c[_32[0]]=_38;}if(j+1>this.pool.length){this.pool.push(this.nodelist.clone(_2d));}_2d=this.pool[j++].render(_2c,_2d,this);}delete _2c.forloop;if(_31){_2c=_2c.pop();}else{for(k=0;k<_32.length;k++){delete _2c[_32[k]];}}return _2d;},unrender:function(_3a,_3b){for(var i=0,_3d;_3d=this.pool[i];i++){_3b=_3d.unrender(_3a,_3b);}return _3b;},clone:function(_3e){return new this.constructor(this.assign,this.loop.getExpression(),this.reversed,this.nodelist.clone(_3e));}});_4.mixin(_9,{if_:function(_3f,_40){var i,_42,_43,_44=[],_45=_40.contents.split();_45.shift();_40=_45.join(" ");_45=_40.split(" and ");if(_45.length==1){_43="or";_45=_40.split(" or ");}else{_43="and";for(i=0;i<_45.length;i++){if(_45[i].indexOf(" or ")!=-1){throw new Error("'if' tags can't mix 'and' and 'or'");}}}for(i=0;_42=_45[i];i++){var not=false;if(_42.indexOf("not ")==0){_42=_42.slice(4);not=true;}_44.push([not,new dd._Filter(_42)]);}var _47=_3f.parse(["else","endif"]);var _48=false;var _40=_3f.next_token();if(_40.contents=="else"){_48=_3f.parse(["endif"]);_3f.next_token();}return new _9.IfNode(_44,_47,_48,_43);},_ifequal:function(_49,_4a,_4b){var _4c=_4a.split_contents();if(_4c.length!=3){throw new Error(_4c[0]+" takes two arguments");}var end="end"+_4c[0];var _4e=_49.parse(["else",end]);var _4f=false;var _4a=_49.next_token();if(_4a.contents=="else"){_4f=_49.parse([end]);_49.next_token();}return new _9.IfEqualNode(_4c[1],_4c[2],_4e,_4f,_4b);},ifequal:function(_50,_51){return _9._ifequal(_50,_51);},ifnotequal:function(_52,_53){return _9._ifequal(_52,_53,true);},for_:function(_54,_55){var _56=_55.contents.split();if(_56.length<4){throw new Error("'for' statements should have at least four words: "+_55.contents);}var _57=_56[_56.length-1]=="reversed";var _58=(_57)?-3:-2;if(_56[_56.length+_58]!="in"){throw new Error("'for' tag received an invalid argument: "+_55.contents);}var _59=_56.slice(1,_58).join(" ").split(/ *, */);for(var i=0;i<_59.length;i++){if(!_59[i]||_59[i].indexOf(" ")!=-1){throw new Error("'for' tag received an invalid argument: "+_55.contents);}}var _5b=_54.parse(["endfor"]);_54.next_token();return new _9.ForNode(_59,_56[_56.length+_58+1],_57,_5b);}});})();}}};});