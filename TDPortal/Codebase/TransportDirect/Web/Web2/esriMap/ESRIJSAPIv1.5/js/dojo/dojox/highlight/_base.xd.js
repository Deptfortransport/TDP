/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.highlight._base"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.highlight._base"]){_4._hasResource["dojox.highlight._base"]=true;_4.provide("dojox.highlight._base");(function(){var dh=_6.highlight,_8="\\b(0x[A-Za-z0-9]+|\\d+(\\.\\d+)?)";dh.constants={IDENT_RE:"[a-zA-Z][a-zA-Z0-9_]*",UNDERSCORE_IDENT_RE:"[a-zA-Z_][a-zA-Z0-9_]*",NUMBER_RE:"\\b\\d+(\\.\\d+)?",C_NUMBER_RE:_8,APOS_STRING_MODE:{className:"string",begin:"'",end:"'",illegal:"\\n",contains:["escape"],relevance:0},QUOTE_STRING_MODE:{className:"string",begin:"\"",end:"\"",illegal:"\\n",contains:["escape"],relevance:0},BACKSLASH_ESCAPE:{className:"escape",begin:"\\\\.",end:"^",relevance:0},C_LINE_COMMENT_MODE:{className:"comment",begin:"//",end:"$",relevance:0},C_BLOCK_COMMENT_MODE:{className:"comment",begin:"/\\*",end:"\\*/"},HASH_COMMENT_MODE:{className:"comment",begin:"#",end:"$"},C_NUMBER_MODE:{className:"number",begin:_8,end:"^",relevance:0}};function _9(_a){return _a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;");};function _b(_c){return _4.every(_c.childNodes,function(_d){return _d.nodeType==3||String(_d.nodeName).toLowerCase()=="br";});};function _e(_f){var _10=[];_4.forEach(_f.childNodes,function(_11){if(_11.nodeType==3){_10.push(_11.nodeValue);}else{if(String(_11.nodeName).toLowerCase()=="br"){_10.push("\n");}else{throw "Complex markup";}}});return _10.join("");};function _12(_13){if(!_13.keywordGroups){for(var key in _13.keywords){var kw=_13.keywords[key];if(kw instanceof Object){_13.keywordGroups=_13.keywords;}else{_13.keywordGroups={keyword:_13.keywords};}break;}}};function _16(_17){if(_17.defaultMode&&_17.modes){_12(_17.defaultMode);_4.forEach(_17.modes,_12);}};var _18=function(_19,_1a){this.langName=_19;this.lang=dh.languages[_19];this.modes=[this.lang.defaultMode];this.relevance=0;this.keywordCount=0;this.result=[];if(!this.lang.defaultMode.illegalRe){this.buildRes();_16(this.lang);}try{this.highlight(_1a);this.result=this.result.join("");}catch(e){if(e=="Illegal"){this.relevance=0;this.keywordCount=0;this.partialResult=this.result.join("");this.result=_9(_1a);}else{throw e;}}};_4.extend(_18,{buildRes:function(){_4.forEach(this.lang.modes,function(_1b){if(_1b.begin){_1b.beginRe=this.langRe("^"+_1b.begin);}if(_1b.end){_1b.endRe=this.langRe("^"+_1b.end);}if(_1b.illegal){_1b.illegalRe=this.langRe("^(?:"+_1b.illegal+")");}},this);this.lang.defaultMode.illegalRe=this.langRe("^(?:"+this.lang.defaultMode.illegal+")");},subMode:function(_1c){var _1d=this.modes[this.modes.length-1].contains;if(_1d){var _1e=this.lang.modes;for(var i=0;i<_1d.length;++i){var _20=_1d[i];for(var j=0;j<_1e.length;++j){var _22=_1e[j];if(_22.className==_20&&_22.beginRe.test(_1c)){return _22;}}}}return null;},endOfMode:function(_23){for(var i=this.modes.length-1;i>=0;--i){var _25=this.modes[i];if(_25.end&&_25.endRe.test(_23)){return this.modes.length-i;}if(!_25.endsWithParent){break;}}return 0;},isIllegal:function(_26){var _27=this.modes[this.modes.length-1].illegalRe;return _27&&_27.test(_26);},langRe:function(_28,_29){var _2a="m"+(this.lang.case_insensitive?"i":"")+(_29?"g":"");return new RegExp(_28,_2a);},buildTerminators:function(){var _2b=this.modes[this.modes.length-1],_2c={};if(_2b.contains){_4.forEach(this.lang.modes,function(_2d){if(_4.indexOf(_2b.contains,_2d.className)>=0){_2c[_2d.begin]=1;}});}for(var i=this.modes.length-1;i>=0;--i){var m=this.modes[i];if(m.end){_2c[m.end]=1;}if(!m.endsWithParent){break;}}if(_2b.illegal){_2c[_2b.illegal]=1;}var t=[];for(i in _2c){t.push(i);}_2b.terminatorsRe=this.langRe("("+t.join("|")+")");},eatModeChunk:function(_31,_32){var _33=this.modes[this.modes.length-1];if(!_33.terminatorsRe){this.buildTerminators();}_31=_31.substr(_32);var _34=_33.terminatorsRe.exec(_31);if(!_34){return {buffer:_31,lexeme:"",end:true};}return {buffer:_34.index?_31.substr(0,_34.index):"",lexeme:_34[0],end:false};},keywordMatch:function(_35,_36){var _37=_36[0];if(this.lang.case_insensitive){_37=_37.toLowerCase();}for(var _38 in _35.keywordGroups){if(_37 in _35.keywordGroups[_38]){return _38;}}return "";},buildLexemes:function(_39){var _3a={};_4.forEach(_39.lexems,function(_3b){_3a[_3b]=1;});var t=[];for(var i in _3a){t.push(i);}_39.lexemsRe=this.langRe("("+t.join("|")+")",true);},processKeywords:function(_3e){var _3f=this.modes[this.modes.length-1];if(!_3f.keywords||!_3f.lexems){return _9(_3e);}if(!_3f.lexemsRe){this.buildLexemes(_3f);}_3f.lexemsRe.lastIndex=0;var _40=[],_41=0,_42=_3f.lexemsRe.exec(_3e);while(_42){_40.push(_9(_3e.substr(_41,_42.index-_41)));var _43=this.keywordMatch(_3f,_42);if(_43){++this.keywordCount;_40.push("<span class=\""+_43+"\">"+_9(_42[0])+"</span>");}else{_40.push(_9(_42[0]));}_41=_3f.lexemsRe.lastIndex;_42=_3f.lexemsRe.exec(_3e);}_40.push(_9(_3e.substr(_41,_3e.length-_41)));return _40.join("");},processModeInfo:function(_44,_45,end){var _47=this.modes[this.modes.length-1];if(end){this.result.push(this.processKeywords(_47.buffer+_44));return;}if(this.isIllegal(_45)){throw "Illegal";}var _48=this.subMode(_45);if(_48){_47.buffer+=_44;this.result.push(this.processKeywords(_47.buffer));if(_48.excludeBegin){this.result.push(_45+"<span class=\""+_48.className+"\">");_48.buffer="";}else{this.result.push("<span class=\""+_48.className+"\">");_48.buffer=_45;}this.modes.push(_48);this.relevance+=typeof _48.relevance=="number"?_48.relevance:1;return;}var _49=this.endOfMode(_45);if(_49){_47.buffer+=_44;if(_47.excludeEnd){this.result.push(this.processKeywords(_47.buffer)+"</span>"+_45);}else{this.result.push(this.processKeywords(_47.buffer+_45)+"</span>");}while(_49>1){this.result.push("</span>");--_49;this.modes.pop();}this.modes.pop();this.modes[this.modes.length-1].buffer="";return;}},highlight:function(_4a){var _4b=0;this.lang.defaultMode.buffer="";do{var _4c=this.eatModeChunk(_4a,_4b);this.processModeInfo(_4c.buffer,_4c.lexeme,_4c.end);_4b+=_4c.buffer.length+_4c.lexeme.length;}while(!_4c.end);if(this.modes.length>1){throw "Illegal";}}});function _4d(_4e,_4f,_50){if(String(_4e.tagName).toLowerCase()=="code"&&String(_4e.parentNode.tagName).toLowerCase()=="pre"){var _51=document.createElement("div"),_52=_4e.parentNode.parentNode;_51.innerHTML="<pre><code class=\""+_4f+"\">"+_50+"</code></pre>";_52.replaceChild(_51.firstChild,_4e.parentNode);}else{_4e.className=_4f;_4e.innerHTML=_50;}};function _53(_54,str){var _56=new _18(_54,str);return {result:_56.result,langName:_54,partialResult:_56.partialResult};};function _57(_58,_59){var _5a=_53(_59,_e(_58));_4d(_58,_58.className,_5a.result);};function _5b(str){var _5d="",_5e="",_5f=2,_60=str;for(var key in dh.languages){if(!dh.languages[key].defaultMode){continue;}var _62=new _18(key,_60),_63=_62.keywordCount+_62.relevance,_64=0;if(!_5d||_63>_64){_64=_63;_5d=_62.result;_5e=_62.langName;}}return {result:_5d,langName:_5e};};function _65(_66){var _67=_5b(_e(_66));if(_67.result){_4d(_66,_67.langName,_67.result);}};_6.highlight.processString=function(str,_69){return _69?_53(_69,str):_5b(str);};_6.highlight.init=function(_6a){_6a=_4.byId(_6a);if(_4.hasClass(_6a,"no-highlight")){return;}if(!_b(_6a)){return;}var _6b=_6a.className.split(/\s+/),_6c=_4.some(_6b,function(_6d){if(_6d.charAt(0)!="_"&&dh.languages[_6d]){_57(_6a,_6d);return true;}return false;});if(!_6c){_65(_6a);}};dh.Code=function(p,n){dh.init(n);};})();}}};});