/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.grid.compat._grid.drag"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.grid.compat._grid.drag"]){_4._hasResource["dojox.grid.compat._grid.drag"]=true;_4.provide("dojox.grid.compat._grid.drag");(function(){var _7=_6.grid.drag={};_7.dragging=false;_7.hysteresis=2;_7.capture=function(_8){if(_8.setCapture){_8.setCapture();}else{document.addEventListener("mousemove",_8.onmousemove,true);document.addEventListener("mouseup",_8.onmouseup,true);document.addEventListener("click",_8.onclick,true);}};_7.release=function(_9){if(_9.releaseCapture){_9.releaseCapture();}else{document.removeEventListener("click",_9.onclick,true);document.removeEventListener("mouseup",_9.onmouseup,true);document.removeEventListener("mousemove",_9.onmousemove,true);}};_7.start=function(_a,_b,_c,_d,_e){if(!_a||_7.dragging){console.debug("failed to start drag: bad input node or already dragging");return;}_7.dragging=true;_7.elt=_a;_7.events={drag:_b||_6.grid.nop,end:_c||_6.grid.nop,start:_e||_6.grid.nop,oldmove:_a.onmousemove,oldup:_a.onmouseup,oldclick:_a.onclick};_7.positionX=(_d&&("screenX" in _d)?_d.screenX:false);_7.positionY=(_d&&("screenY" in _d)?_d.screenY:false);_7.started=(_7.position===false);_a.onmousemove=_7.mousemove;_a.onmouseup=_7.mouseup;_a.onclick=_7.click;_7.capture(_7.elt);};_7.end=function(){_7.release(_7.elt);_7.elt.onmousemove=_7.events.oldmove;_7.elt.onmouseup=_7.events.oldup;_7.elt.onclick=_7.events.oldclick;_7.elt=null;try{if(_7.started){_7.events.end();}}finally{_7.dragging=false;}};_7.calcDelta=function(_f){_f.deltaX=_f.screenX-_7.positionX;_f.deltaY=_f.screenY-_7.positionY;};_7.hasMoved=function(_10){return Math.abs(_10.deltaX)+Math.abs(_10.deltaY)>_7.hysteresis;};_7.mousemove=function(_11){_11=_4.fixEvent(_11);_4.stopEvent(_11);_7.calcDelta(_11);if((!_7.started)&&(_7.hasMoved(_11))){_7.events.start(_11);_7.started=true;}if(_7.started){_7.events.drag(_11);}};_7.mouseup=function(_12){_4.stopEvent(_4.fixEvent(_12));_7.end();};_7.click=function(_13){_4.stopEvent(_4.fixEvent(_13));};})();}}};});