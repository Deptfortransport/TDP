/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.gfx.shape"],["require","dojox.gfx._base"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.gfx.shape"]){_4._hasResource["dojox.gfx.shape"]=true;_4.provide("dojox.gfx.shape");_4.require("dojox.gfx._base");_4.declare("dojox.gfx.Shape",null,{constructor:function(){this.rawNode=null;this.shape=null;this.matrix=null;this.fillStyle=null;this.strokeStyle=null;this.bbox=null;this.parent=null;this.parentMatrix=null;},getNode:function(){return this.rawNode;},getShape:function(){return this.shape;},getTransform:function(){return this.matrix;},getFill:function(){return this.fillStyle;},getStroke:function(){return this.strokeStyle;},getParent:function(){return this.parent;},getBoundingBox:function(){return this.bbox;},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b){return null;}var m=this._getRealMatrix();var r=[];var g=_6.gfx.matrix;r.push(g.multiplyPoint(m,b.x,b.y));r.push(g.multiplyPoint(m,b.x+b.width,b.y));r.push(g.multiplyPoint(m,b.x+b.width,b.y+b.height));r.push(g.multiplyPoint(m,b.x,b.y+b.height));return r;},getEventSource:function(){return this.rawNode;},setShape:function(_b){this.shape=_6.gfx.makeParameters(this.shape,_b);this.bbox=null;return this;},setFill:function(_c){if(!_c){this.fillStyle=null;return this;}var f=null;if(typeof (_c)=="object"&&"type" in _c){switch(_c.type){case "linear":f=_6.gfx.makeParameters(_6.gfx.defaultLinearGradient,_c);break;case "radial":f=_6.gfx.makeParameters(_6.gfx.defaultRadialGradient,_c);break;case "pattern":f=_6.gfx.makeParameters(_6.gfx.defaultPattern,_c);break;}}else{f=_6.gfx.normalizeColor(_c);}this.fillStyle=f;return this;},setStroke:function(_e){if(!_e){this.strokeStyle=null;return this;}if(typeof _e=="string"||_4.isArray(_e)||_e instanceof _4.Color){_e={color:_e};}var s=this.strokeStyle=_6.gfx.makeParameters(_6.gfx.defaultStroke,_e);s.color=_6.gfx.normalizeColor(s.color);return this;},setTransform:function(_10){this.matrix=_6.gfx.matrix.clone(_10?_6.gfx.matrix.normalize(_10):_6.gfx.matrix.identity);return this._applyTransform();},_applyTransform:function(){return this;},moveToFront:function(){var p=this.getParent();if(p){p._moveChildToFront(this);this._moveToFront();}return this;},moveToBack:function(){var p=this.getParent();if(p){p._moveChildToBack(this);this._moveToBack();}return this;},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(_13){return _13?this.setTransform([this.matrix,_13]):this;},applyLeftTransform:function(_14){return _14?this.setTransform([_14,this.matrix]):this;},applyTransform:function(_15){return _15?this.setTransform([this.matrix,_15]):this;},removeShape:function(_16){if(this.parent){this.parent.remove(this,_16);}return this;},_setParent:function(_17,_18){this.parent=_17;return this._updateParentMatrix(_18);},_updateParentMatrix:function(_19){this.parentMatrix=_19?_6.gfx.matrix.clone(_19):null;return this._applyTransform();},_getRealMatrix:function(){var m=this.matrix;var p=this.parent;while(p){if(p.matrix){m=_6.gfx.matrix.multiply(p.matrix,m);}p=p.parent;}return m;}});_6.gfx.shape._eventsProcessing={connect:function(_1c,_1d,_1e){return arguments.length>2?_4.connect(this.getEventSource(),_1c,_1d,_1e):_4.connect(this.getEventSource(),_1c,_1d);},disconnect:function(_1f){_4.disconnect(_1f);}};_4.extend(_6.gfx.Shape,_6.gfx.shape._eventsProcessing);_6.gfx.shape.Container={_init:function(){this.children=[];},add:function(_20){var _21=_20.getParent();if(_21){_21.remove(_20,true);}this.children.push(_20);return _20._setParent(this,this._getRealMatrix());},remove:function(_22,_23){for(var i=0;i<this.children.length;++i){if(this.children[i]==_22){if(_23){}else{_22.parent=null;_22.parentMatrix=null;}this.children.splice(i,1);break;}}return this;},clear:function(){this.children=[];return this;},_moveChildToFront:function(_25){for(var i=0;i<this.children.length;++i){if(this.children[i]==_25){this.children.splice(i,1);this.children.push(_25);break;}}return this;},_moveChildToBack:function(_27){for(var i=0;i<this.children.length;++i){if(this.children[i]==_27){this.children.splice(i,1);this.children.unshift(_27);break;}}return this;}};_4.declare("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null;this._parent=null;this._nodes=[];this._events=[];},destroy:function(){_4.forEach(this._nodes,_4.destroy);this._nodes=[];_4.forEach(this._events,_4.disconnect);this._events=[];this.rawNode=null;if(_4.isIE){while(this._parent.lastChild){_4.destroy(this._parent.lastChild);}}else{this._parent.innerHTML="";}this._parent=null;},getEventSource:function(){return this.rawNode;},_getRealMatrix:function(){return null;},isLoaded:true,onLoad:function(_29){},whenLoaded:function(_2a,_2b){var f=_4.hitch(_2a,_2b);if(this.isLoaded){f(this);}else{var h=_4.connect(this,"onLoad",function(_2e){_4.disconnect(h);f(_2e);});}}});_4.extend(_6.gfx.shape.Surface,_6.gfx.shape._eventsProcessing);_4.declare("dojox.gfx.Point",null,{});_4.declare("dojox.gfx.Rectangle",null,{});_4.declare("dojox.gfx.shape.Rect",_6.gfx.Shape,{constructor:function(_2f){this.shape=_6.gfx.getDefault("Rect");this.rawNode=_2f;},getBoundingBox:function(){return this.shape;}});_4.declare("dojox.gfx.shape.Ellipse",_6.gfx.Shape,{constructor:function(_30){this.shape=_6.gfx.getDefault("Ellipse");this.rawNode=_30;},getBoundingBox:function(){if(!this.bbox){var _31=this.shape;this.bbox={x:_31.cx-_31.rx,y:_31.cy-_31.ry,width:2*_31.rx,height:2*_31.ry};}return this.bbox;}});_4.declare("dojox.gfx.shape.Circle",_6.gfx.Shape,{constructor:function(_32){this.shape=_6.gfx.getDefault("Circle");this.rawNode=_32;},getBoundingBox:function(){if(!this.bbox){var _33=this.shape;this.bbox={x:_33.cx-_33.r,y:_33.cy-_33.r,width:2*_33.r,height:2*_33.r};}return this.bbox;}});_4.declare("dojox.gfx.shape.Line",_6.gfx.Shape,{constructor:function(_34){this.shape=_6.gfx.getDefault("Line");this.rawNode=_34;},getBoundingBox:function(){if(!this.bbox){var _35=this.shape;this.bbox={x:Math.min(_35.x1,_35.x2),y:Math.min(_35.y1,_35.y2),width:Math.abs(_35.x2-_35.x1),height:Math.abs(_35.y2-_35.y1)};}return this.bbox;}});_4.declare("dojox.gfx.shape.Polyline",_6.gfx.Shape,{constructor:function(_36){this.shape=_6.gfx.getDefault("Polyline");this.rawNode=_36;},setShape:function(_37,_38){if(_37&&_37 instanceof Array){_6.gfx.Shape.prototype.setShape.call(this,{points:_37});if(_38&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{_6.gfx.Shape.prototype.setShape.call(this,_37);}return this;},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){var p=this.shape.points;var l=p.length;var t=p[0];var _3c={l:t.x,t:t.y,r:t.x,b:t.y};for(var i=1;i<l;++i){t=p[i];if(_3c.l>t.x){_3c.l=t.x;}if(_3c.r<t.x){_3c.r=t.x;}if(_3c.t>t.y){_3c.t=t.y;}if(_3c.b<t.y){_3c.b=t.y;}}this.bbox={x:_3c.l,y:_3c.t,width:_3c.r-_3c.l,height:_3c.b-_3c.t};}return this.bbox;}});_4.declare("dojox.gfx.shape.Image",_6.gfx.Shape,{constructor:function(_3e){this.shape=_6.gfx.getDefault("Image");this.rawNode=_3e;},getBoundingBox:function(){return this.shape;},setStroke:function(){return this;},setFill:function(){return this;}});_4.declare("dojox.gfx.shape.Text",_6.gfx.Shape,{constructor:function(_3f){this.fontStyle=null;this.shape=_6.gfx.getDefault("Text");this.rawNode=_3f;},getFont:function(){return this.fontStyle;},setFont:function(_40){this.fontStyle=typeof _40=="string"?_6.gfx.splitFontString(_40):_6.gfx.makeParameters(_6.gfx.defaultFont,_40);this._setFont();return this;}});_6.gfx.shape.Creator={createShape:function(_41){var gfx=_6.gfx;switch(_41.type){case gfx.defaultPath.type:return this.createPath(_41);case gfx.defaultRect.type:return this.createRect(_41);case gfx.defaultCircle.type:return this.createCircle(_41);case gfx.defaultEllipse.type:return this.createEllipse(_41);case gfx.defaultLine.type:return this.createLine(_41);case gfx.defaultPolyline.type:return this.createPolyline(_41);case gfx.defaultImage.type:return this.createImage(_41);case gfx.defaultText.type:return this.createText(_41);case gfx.defaultTextPath.type:return this.createTextPath(_41);}return null;},createGroup:function(){return this.createObject(_6.gfx.Group);},createRect:function(_43){return this.createObject(_6.gfx.Rect,_43);},createEllipse:function(_44){return this.createObject(_6.gfx.Ellipse,_44);},createCircle:function(_45){return this.createObject(_6.gfx.Circle,_45);},createLine:function(_46){return this.createObject(_6.gfx.Line,_46);},createPolyline:function(_47){return this.createObject(_6.gfx.Polyline,_47);},createImage:function(_48){return this.createObject(_6.gfx.Image,_48);},createText:function(_49){return this.createObject(_6.gfx.Text,_49);},createPath:function(_4a){return this.createObject(_6.gfx.Path,_4a);},createTextPath:function(_4b){return this.createObject(_6.gfx.TextPath,{}).setText(_4b);},createObject:function(_4c,_4d){return null;}};}}};});