/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.grid.compat._grid.selection"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.grid.compat._grid.selection"]){_4._hasResource["dojox.grid.compat._grid.selection"]=true;_4.provide("dojox.grid.compat._grid.selection");_4.declare("dojox.grid.selection",null,{constructor:function(_7){this.grid=_7;this.selected=[];},multiSelect:true,selected:null,updating:0,selectedIndex:-1,onCanSelect:function(_8){return this.grid.onCanSelect(_8);},onCanDeselect:function(_9){return this.grid.onCanDeselect(_9);},onSelected:function(_a){return this.grid.onSelected(_a);},onDeselected:function(_b){return this.grid.onDeselected(_b);},onChanging:function(){},onChanged:function(){return this.grid.onSelectionChanged();},isSelected:function(_c){return this.selected[_c];},getFirstSelected:function(){for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getNextSelected:function(_f){for(var i=_f+1,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getSelected:function(){var _12=[];for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_12.push(i);}}return _12;},getSelectedCount:function(){var c=0;for(var i=0;i<this.selected.length;i++){if(this.selected[i]){c++;}}return c;},beginUpdate:function(){if(this.updating==0){this.onChanging();}this.updating++;},endUpdate:function(){this.updating--;if(this.updating==0){this.onChanged();}},select:function(_17){this.unselectAll(_17);this.addToSelection(_17);},addToSelection:function(_18){_18=Number(_18);if(this.selected[_18]){this.selectedIndex=_18;}else{if(this.onCanSelect(_18)!==false){this.selectedIndex=_18;this.beginUpdate();this.selected[_18]=true;this.grid.onSelected(_18);this.endUpdate();}}},deselect:function(_19){_19=Number(_19);if(this.selectedIndex==_19){this.selectedIndex=-1;}if(this.selected[_19]){if(this.onCanDeselect(_19)===false){return;}this.beginUpdate();delete this.selected[_19];this.grid.onDeselected(_19);this.endUpdate();}},setSelected:function(_1a,_1b){this[(_1b?"addToSelection":"deselect")](_1a);},toggleSelect:function(_1c){this.setSelected(_1c,!this.selected[_1c]);},insert:function(_1d){this.selected.splice(_1d,0,false);if(this.selectedIndex>=_1d){this.selectedIndex++;}},remove:function(_1e){this.selected.splice(_1e,1);if(this.selectedIndex>=_1e){this.selectedIndex--;}},unselectAll:function(_1f){for(var i in this.selected){if((i!=_1f)&&(this.selected[i]===true)){this.deselect(i);}}},shiftSelect:function(_21,_22){var s=(_21>=0?_21:_22),e=_22;if(s>e){e=s;s=_22;}for(var i=s;i<=e;i++){this.addToSelection(i);}},clickSelect:function(_26,_27,_28){this.beginUpdate();if(!this.multiSelect){this.select(_26);}else{var _29=this.selectedIndex;if(!_27){this.unselectAll(_26);}if(_28){this.shiftSelect(_29,_26);}else{if(_27){this.toggleSelect(_26);}else{this.addToSelection(_26);}}}this.endUpdate();},clickSelectEvent:function(e){this.clickSelect(e.rowIndex,_4.dnd.getCopyKeyState(e),e.shiftKey);},clear:function(){this.beginUpdate();this.unselectAll();this.endUpdate();}});}}};});