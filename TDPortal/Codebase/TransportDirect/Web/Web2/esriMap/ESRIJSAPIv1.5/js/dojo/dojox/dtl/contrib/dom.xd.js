/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.dtl.contrib.dom"],["require","dojox.dtl.dom"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.dtl.contrib.dom"]){_4._hasResource["dojox.dtl.contrib.dom"]=true;_4.provide("dojox.dtl.contrib.dom");_4.require("dojox.dtl.dom");(function(){var dd=_6.dtl;var _8=dd.contrib.dom;var _9={render:function(){return this.contents;}};_8.StyleNode=_4.extend(function(_a){this.contents={};this._current={};this._styles=_a;for(var _b in _a){if(_a[_b].indexOf("{{")!=-1){var _c=new dd.Template(_a[_b]);}else{var _c=_4.delegate(_9);_c.contents=_a[_b];}this.contents[_b]=_c;}},{render:function(_d,_e){for(var _f in this.contents){var _10=this.contents[_f].render(_d);if(this._current[_f]!=_10){_4.style(_e.getParent(),_f,this._current[_f]=_10);}}return _e;},unrender:function(_11,_12){this._current={};return _12;},clone:function(_13){return new this.constructor(this._styles);}});_8.BufferNode=_4.extend(function(_14,_15){this.nodelist=_14;this.options=_15;},{_swap:function(_16,_17){if(!this.swapped&&this.parent.parentNode){if(_16=="node"){if((_17.nodeType==3&&!this.options.text)||(_17.nodeType==1&&!this.options.node)){return;}}else{if(_16=="class"){if(_16!="class"){return;}}}this.onAddNode&&_4.disconnect(this.onAddNode);this.onRemoveNode&&_4.disconnect(this.onRemoveNode);this.onChangeAttribute&&_4.disconnect(this.onChangeAttribute);this.onChangeData&&_4.disconnect(this.onChangeData);this.swapped=this.parent.cloneNode(true);this.parent.parentNode.replaceChild(this.swapped,this.parent);}},render:function(_18,_19){this.parent=_19.getParent();if(this.options.node){this.onAddNode=_4.connect(_19,"onAddNode",_4.hitch(this,"_swap","node"));this.onRemoveNode=_4.connect(_19,"onRemoveNode",_4.hitch(this,"_swap","node"));}if(this.options.text){this.onChangeData=_4.connect(_19,"onChangeData",_4.hitch(this,"_swap","node"));}if(this.options["class"]){this.onChangeAttribute=_4.connect(_19,"onChangeAttribute",_4.hitch(this,"_swap","class"));}_19=this.nodelist.render(_18,_19);if(this.swapped){this.swapped.parentNode.replaceChild(this.parent,this.swapped);_4.destroy(this.swapped);}else{this.onAddNode&&_4.disconnect(this.onAddNode);this.onRemoveNode&&_4.disconnect(this.onRemoveNode);this.onChangeAttribute&&_4.disconnect(this.onChangeAttribute);this.onChangeData&&_4.disconnect(this.onChangeData);}delete this.parent;delete this.swapped;return _19;},unrender:function(_1a,_1b){return this.nodelist.unrender(_1a,_1b);},clone:function(_1c){return new this.constructor(this.nodelist.clone(_1c),this.options);}});_4.mixin(_8,{buffer:function(_1d,_1e){var _1f=_1e.contents.split().slice(1);var _20={};var _21=false;for(var i=_1f.length;i--;){_21=true;_20[_1f[i]]=true;}if(!_21){_20.node=true;}var _23=_1d.parse(["endbuffer"]);_1d.next_token();return new _8.BufferNode(_23,_20);},html:function(_24,_25){_4.deprecated("{% html someVariable %}","Use {{ someVariable|safe }} instead");return _24.create_variable_node(_25.contents.slice(5)+"|safe");},style_:function(_26,_27){var _28={};_27=_27.contents.replace(/^style\s+/,"");var _29=_27.split(/\s*;\s*/g);for(var i=0,_2b;_2b=_29[i];i++){var _2c=_2b.split(/\s*:\s*/g);var key=_2c[0];var _2e=_4.trim(_2c[1]);if(_2e){_28[key]=_2e;}}return new _8.StyleNode(_28);}});dd.register.tags("dojox.dtl.contrib",{"dom":["html","attr:style","buffer"]});})();}}};});