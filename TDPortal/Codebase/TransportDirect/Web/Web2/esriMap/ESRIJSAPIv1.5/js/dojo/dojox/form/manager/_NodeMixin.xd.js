/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.form.manager._NodeMixin"],["require","dojox.form.manager._Mixin"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.form.manager._NodeMixin"]){_4._hasResource["dojox.form.manager._NodeMixin"]=true;_4.provide("dojox.form.manager._NodeMixin");_4.require("dojox.form.manager._Mixin");(function(){var fm=_6.form.manager,aa=fm.actionAdapter,_9=fm._keys,ce=fm.changeEvent=function(_b){var _c="onclick";switch(_b.tagName.toLowerCase()){case "textarea":_c="onkeyup";break;case "select":_c="onchange";break;case "input":switch(_b.type.toLowerCase()){case "text":case "password":_c="onkeyup";break;}break;}return _c;},_d=function(_e,_f){var _10=_4.attr(_e,"name");_f=_f||this.domNode;if(_10&&!(_10 in this.formWidgets)){for(var n=_e;n&&n!==_f;n=n.parentNode){if(_4.attr(n,"widgetId")&&_5.byNode(n) instanceof _5.form._FormWidget){return null;}}if(_e.tagName.toLowerCase()=="input"&&_e.type.toLowerCase()=="radio"){var a=this.formNodes[_10];a=a&&a.node;if(a&&_4.isArray(a)){a.push(_e);}else{this.formNodes[_10]={node:[_e],connections:[]};}}else{this.formNodes[_10]={node:_e,connections:[]};}}else{_10=null;}return _10;},_13=function(_14){var _15={};aa(function(_,n){var o=_4.attr(n,"observer");if(o&&typeof o=="string"){_4.forEach(o.split(","),function(o){o=_4.trim(o);if(o&&_4.isFunction(this[o])){_15[o]=1;}},this);}}).call(this,null,this.formNodes[_14].node);return _9(_15);},_1a=function(_1b,_1c){var t=this.formNodes[_1b],c=t.connections;if(c.length){_4.forEach(c,_4.disconnect);c=t.connections=[];}aa(function(_,n){var _21=ce(n);_4.forEach(_1c,function(o){c.push(_4.connect(n,_21,this,function(evt){if(this.watch){this[o](this.formNodeValue(_1b),_1b,n,evt);}}));},this);}).call(this,null,t.node);};_4.declare("dojox.form.manager._NodeMixin",null,{destroy:function(){for(var _24 in this.formNodes){_4.forEach(this.formNodes[_24].connections,_4.disconnect);}this.formNodes={};this.inherited(arguments);},registerNode:function(_25){if(typeof _25=="string"){_25=_4.byId(_25);}var _26=_d.call(this,_25);if(_26){_1a.call(this,_26,_13.call(this,_26));}return this;},unregisterNode:function(_27){if(_27 in this.formNodes){_4.forEach(this.formNodes[_27].connections,this.disconnect,this);delete this.formNodes[_27];}return this;},registerNodeDescendants:function(_28){if(typeof _28=="string"){_28=_4.byId(_28);}_4.query("input, select, textarea, button",_28).map(function(n){return _d.call(this,n,_28);},this).forEach(function(_2a){if(_2a){_1a.call(this,_2a,_13.call(this,_2a));}},this);return this;},unregisterNodeDescendants:function(_2b){if(typeof _2b=="string"){_2b=_4.byId(_2b);}_4.query("input, select, textarea, button",_2b).map(function(n){return _4.attr(_2b,"name")||null;}).forEach(function(_2d){if(_2d){this.unregisterNode(_2d);}},this);return this;},formNodeValue:function(_2e,_2f){var _30=arguments.length==2&&_2f!==undefined,_31;if(typeof _2e=="string"){_2e=this.formNodes[_2e];if(_2e){_2e=_2e.node;}}if(!_2e){return null;}if(_4.isArray(_2e)){if(_30){_4.forEach(_2e,function(_32){_32.checked="";});_4.forEach(_2e,function(_33){_33.checked=_33.value===_2f?"checked":"";});return this;}_4.some(_2e,function(_34){if(_34.checked){_31=_34;return true;}return false;});return _31?_31.value:"";}switch(_2e.tagName.toLowerCase()){case "select":if(_2e.multiple){if(_30){if(_4.isArray(_2f)){var _35={};_4.forEach(_2f,function(v){_35[v]=1;});_4.query("> option",_2e).forEach(function(opt){opt.selected=opt.value in _35;});return this;}_4.query("> option",_2e).forEach(function(opt){opt.selected=opt.value===_2f;});return this;}var _31=_4.query("> option",_2e).filter(function(opt){return opt.selected;}).map(function(opt){return opt.value;});return _31.length==1?_31[0]:_31;}if(_30){_4.query("> option",_2e).forEach(function(opt){opt.selected=opt.value===_2f;});return this;}return _2e.value||"";case "button":if(_30){_2e.innerHTML=""+_2f;return this;}return _2e.innerHTML;case "input":if(_2e.type.toLowerCase()=="checkbox"){if(_30){_2e.checked=_2f?"checked":"";return this;}return Boolean(_2e.checked);}}if(_30){_2e.value=""+_2f;return this;}return _2e.value;},inspectFormNodes:function(_3c,_3d,_3e){var _3f,_40={};if(_3d){if(_4.isArray(_3d)){_4.forEach(_3d,function(_41){if(_41 in this.formNodes){_40[_41]=_3c.call(this,_41,this.formNodes[_41].node,_3e);}},this);}else{for(_3f in _3d){if(_3f in this.formNodes){_40[_3f]=_3c.call(this,_3f,this.formNodes[_3f].node,_3d[_3f]);}}}}else{for(_3f in this.formNodes){_40[_3f]=_3c.call(this,_3f,this.formNodes[_3f].node,_3e);}}return _40;}});})();}}};});