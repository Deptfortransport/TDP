/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.form._SelectStackMixin"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.form._SelectStackMixin"]){_4._hasResource["dojox.form._SelectStackMixin"]=true;_4.provide("dojox.form._SelectStackMixin");_4.declare("dojox.form._SelectStackMixin",null,{stackId:"",stackPrefix:"",_paneIdFromOption:function(_7){return (this.stackPrefix||"")+_7;},_optionValFromPane:function(id){var sp=this.stackPrefix;if(sp&&id.indexOf(sp)===0){return id.substring(sp.length);}return id;},_togglePane:function(_a,_b){if(_a._shown!=undefined&&_a._shown==_b){return;}var _c=_4.filter(_a.getDescendants(),"return item.name;");if(!_b){_d={};_4.forEach(_c,function(w){_d[w.id]=w.disabled;w.attr("disabled",true);});_a._savedStates=_d;}else{var _d=_a._savedStates||{};_4.forEach(_c,function(w){var _10=_d[w.id];if(_10==undefined){_10=false;}w.attr("disabled",_10);});delete _a._savedStates;}_a._shown=_b;},onAddChild:function(_11,_12){if(!this._panes[_11.id]){this._panes[_11.id]=_11;this.addOption({value:this._optionValFromPane(_11.id),label:_11.title});}if(!_11.onShow||!_11.onHide||_11._shown==undefined){_11.onShow=_4.hitch(this,"_togglePane",_11,true);_11.onHide=_4.hitch(this,"_togglePane",_11,false);_11.onHide();}},onRemoveChild:function(_13){if(this._panes[_13.id]){delete this._panes[_13.id];this.removeOption(this._optionValFromPane(_13.id));}},onSelectChild:function(_14){this._setValueAttr(this._optionValFromPane(_14.id));},onStartup:function(_15){var _16=_15.selected;this.addOption(_4.filter(_4.map(_15.children,function(c){var v=this._optionValFromPane(c.id);var _19=null;if(!this._panes[c.id]){this._panes[c.id]=c;_19={value:v,label:c.title};}if(!c.onShow||!c.onHide||c._shown==undefined){c.onShow=_4.hitch(this,"_togglePane",c,true);c.onHide=_4.hitch(this,"_togglePane",c,false);c.onHide();}if(this._savedValue&&v){_16=c;}return _19;},this),function(i){return i;}));delete this._savedValue;this.onSelectChild(_16);if(!_16._shown){this._togglePane(_16,true);}},postMixInProperties:function(){this._savedValue=this.value;this.inherited(arguments);this.connect(this,"onChange","_handleSelfOnChange");},postCreate:function(){this.inherited(arguments);this._panes={};this._subscriptions=[_4.subscribe(this.stackId+"-startup",this,"onStartup"),_4.subscribe(this.stackId+"-addChild",this,"onAddChild"),_4.subscribe(this.stackId+"-removeChild",this,"onRemoveChild"),_4.subscribe(this.stackId+"-selectChild",this,"onSelectChild")];var _1b=_5.byId(this.stackId);if(_1b&&_1b._started){this.onStartup({children:_1b.getChildren(),selected:_1b.selectedChildWidget});}},destroy:function(){_4.forEach(this._subscriptions,_4.unsubscribe);delete this._panes;this.inherited("destroy",arguments);},_handleSelfOnChange:function(val){var _1d=this._panes[this._paneIdFromOption(val)];if(_1d){_5.byId(this.stackId).selectChild(_1d);}}});}}};});