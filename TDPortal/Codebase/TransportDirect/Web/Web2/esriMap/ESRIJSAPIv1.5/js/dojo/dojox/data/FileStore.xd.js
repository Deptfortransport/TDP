/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.data.FileStore"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.data.FileStore"]){_4._hasResource["dojox.data.FileStore"]=true;_4.provide("dojox.data.FileStore");_4.declare("dojox.data.FileStore",null,{constructor:function(_7){if(_7&&_7.label){this.label=_7.label;}if(_7&&_7.url){this.url=_7.url;}if(_7&&_7.options){if(_4.isArray(_7.options)){this.options=_7.options;}else{if(_4.isString(_7.options)){this.options=_7.options.split(",");}}}if(_7&&_7.pathAsQueryParam){this.pathAsQueryParam=true;}},url:"",_storeRef:"_S",label:"name",_identifier:"path",_attributes:["children","directory","name","path","modified","size","parentDir"],pathSeparator:"/",options:[],_assertIsItem:function(_8){if(!this.isItem(_8)){throw new Error("dojox.data.FileStore: a function was passed an item argument that was not an item");}},_assertIsAttribute:function(_9){if(typeof _9!=="string"){throw new Error("dojox.data.FileStore: a function was passed an attribute argument that was not an attribute name string");}},pathAsQueryParam:false,getFeatures:function(){return {"dojo.data.api.Read":true,"dojo.data.api.Identity":true};},getValue:function(_a,_b,_c){var _d=this.getValues(_a,_b);var _e=_c;if(_d&&_d.length>0){_e=_d[0];}return _e;},getAttributes:function(_f){return this._attributes;},hasAttribute:function(_10,_11){if(this.getValue(_10,_11)){return true;}return false;},getIdentity:function(_12){return this.getValue(_12,this._identifier);},getIdentityAttributes:function(_13){return [this._identifier];},isItemLoaded:function(_14){var _15=this.isItem(_14);if(_15&&typeof _14._loaded=="boolean"&&!_14._loaded){_15=false;}return _15;},loadItem:function(_16){var _17=_16.item;var _18=this;var _19=_16.scope||_4.global;var _1a={};if(this.options.length>0){_1a.options=_4.toJson(this.options);}if(this.pathAsQueryParam){_1a.path=_17.parentPath+this.pathSeparator+_17.name;}var _1b={url:this.pathAsQueryParam?this.url:this.url+"/"+_17.parentPath+"/"+_17.name,handleAs:"json-comment-optional",content:_1a,preventCache:true};var _1c=_4.xhrGet(_1b);_1c.addErrback(function(_1d){if(_16.onError){_16.onError.call(_19,_1d);}});_1c.addCallback(function(_1e){delete _17.parentPath;delete _17._loaded;_4.mixin(_17,_1e);_18._processItem(_17);if(_16.onItem){_16.onItem.call(_19,_17);}});},getLabel:function(_1f){return this.getValue(_1f,this.label);},getLabelAttributes:function(_20){return [this.label];},containsValue:function(_21,_22,_23){var _24=this.getValues(_21,_22);for(var i=0;i<_24.length;i++){if(_24[i]==_23){return true;}}return false;},getValues:function(_26,_27){this._assertIsItem(_26);this._assertIsAttribute(_27);var _28=_26[_27];if(typeof _28!=="undefined"&&!_4.isArray(_28)){_28=[_28];}else{if(typeof _28==="undefined"){_28=[];}}return _28;},isItem:function(_29){if(_29&&_29[this._storeRef]===this){return true;}return false;},close:function(_2a){},fetch:function(_2b){_2b=_2b||{};if(!_2b.store){_2b.store=this;}var _2c=this;var _2d=_2b.scope||_4.global;var _2e={};if(_2b.query){_2e.query=_4.toJson(_2b.query);}if(_2b.sort){_2e.sort=_4.toJson(_2b.sort);}if(_2b.queryOptions){_2e.queryOptions=_4.toJson(_2b.queryOptions);}if(typeof _2b.start=="number"){_2e.start=""+_2b.start;}if(typeof _2b.count=="number"){_2e.count=""+_2b.count;}if(this.options.length>0){_2e.options=_4.toJson(this.options);}var _2f={url:this.url,preventCache:true,handleAs:"json-comment-optional",content:_2e};var _30=_4.xhrGet(_2f);_30.addCallback(function(_31){_2c._processResult(_31,_2b);});_30.addErrback(function(_32){if(_2b.onError){_2b.onError.call(_2d,_32,_2b);}});},fetchItemByIdentity:function(_33){var _34=_33.identity;var _35=this;var _36=_33.scope||_4.global;var _37={};if(this.options.length>0){_37.options=_4.toJson(this.options);}if(this.pathAsQueryParam){_37.path=_34;}var _38={url:this.pathAsQueryParam?this.url:this.url+"/"+_34,handleAs:"json-comment-optional",content:_37,preventCache:true};var _39=_4.xhrGet(_38);_39.addErrback(function(_3a){if(_33.onError){_33.onError.call(_36,_3a);}});_39.addCallback(function(_3b){var _3c=_35._processItem(_3b);if(_33.onItem){_33.onItem.call(_36,_3c);}});},_processResult:function(_3d,_3e){var _3f=_3e.scope||_4.global;try{if(_3d.pathSeparator){this.pathSeparator=_3d.pathSeparator;}if(_3e.onBegin){_3e.onBegin.call(_3f,_3d.total,_3e);}var _40=this._processItemArray(_3d.items);if(_3e.onItem){var i;for(i=0;i<_40.length;i++){_3e.onItem.call(_3f,_40[i],_3e);}_40=null;}if(_3e.onComplete){_3e.onComplete.call(_3f,_40,_3e);}}catch(e){if(_3e.onError){_3e.onError.call(_3f,e,_3e);}else{console.debug(e);}}},_processItemArray:function(_42){var i;for(i=0;i<_42.length;i++){this._processItem(_42[i]);}return _42;},_processItem:function(_44){if(!_44){return null;}_44[this._storeRef]=this;if(_44.children&&_44.directory){if(_4.isArray(_44.children)){var _45=_44.children;var i;for(i=0;i<_45.length;i++){var _47=_45[i];if(_4.isObject(_47)){_45[i]=this._processItem(_47);}else{_45[i]={name:_47,_loaded:false,parentPath:_44.path};_45[i][this._storeRef]=this;}}}else{delete _44.children;}}return _44;}});}}};});