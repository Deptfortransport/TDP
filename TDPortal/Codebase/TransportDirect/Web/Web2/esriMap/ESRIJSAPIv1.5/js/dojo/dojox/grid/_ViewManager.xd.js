/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.grid._ViewManager"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.grid._ViewManager"]){_4._hasResource["dojox.grid._ViewManager"]=true;_4.provide("dojox.grid._ViewManager");_4.declare("dojox.grid._ViewManager",null,{constructor:function(_7){this.grid=_7;},defaultWidth:200,views:[],resize:function(){this.onEach("resize");},render:function(){this.onEach("render");},addView:function(_8){_8.idx=this.views.length;this.views.push(_8);},destroyViews:function(){for(var i=0,v;v=this.views[i];i++){v.destroy();}this.views=[];},getContentNodes:function(){var _b=[];for(var i=0,v;v=this.views[i];i++){_b.push(v.contentNode);}return _b;},forEach:function(_e){for(var i=0,v;v=this.views[i];i++){_e(v,i);}},onEach:function(_11,_12){_12=_12||[];for(var i=0,v;v=this.views[i];i++){if(_11 in v){v[_11].apply(v,_12);}}},normalizeHeaderNodeHeight:function(){var _15=[];for(var i=0,v;(v=this.views[i]);i++){if(v.headerContentNode.firstChild){_15.push(v.headerContentNode);}}this.normalizeRowNodeHeights(_15);},normalizeRowNodeHeights:function(_18){var h=0;for(var i=0,n,o;(n=_18[i]);i++){h=Math.max(h,_4.marginBox(n.firstChild).h);}h=(h>=0?h:0);for(var i=0,n;(n=_18[i]);i++){_4.marginBox(n.firstChild,{h:h});}if(_18&&_18[0]&&_18[0].parentNode){_18[0].parentNode.offsetHeight;}},resetHeaderNodeHeight:function(){for(var i=0,v,n;(v=this.views[i]);i++){n=v.headerContentNode.firstChild;if(n){n.style.height="";}}},renormalizeRow:function(_20){var _21=[];for(var i=0,v,n;(v=this.views[i])&&(n=v.getRowNode(_20));i++){n.firstChild.style.height="";_21.push(n);}this.normalizeRowNodeHeights(_21);},getViewWidth:function(_25){return this.views[_25].getWidth()||this.defaultWidth;},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(_26){_26.headerContentNode.style.height="";});var h=0;this.forEach(function(_28){h=Math.max(_28.headerNode.offsetHeight,h);});return h;},measureContent:function(){var h=0;this.forEach(function(_2a){h=Math.max(_2a.domNode.offsetHeight,h);});return h;},findClient:function(_2b){var c=this.grid.elasticView||-1;if(c<0){for(var i=1,v;(v=this.views[i]);i++){if(v.viewWidth){for(i=1;(v=this.views[i]);i++){if(!v.viewWidth){c=i;break;}}break;}}}if(c<0){c=Math.floor(this.views.length/2);}return c;},arrange:function(l,w){var i,v,vw,len=this.views.length;var c=(w<=0?len:this.findClient());var _36=function(v,l){var ds=v.domNode.style;var hs=v.headerNode.style;if(!_4._isBodyLtr()){ds.right=l+"px";hs.right=l+"px";}else{ds.left=l+"px";hs.left=l+"px";}ds.top=0+"px";hs.top=0;};for(i=0;(v=this.views[i])&&(i<c);i++){vw=this.getViewWidth(i);v.setSize(vw,0);_36(v,l);if(v.headerContentNode&&v.headerContentNode.firstChild){vw=v.getColumnsWidth()+v.getScrollbarWidth();}else{vw=v.domNode.offsetWidth;}l+=vw;}i++;var r=w;for(var j=len-1;(v=this.views[j])&&(i<=j);j--){vw=this.getViewWidth(j);v.setSize(vw,0);vw=v.domNode.offsetWidth;r-=vw;_36(v,r);}if(c<len){v=this.views[c];vw=Math.max(1,r-l);v.setSize(vw+"px",0);_36(v,l);}return l;},renderRow:function(_3d,_3e){var _3f=[];for(var i=0,v,n,_43;(v=this.views[i])&&(n=_3e[i]);i++){_43=v.renderRow(_3d);n.appendChild(_43);_3f.push(_43);}this.normalizeRowNodeHeights(_3f);},rowRemoved:function(_44){this.onEach("rowRemoved",[_44]);},updateRow:function(_45){for(var i=0,v;v=this.views[i];i++){v.updateRow(_45);}this.renormalizeRow(_45);},updateRowStyles:function(_48){this.onEach("updateRowStyles",[_48]);},setScrollTop:function(_49){var top=_49;for(var i=0,v;v=this.views[i];i++){top=v.setScrollTop(_49);if(_4.isIE&&v.headerNode&&v.scrollboxNode){v.headerNode.scrollLeft=v.scrollboxNode.scrollLeft;}}return top;},getFirstScrollingView:function(){for(var i=0,v;(v=this.views[i]);i++){if(v.hasHScrollbar()||v.hasVScrollbar()){return v;}}}});}}};});