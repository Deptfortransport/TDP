/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit.form.FilteringSelect"],["require","dijit.form.ComboBox"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit.form.FilteringSelect"]){_4._hasResource["dijit.form.FilteringSelect"]=true;_4.provide("dijit.form.FilteringSelect");_4.require("dijit.form.ComboBox");_4.declare("dijit.form.FilteringSelect",[_5.form.MappedTextBox,_5.form.ComboBoxMixin],{_isvalid:true,required:true,_lastDisplayedValue:"",isValid:function(){return this._isvalid||(!this.required&&this.attr("displayedValue")=="");},_callbackSetLabel:function(_7,_8,_9){if((_8&&_8.query[this.searchAttr]!=this._lastQuery)||(!_8&&_7.length&&this.store.getIdentity(_7[0])!=this._lastQuery)){return;}if(!_7.length){this.valueNode.value="";_5.form.TextBox.superclass._setValueAttr.call(this,"",_9||(_9===undefined&&!this._focused));this._isvalid=false;this.validate(this._focused);this.item=null;}else{this._setValueFromItem(_7[0],_9);}},_openResultList:function(_a,_b){if(_b.query[this.searchAttr]!=this._lastQuery){return;}this._isvalid=_a.length!=0;this.validate(true);_5.form.ComboBoxMixin.prototype._openResultList.apply(this,arguments);},_getValueAttr:function(){return this.valueNode.value;},_getValueField:function(){return "value";},_setValue:function(_c,_d,_e){this.valueNode.value=_c;_5.form.FilteringSelect.superclass._setValueAttr.call(this,_c,_e,_d);this._lastDisplayedValue=_d;},_setValueAttr:function(_f,_10){if(!this._onChangeActive){_10=null;}this._lastQuery=_f;if(_f===null||_f===""){this._setDisplayedValueAttr("",_10);return;}var _11=this;var _12=function(_13,_14){if(_13){if(_11.store.isItemLoaded(_13)){_11._callbackSetLabel([_13],undefined,_14);}else{_11.store.loadItem({item:_13,onItem:function(_15,_16){_11._callbackSetLabel(_15,_16,_14);}});}}else{_11._isvalid=false;_11.validate(false);}};this.store.fetchItemByIdentity({identity:_f,onItem:function(_17){_12(_17,_10);}});},_setValueFromItem:function(_18,_19){this._isvalid=true;this.item=_18;this._setValue(this.store.getIdentity(_18),this.labelFunc(_18,this.store),_19);},labelFunc:function(_1a,_1b){return _1b.getValue(_1a,this.searchAttr);},_doSelect:function(tgt){this._setValueFromItem(tgt.item,true);},_setDisplayedValueAttr:function(_1d,_1e){if(!this._created){_1e=false;}if(this.store){var _1f=_4.clone(this.query);this._lastQuery=_1f[this.searchAttr]=_1d.replace(/([\\\*\?])/g,"\\$1");this.textbox.value=_1d;this._lastDisplayedValue=_1d;var _20=this;var _21={query:_1f,queryOptions:{ignoreCase:this.ignoreCase,deep:true},onComplete:function(_22,_23){_4.hitch(_20,"_callbackSetLabel")(_22,_23,_1e);},onError:function(_24){console.error("dijit.form.FilteringSelect: "+_24);_4.hitch(_20,"_setValue")("",_1d,false);}};_4.mixin(_21,this.fetchProperties);this.store.fetch(_21);}},postMixInProperties:function(){this.inherited(arguments);this._isvalid=!this.required;},undo:function(){this.attr("displayedValue",this._lastDisplayedValue);}});}}};});