/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.grid.Selection"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.grid.Selection"]){_4._hasResource["dojox.grid.Selection"]=true;_4.provide("dojox.grid.Selection");_4.declare("dojox.grid.Selection",null,{constructor:function(_7){this.grid=_7;this.selected=[];this.setMode(_7.selectionMode);},mode:"extended",selected:null,updating:0,selectedIndex:-1,setMode:function(_8){if(this.selected.length){this.deselectAll();}if(_8!="extended"&&_8!="multiple"&&_8!="single"&&_8!="none"){this.mode="extended";}else{this.mode=_8;}},onCanSelect:function(_9){return this.grid.onCanSelect(_9);},onCanDeselect:function(_a){return this.grid.onCanDeselect(_a);},onSelected:function(_b){},onDeselected:function(_c){},onChanging:function(){},onChanged:function(){},isSelected:function(_d){if(this.mode=="none"){return false;}return this.selected[_d];},getFirstSelected:function(){if(!this.selected.length||this.mode=="none"){return -1;}for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getNextSelected:function(_10){if(this.mode=="none"){return -1;}for(var i=_10+1,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getSelected:function(){var _13=[];for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_13.push(i);}}return _13;},getSelectedCount:function(){var c=0;for(var i=0;i<this.selected.length;i++){if(this.selected[i]){c++;}}return c;},_beginUpdate:function(){if(this.updating==0){this.onChanging();}this.updating++;},_endUpdate:function(){this.updating--;if(this.updating==0){this.onChanged();}},select:function(_18){if(this.mode=="none"){return;}if(this.mode!="multiple"){this.deselectAll(_18);this.addToSelection(_18);}else{this.toggleSelect(_18);}},addToSelection:function(_19){if(this.mode=="none"){return;}_19=Number(_19);if(this.selected[_19]){this.selectedIndex=_19;}else{if(this.onCanSelect(_19)!==false){this.selectedIndex=_19;this._beginUpdate();this.selected[_19]=true;this.onSelected(_19);this._endUpdate();}}},deselect:function(_1a){if(this.mode=="none"){return;}_1a=Number(_1a);if(this.selectedIndex==_1a){this.selectedIndex=-1;}if(this.selected[_1a]){if(this.onCanDeselect(_1a)===false){return;}this._beginUpdate();delete this.selected[_1a];this.onDeselected(_1a);this._endUpdate();}},setSelected:function(_1b,_1c){this[(_1c?"addToSelection":"deselect")](_1b);},toggleSelect:function(_1d){this.setSelected(_1d,!this.selected[_1d]);},_range:function(_1e,_1f,_20){var s=(_1e>=0?_1e:_1f),e=_1f;if(s>e){e=s;s=_1f;}for(var i=s;i<=e;i++){_20(i);}},selectRange:function(_24,_25){this._range(_24,_25,_4.hitch(this,"addToSelection"));},deselectRange:function(_26,_27){this._range(_26,_27,_4.hitch(this,"deselect"));},insert:function(_28){this.selected.splice(_28,0,false);if(this.selectedIndex>=_28){this.selectedIndex++;}},remove:function(_29){this.selected.splice(_29,1);if(this.selectedIndex>=_29){this.selectedIndex--;}},deselectAll:function(_2a){for(var i in this.selected){if((i!=_2a)&&(this.selected[i]===true)){this.deselect(i);}}},clickSelect:function(_2c,_2d,_2e){if(this.mode=="none"){return;}this._beginUpdate();if(this.mode!="extended"){this.select(_2c);}else{var _2f=this.selectedIndex;if(!_2d){this.deselectAll(_2c);}if(_2e){this.selectRange(_2f,_2c);}else{if(_2d){this.toggleSelect(_2c);}else{this.addToSelection(_2c);}}}this._endUpdate();},clickSelectEvent:function(e){this.clickSelect(e.rowIndex,_4.dnd.getCopyKeyState(e),e.shiftKey);},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate();}});}}};});