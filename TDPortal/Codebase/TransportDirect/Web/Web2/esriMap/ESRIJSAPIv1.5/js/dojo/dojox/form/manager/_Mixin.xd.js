/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.form.manager._Mixin"],["require","dijit._Widget"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.form.manager._Mixin"]){_4._hasResource["dojox.form.manager._Mixin"]=true;_4.provide("dojox.form.manager._Mixin");_4.require("dijit._Widget");(function(){var fm=_6.form.manager,aa=fm.actionAdapter=function(_9){return function(_a,_b,_c){if(_4.isArray(_b)){_4.forEach(_b,function(_d){_9.call(this,_a,_d,_c);},this);}else{_9.apply(this,arguments);}};},ia=fm.inspectorAdapter=function(_f){return function(_10,_11,_12){return _f.call(this,_10,_4.isArray(_11)?_11[0]:_11,_12);};},_13={domNode:1,containerNode:1,srcNodeRef:1,bgIframe:1},_14=fm._keys=function(o){var _16=[],key;for(key in o){if(o.hasOwnProperty(key)){_16.push(key);}}return _16;},_18=function(_19){var _1a=_19.attr("name");if(_1a&&_19 instanceof _5.form._FormWidget){if(_1a in this.formWidgets){var a=this.formWidgets[_1a].widget;if(_4.isArray(a)){a.push(_19);}else{this.formWidgets[_1a].widget=[a,_19];}}else{this.formWidgets[_1a]={widget:_19,connections:[]};}}else{_1a=null;}return _1a;},_1c=function(_1d){var _1e={};aa(function(_,w){var o=w.attr("observer");if(o&&typeof o=="string"){_4.forEach(o.split(","),function(o){o=_4.trim(o);if(o&&_4.isFunction(this[o])){_1e[o]=1;}},this);}}).call(this,null,this.formWidgets[_1d].widget);return _14(_1e);},_23=function(_24,_25){var t=this.formWidgets[_24],w=t.widget,c=t.connections;if(c.length){_4.forEach(c,_4.disconnect);c=t.connections=[];}if(_4.isArray(w)){_4.forEach(w,function(w){_4.forEach(_25,function(o){c.push(_4.connect(w,"onChange",this,function(evt){if(this.watch&&_4.attr(w.focusNode,"checked")){this[o](w.attr("value"),_24,w,evt);}}));},this);},this);}else{var _2c=w.declaredClass=="dijit.form.Button"?"onClick":"onChange";_4.forEach(_25,function(o){c.push(_4.connect(w,_2c,this,function(evt){if(this.watch){this[o](w.attr("value"),_24,w,evt);}}));},this);}};_4.declare("dojox.form.manager._Mixin",null,{watch:true,startup:function(){if(this._started){return;}this.formWidgets={};this.formNodes={};this.registerWidgetDescendants(this);this.inherited(arguments);},destroy:function(){for(var _2f in this.formWidgets){_4.forEach(this.formWidgets[_2f].connections,_4.disconnect);}this.formWidgets={};this.inherited(arguments);},registerWidget:function(_30){if(typeof _30=="string"){_30=_5.byId(_30);}else{if(_30.tagName&&_30.cloneNode){_30=_5.byNode(_30);}}var _31=_18.call(this,_30);if(_31){_23.call(this,_31,_1c.call(this,_31));}return this;},unregisterWidget:function(_32){if(_32 in this.formWidgets){_4.forEach(this.formWidgets[_32].connections,this.disconnect,this);delete this.formWidgets[_32];}return this;},registerWidgetDescendants:function(_33){if(typeof _33=="string"){_33=_5.byId(_33);}else{if(_33.tagName&&_33.cloneNode){_33=_5.byNode(_33);}}var _34=_4.map(_33.getDescendants(),_18,this);_4.forEach(_34,function(_35){if(_35){_23.call(this,_35,_1c.call(this,_35));}},this);return this.registerNodeDescendants?this.registerNodeDescendants(_33.domNode):this;},unregisterWidgetDescendants:function(_36){if(typeof _36=="string"){_36=_5.byId(_36);}else{if(_36.tagName&&_36.cloneNode){_36=_5.byNode(_36);}}_4.forEach(_4.map(_36.getDescendants(),function(w){return w instanceof _5.form._FormWidget&&w.attr("name")||null;}),function(_38){if(_38){this.unregisterNode(_38);}},this);return this.unregisterNodeDescendants?this.unregisterNodeDescendants(_36.domNode):this;},formWidgetValue:function(_39,_3a){var _3b=arguments.length==2&&_3a!==undefined,_3c;if(typeof _39=="string"){_39=this.formWidgets[_39];if(_39){_39=_39.widget;}}if(!_39){return null;}if(_4.isArray(_39)){if(_3b){_4.forEach(_39,function(_3d){_3d.attr("checked",false);});_4.forEach(_39,function(_3e){_3e.attr("checked",_3e.attr("value")===_3a);});return this;}_4.some(_39,function(_3f){if(_4.attr(_3f.focusNode,"checked")){_3c=_3f;return true;}return false;});return _3c?_3c.attr("value"):"";}if(_3b){_39.attr("value",_3a);return this;}return _39.attr("value");},formPointValue:function(_40,_41){if(_40&&typeof _40=="string"){_40=this[_40];}if(!_40||!_40.tagName||!_40.cloneNode){return null;}if(!_4.hasClass(_40,"dojoFormValue")){return null;}if(arguments.length==2&&_41!==undefined){_40.innerHTML=_41;return this;}return _40.innerHTML;},inspectFormWidgets:function(_42,_43,_44){var _45,_46={};if(_43){if(_4.isArray(_43)){_4.forEach(_43,function(_47){if(_47 in this.formWidgets){_46[_47]=_42.call(this,_47,this.formWidgets[_47].widget,_44);}},this);}else{for(_45 in _43){if(_45 in this.formWidgets){_46[_45]=_42.call(this,_45,this.formWidgets[_45].widget,_43[_45]);}}}}else{for(_45 in this.formWidgets){_46[_45]=_42.call(this,_45,this.formWidgets[_45].widget,_44);}}return _46;},inspectAttachedPoints:function(_48,_49,_4a){var _4b,_4c={};if(_49){if(_4.isArray(_49)){_4.forEach(_49,function(_4d){var _4e=this[_4d];if(_4e&&_4e.tagName&&_4e.cloneNode){_4c[_4d]=_48.call(this,_4d,_4e,_4a);}},this);}else{for(_4b in _49){var _4f=this[_4b];if(_4f&&_4f.tagName&&_4f.cloneNode){_4c[_4b]=_48.call(this,_4b,_4f,_49[_4b]);}}}}else{for(_4b in this){if(!(_4b in _13)){var _4f=this[_4b];if(_4f&&_4f.tagName&&_4f.cloneNode){_4c[_4b]=_48.call(this,_4b,_4f,_4a);}}}}return _4c;},inspect:function(_50,_51,_52){var _53=this.inspectFormWidgets(function(_54,_55,_56){if(_4.isArray(_55)){return _50.call(this,_54,_4.map(_55,function(w){return w.domNode;}),_56);}return _50.call(this,_54,_55.domNode,_56);},_51,_52);if(this.inspectFormNodes){_4.mixin(_53,this.inspectFormNodes(_50,_51,_52));}return _4.mixin(_53,this.inspectAttachedPoints(_50,_51,_52));}});})();_4.extend(_5._Widget,{observer:""});}}};});