/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.json.schema"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.json.schema"]){_4._hasResource["dojox.json.schema"]=true;_4.provide("dojox.json.schema");_6.json.schema.validate=function(_7,_8){return this._validate(_7,_8,false);};_6.json.schema.checkPropertyChange=function(_9,_a){return this._validate(_9,_a,true);};_6.json.schema.mustBeValid=function(_b){if(!_b.valid){throw new Error(_4.map(_b.errors,function(_c){return _c.property+" "+_c.message;}).join(","));}};_6.json.schema._validate=function(_d,_e,_f){var _10=[];function _11(_12,_13,_14,i){if(typeof _13!="object"){return null;}_14+=_14?typeof i=="number"?"["+i+"]":typeof i=="undefined"?"":"."+i:i;function _16(_17){_10.push({property:_14,message:_17});};if(_f&&_13.readonly){_16("is a readonly field, it can not be changed");}if(_13 instanceof Array){if(!(_12 instanceof Array)){return [{property:_14,message:"An array tuple is required"}];}for(i=0;i<_13.length;i++){_10.concat(_11(_12[i],_13[i],_14,i));}return _10;}if(_13["extends"]){_11(_12,_13["extends"],_14,i);}function _18(_19,_1a){if(_19){if(typeof _19=="string"&&_19!="any"&&(_19=="null"?_1a!==null:typeof _1a!=_19)&&!(_1a instanceof Array&&_19=="array")&&!(_19=="integer"&&_1a%1===0)){return [{property:_14,message:(typeof _1a)+" value found, but a "+_19+" is required"}];}if(_19 instanceof Array){var _1b=[];for(var j=0;j<_19.length;j++){if(!(_1b=_18(_19[j],_1a)).length){break;}}if(_1b.length){return _1b;}}else{if(typeof _19=="object"){_11(_1a,_19,_14);}}}return [];};if(_12!==null){if(_12===undefined){if(!_13.optional){_16("is missing and it is not optional");}}else{_10=_10.concat(_18(_13.type,_12));if(_13.disallow&&!_18(_13.disallow,_12).length){_16(" disallowed value was matched");}if(_12 instanceof Array){if(_13.items){for(i=0,l=_12.length;i<l;i++){_10.concat(_11(_12[i],_13.items,_14,i));}}if(_13.minItems&&_12.length<_13.minItems){_16("There must be a minimum of "+_13.minItems+" in the array");}if(_13.maxItems&&_12.length>_13.maxItems){_16("There must be a maximum of "+_13.maxItems+" in the array");}}else{if(_13.properties&&typeof _12=="object"){_10.concat(_1d(_12,_13.properties,_14,_13.additionalProperties));}}if(_13.pattern&&typeof _12=="string"&&!_12.match(_13.pattern)){_16("does not match the regex pattern "+_13.pattern);}if(_13.maxLength&&typeof _12=="string"&&_12.length>_13.maxLength){_16("may only be "+_13.maxLength+" characters long");}if(_13.minLength&&typeof _12=="string"&&_12.length<_13.minLength){_16("must be at least "+_13.minLength+" characters long");}if(typeof _13.minimum!==undefined&&typeof _12==typeof _13.minimum&&_13.minimum>_12){_16("must have a minimum value of "+_13.minimum);}if(typeof _13.maximum!==undefined&&typeof _12==typeof _13.maximum&&_13.maximum<_12){_16("must have a maximum value of "+_13.maximum);}if(_13["enum"]){var _1e=_13["enum"];l=_1e.length;var _1f;for(var j=0;j<l;j++){if(_1e[j]===_12){_1f=1;break;}}if(!_1f){_16("does not have a value in the enumeration "+_1e.join(", "));}}if(typeof _13.maxDecimal=="number"&&(_12*10^_13.maxDecimal)%1){_16("may only have "+_13.maxDecimal+" digits of decimal places");}}}return null;};function _1d(_21,_22,_23,_24){if(typeof _22=="object"){if(typeof _21!="object"||_21 instanceof Array){_10.push({property:_23,message:"an object is required"});}for(var i in _22){if(_22.hasOwnProperty(i)){var _26=_21[i];var _27=_22[i];_11(_26,_27,_23,i);}}}for(i in _21){if(_21.hasOwnProperty(i)&&(i.charAt(0)!="_"||i.charAt(0)!="_")&&_22&&!_22[i]&&_24===false){_10.push({property:_23,message:(typeof _26)+"The property "+i+" is not defined in the schema and the schema does not allow additional properties"});}var _28=_22&&_22[i]&&_22[i].requires;if(_28&&!(_28 in _21)){_10.push({property:_23,message:"the presence of the property "+i+" requires that "+_28+" also be present"});}_26=_21[i];if(_22&&typeof _22=="object"&&!(i in _22)){_11(_26,_24,_23,i);}if(!_f&&_26&&_26.$schema){_10=_10.concat(_11(_26,_26.$schema,_23,i));}}return _10;};if(_e){_11(_d,_e,"","");}if(!_f&&_d.$schema){_11(_d,_d.$schema,"","");}return {valid:!_10.length,errors:_10};};}}};});