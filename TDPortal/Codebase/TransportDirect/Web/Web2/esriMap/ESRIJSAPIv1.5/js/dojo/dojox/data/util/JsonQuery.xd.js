/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.data.util.JsonQuery"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.data.util.JsonQuery"]){_4._hasResource["dojox.data.util.JsonQuery"]=true;_4.provide("dojox.data.util.JsonQuery");_4.declare("dojox.data.util.JsonQuery",null,{useFullIdInQueries:false,_toJsonQuery:function(_7,_8){var _9=true;var _a=this;function _b(_c,_d){if(_d.__id){var _e={};_e[_a.idAttribute]=_a.useFullIdInQueries?_d.__id:_d[_a.idAttribute];_d=_e;}for(var i in _d){var _10=_d[i];var _11=_c+(/^[a-zA-Z_][\w_]*$/.test(i)?"."+i:"["+_4._escapeString(i)+"]");if(_10&&typeof _10=="object"){_b(_11,_10);}else{if(_10!="*"){_12+=(_9?"":"&")+_11+((_7.queryOptions&&_7.queryOptions.ignoreCase)?"~":"=")+_4.toJson(_10);_9=false;}}}};if(_7.query&&typeof _7.query=="object"){var _12="[?(";_b("@",_7.query);if(!_9){_12+=")]";}else{_12="";}_7.queryStr=_12.replace(/\\"|"/g,function(t){return t=="\""?"'":t;});}else{if(!_7.query||_7.query=="*"){_7.query="";}}var _14=_7.sort;if(_14){_7.queryStr=_7.queryStr||(typeof _7.query=="string"?_7.query:"");_9=true;for(i=0;i<_14.length;i++){_7.queryStr+=(_9?"[":",")+(_14[i].descending?"\\":"/")+"@["+_4._escapeString(_14[i].attribute)+"]";_9=false;}if(!_9){_7.queryStr+="]";}}if(_8&&(_7.start||_7.count)){_7.queryStr=(_7.queryStr||(typeof _7.query=="string"?_7.query:""))+"["+(_7.start||"")+":"+(_7.count?(_7.start||0)+_7.count:"")+"]";}if(typeof _7.queryStr=="string"){_7.queryStr=_7.queryStr.replace(/\\"|"/g,function(t){return t=="\""?"'":t;});return _7.queryStr;}return _7.query;},jsonQueryPagination:true,fetch:function(_16){this._toJsonQuery(_16,this.jsonQueryPagination);return this.inherited(arguments);},isUpdateable:function(){return true;},matchesQuery:function(_17,_18){_18._jsonQuery=_18._jsonQuery||_6.json.query(this._toJsonQuery(_18));return _18._jsonQuery([_17]).length;},clientSideFetch:function(_19,_1a){_19._jsonQuery=_19._jsonQuery||_6.json.query(this._toJsonQuery(_19));return this.clientSidePaging(_19,_19._jsonQuery(_1a));},querySuperSet:function(_1b,_1c){if(!_1b.query){return _1c.query;}return this.inherited(arguments);}});}}};});