/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojo.io.iframe"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojo.io.iframe"]){_4._hasResource["dojo.io.iframe"]=true;_4.provide("dojo.io.iframe");_4.io.iframe={create:function(_7,_8,_9){if(window[_7]){return window[_7];}if(window.frames[_7]){return window.frames[_7];}var _a=null;var _b=_9;if(!_b){if(_4.config["useXDomain"]&&!_4.config["dojoBlankHtmlUrl"]){console.warn("dojo.io.iframe.create: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}_b=(_4.config["dojoBlankHtmlUrl"]||_4.moduleUrl("dojo","resources/blank.html"));}var _c=_4.isIE?"<iframe name=\""+_7+"\" src=\""+_b+"\" onload=\""+_8+"\">":"iframe";_a=_4.doc.createElement(_c);with(_a){name=_7;setAttribute("name",_7);id=_7;}_4.body().appendChild(_a);window[_7]=_a;with(_a.style){if(!(_4.isSafari<3)){position="absolute";}left=top="1px";height=width="1px";visibility="hidden";}if(!_4.isIE){this.setSrc(_a,_b,true);_a.onload=new Function(_8);}return _a;},setSrc:function(_d,_e,_f){try{if(!_f){if(_4.isWebKit){_d.location=_e;}else{frames[_d.name].location=_e;}}else{var _10;if(_4.isIE||_4.isWebKit>521){_10=_d.contentWindow.document;}else{if(_4.isSafari){_10=_d.document;}else{_10=_d.contentWindow;}}if(!_10){_d.location=_e;return;}else{_10.location.replace(_e);}}}catch(e){console.log("dojo.io.iframe.setSrc: ",e);}},doc:function(_11){var doc=_11.contentDocument||(((_11.name)&&(_11.document)&&(document.getElementsByTagName("iframe")[_11.name].contentWindow)&&(document.getElementsByTagName("iframe")[_11.name].contentWindow.document)))||((_11.name)&&(document.frames[_11.name])&&(document.frames[_11.name].document))||null;return doc;},send:function(_13){if(!this["_frame"]){this._frame=this.create(this._iframeName,_4._scopeName+".io.iframe._iframeOnload();");}var dfd=_4._ioSetArgs(_13,function(dfd){dfd.canceled=true;dfd.ioArgs._callNext();},function(dfd){var _17=null;try{var _18=dfd.ioArgs;var dii=_4.io.iframe;var ifd=dii.doc(dii._frame);var _1b=_18.handleAs;_17=ifd;if(_1b!="html"){if(_1b=="xml"){if(_4.isIE){_4.query("a",dii._frame.contentWindow.document.documentElement).orphan();var _1c=(dii._frame.contentWindow.document).documentElement.innerText;_1c=_1c.replace(/>\s+</g,"><");_1c=_4.trim(_1c);var _1d={responseText:_1c};_17=_4._contentHandlers["xml"](_1d);}}else{_17=ifd.getElementsByTagName("textarea")[0].value;if(_1b=="json"){_17=_4.fromJson(_17);}else{if(_1b=="javascript"){_17=_4.eval(_17);}}}}}catch(e){_17=e;}finally{_18._callNext();}return _17;},function(_1e,dfd){dfd.ioArgs._hasError=true;dfd.ioArgs._callNext();return _1e;});dfd.ioArgs._callNext=function(){if(!this["_calledNext"]){this._calledNext=true;_4.io.iframe._currentDfd=null;_4.io.iframe._fireNextRequest();}};this._dfdQueue.push(dfd);this._fireNextRequest();_4._ioWatch(dfd,function(dfd){return !dfd.ioArgs["_hasError"];},function(dfd){return (!!dfd.ioArgs["_finished"]);},function(dfd){if(dfd.ioArgs._finished){dfd.callback(dfd);}else{dfd.errback(new Error("Invalid dojo.io.iframe request state"));}});return dfd;},_currentDfd:null,_dfdQueue:[],_iframeName:_4._scopeName+"IoIframe",_fireNextRequest:function(){try{if((this._currentDfd)||(this._dfdQueue.length==0)){return;}var dfd=this._currentDfd=this._dfdQueue.shift();var _24=dfd.ioArgs;var _25=_24.args;_24._contentToClean=[];var fn=_4.byId(_25["form"]);var _27=_25["content"]||{};if(fn){if(_27){var _28=function(_29,_2a){var tn;if(_4.isIE){tn=_4.doc.createElement("<input type='hidden' name='"+_29+"'>");}else{tn=_4.doc.createElement("input");tn.type="hidden";tn.name=_29;}tn.value=_2a;fn.appendChild(tn);_24._contentToClean.push(_29);};for(var x in _27){var val=_27[x];if(_4.isArray(val)&&val.length>1){var i;for(i=0;i<val.length;i++){_28(x,val[i]);}}else{if(!fn[x]){_28(x,val);}else{fn[x].value=val;}}}}var _2f=fn.getAttributeNode("action");var _30=fn.getAttributeNode("method");var _31=fn.getAttributeNode("target");if(_25["url"]){_24._originalAction=_2f?_2f.value:null;if(_2f){_2f.value=_25.url;}else{fn.setAttribute("action",_25.url);}}if(!_30||!_30.value){if(_30){_30.value=(_25["method"])?_25["method"]:"post";}else{fn.setAttribute("method",(_25["method"])?_25["method"]:"post");}}_24._originalTarget=_31?_31.value:null;if(_31){_31.value=this._iframeName;}else{fn.setAttribute("target",this._iframeName);}fn.target=this._iframeName;fn.submit();}else{var _32=_25.url+(_25.url.indexOf("?")>-1?"&":"?")+_24.query;this.setSrc(this._frame,_32,true);}}catch(e){dfd.errback(e);}},_iframeOnload:function(){var dfd=this._currentDfd;if(!dfd){this._fireNextRequest();return;}var _34=dfd.ioArgs;var _35=_34.args;var _36=_4.byId(_35.form);if(_36){var _37=_34._contentToClean;for(var i=0;i<_37.length;i++){var key=_37[i];for(var j=0;j<_36.childNodes.length;j++){var _3b=_36.childNodes[j];if(_3b.name==key){_4.destroy(_3b);break;}}}if(_34["_originalAction"]){_36.setAttribute("action",_34._originalAction);}if(_34["_originalTarget"]){_36.setAttribute("target",_34._originalTarget);_36.target=_34._originalTarget;}}_34._finished=true;}};}}};});