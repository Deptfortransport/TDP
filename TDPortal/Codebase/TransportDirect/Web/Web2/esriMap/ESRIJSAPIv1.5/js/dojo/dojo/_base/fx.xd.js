/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojo._base.fx"],["require","dojo._base.Color"],["require","dojo._base.connect"],["require","dojo._base.declare"],["require","dojo._base.lang"],["require","dojo._base.html"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojo._base.fx"]){_4._hasResource["dojo._base.fx"]=true;_4.provide("dojo._base.fx");_4.require("dojo._base.Color");_4.require("dojo._base.connect");_4.require("dojo._base.declare");_4.require("dojo._base.lang");_4.require("dojo._base.html");(function(){var d=_4;var _8=d.mixin;_4._Line=function(_9,_a){this.start=_9;this.end=_a;};_4._Line.prototype.getValue=function(n){return ((this.end-this.start)*n)+this.start;};d.declare("dojo._Animation",null,{constructor:function(_c){_8(this,_c);if(d.isArray(this.curve)){this.curve=new d._Line(this.curve[0],this.curve[1]);}},duration:350,repeat:0,rate:10,_percent:0,_startRepeatCount:0,_fire:function(_d,_e){if(this[_d]){if(_4.config.debugAtAllCosts){this[_d].apply(this,_e||[]);}else{try{this[_d].apply(this,_e||[]);}catch(e){console.error("exception in animation handler for:",_d);console.error(e);}}}return this;},play:function(_f,_10){var _t=this;if(_t._delayTimer){_t._clearTimer();}if(_10){_t._stopTimer();_t._active=_t._paused=false;_t._percent=0;}else{if(_t._active&&!_t._paused){return _t;}}_t._fire("beforeBegin");var de=_f||_t.delay,_p=_4.hitch(_t,"_play",_10);if(de>0){_t._delayTimer=setTimeout(_p,de);return _t;}_p();return _t;},_play:function(_14){var _t=this;if(_t._delayTimer){_t._clearTimer();}_t._startTime=new Date().valueOf();if(_t._paused){_t._startTime-=_t.duration*_t._percent;}_t._endTime=_t._startTime+_t.duration;_t._active=true;_t._paused=false;var _16=_t.curve.getValue(_t._percent);if(!_t._percent){if(!_t._startRepeatCount){_t._startRepeatCount=_t.repeat;}_t._fire("onBegin",[_16]);}_t._fire("onPlay",[_16]);_t._cycle();return _t;},pause:function(){var _t=this;if(_t._delayTimer){_t._clearTimer();}_t._stopTimer();if(!_t._active){return _t;}_t._paused=true;_t._fire("onPause",[_t.curve.getValue(_t._percent)]);return _t;},gotoPercent:function(_18,_19){var _t=this;_t._stopTimer();_t._active=_t._paused=true;_t._percent=_18;if(_19){_t.play();}return _t;},stop:function(_1b){var _t=this;if(_t._delayTimer){_t._clearTimer();}if(!_t._timer){return _t;}_t._stopTimer();if(_1b){_t._percent=1;}_t._fire("onStop",[_t.curve.getValue(_t._percent)]);_t._active=_t._paused=false;return _t;},status:function(){if(this._active){return this._paused?"paused":"playing";}return "stopped";},_cycle:function(){var _t=this;if(_t._active){var _1e=new Date().valueOf();var _1f=(_1e-_t._startTime)/(_t._endTime-_t._startTime);if(_1f>=1){_1f=1;}_t._percent=_1f;if(_t.easing){_1f=_t.easing(_1f);}_t._fire("onAnimate",[_t.curve.getValue(_1f)]);if(_t._percent<1){_t._startTimer();}else{_t._active=false;if(_t.repeat>0){_t.repeat--;_t.play(null,true);}else{if(_t.repeat==-1){_t.play(null,true);}else{if(_t._startRepeatCount){_t.repeat=_t._startRepeatCount;_t._startRepeatCount=0;}}}_t._percent=0;_t._fire("onEnd");_t._stopTimer();}}return _t;},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer;}});var ctr=0,_21=[],_22=null,_23={run:function(){}};_4._Animation.prototype._startTimer=function(){if(!this._timer){this._timer=d.connect(_23,"run",this,"_cycle");ctr++;}if(!_22){_22=setInterval(d.hitch(_23,"run"),this.rate);}};_4._Animation.prototype._stopTimer=function(){if(this._timer){d.disconnect(this._timer);this._timer=null;ctr--;}if(ctr<=0){clearInterval(_22);_22=null;ctr=0;}};var _24=d.isIE?function(_25){var ns=_25.style;if(!ns.width.length&&d.style(_25,"width")=="auto"){ns.width="auto";}}:function(){};_4._fade=function(_27){_27.node=d.byId(_27.node);var _28=_8({properties:{}},_27),_29=(_28.properties.opacity={});_29.start=!("start" in _28)?function(){return +d.style(_28.node,"opacity")||0;}:_28.start;_29.end=_28.end;var _2a=d.animateProperty(_28);d.connect(_2a,"beforeBegin",d.partial(_24,_28.node));return _2a;};_4.fadeIn=function(_2b){return d._fade(_8({end:1},_2b));};_4.fadeOut=function(_2c){return d._fade(_8({end:0},_2c));};_4._defaultEasing=function(n){return 0.5+((Math.sin((n+1.5)*Math.PI))/2);};var _2e=function(_2f){this._properties=_2f;for(var p in _2f){var _31=_2f[p];if(_31.start instanceof d.Color){_31.tempColor=new d.Color();}}};_2e.prototype.getValue=function(r){var ret={};for(var p in this._properties){var _35=this._properties[p],_36=_35.start;if(_36 instanceof d.Color){ret[p]=d.blendColors(_36,_35.end,r,_35.tempColor).toCss();}else{if(!d.isArray(_36)){ret[p]=((_35.end-_36)*r)+_36+(p!="opacity"?_35.units||"px":0);}}}return ret;};_4.animateProperty=function(_37){_37.node=d.byId(_37.node);if(!_37.easing){_37.easing=d._defaultEasing;}var _38=new d._Animation(_37);d.connect(_38,"beforeBegin",_38,function(){var pm={};for(var p in this.properties){if(p=="width"||p=="height"){this.node.display="block";}var _3b=this.properties[p];_3b=pm[p]=_8({},(d.isObject(_3b)?_3b:{end:_3b}));if(d.isFunction(_3b.start)){_3b.start=_3b.start();}if(d.isFunction(_3b.end)){_3b.end=_3b.end();}var _3c=(p.toLowerCase().indexOf("color")>=0);function _3d(_3e,p){var v={height:_3e.offsetHeight,width:_3e.offsetWidth}[p];if(v!==undefined){return v;}v=d.style(_3e,p);return (p=="opacity")?+v:(_3c?v:parseFloat(v));};if(!("end" in _3b)){_3b.end=_3d(this.node,p);}else{if(!("start" in _3b)){_3b.start=_3d(this.node,p);}}if(_3c){_3b.start=new d.Color(_3b.start);_3b.end=new d.Color(_3b.end);}else{_3b.start=(p=="opacity")?+_3b.start:parseFloat(_3b.start);}}this.curve=new _2e(pm);});d.connect(_38,"onAnimate",d.hitch(d,"style",_38.node));return _38;};_4.anim=function(_41,_42,_43,_44,_45,_46){return d.animateProperty({node:_41,duration:_43||d._Animation.prototype.duration,properties:_42,easing:_44,onEnd:_45}).play(_46||0);};})();}}};});