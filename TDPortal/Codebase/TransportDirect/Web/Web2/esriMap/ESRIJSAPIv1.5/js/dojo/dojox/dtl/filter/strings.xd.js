/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.dtl.filter.strings"],["require","dojox.dtl.filter.htmlstrings"],["require","dojox.string.sprintf"],["require","dojox.string.tokenize"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.dtl.filter.strings"]){_4._hasResource["dojox.dtl.filter.strings"]=true;_4.provide("dojox.dtl.filter.strings");_4.require("dojox.dtl.filter.htmlstrings");_4.require("dojox.string.sprintf");_4.require("dojox.string.tokenize");_4.mixin(_6.dtl.filter.strings,{_urlquote:function(_7,_8){if(!_8){_8="/";}return _6.string.tokenize(_7,/([^\w-_.])/g,function(_9){if(_8.indexOf(_9)==-1){if(_9==" "){return "+";}else{return "%"+_9.charCodeAt(0).toString(16).toUpperCase();}}return _9;}).join("");},addslashes:function(_a){return _a.replace(/\\/g,"\\\\").replace(/"/g,"\\\"").replace(/'/g,"\\'");},capfirst:function(_b){_b=""+_b;return _b.charAt(0).toUpperCase()+_b.substring(1);},center:function(_c,_d){_d=_d||_c.length;_c=_c+"";var _e=_d-_c.length;if(_e%2){_c=_c+" ";_e-=1;}for(var i=0;i<_e;i+=2){_c=" "+_c+" ";}return _c;},cut:function(_10,arg){arg=arg+""||"";_10=_10+"";return _10.replace(new RegExp(arg,"g"),"");},_fix_ampersands:/&(?!(\w+|#\d+);)/g,fix_ampersands:function(_12){return _12.replace(_6.dtl.filter.strings._fix_ampersands,"&amp;");},floatformat:function(_13,arg){arg=parseInt(arg||-1,10);_13=parseFloat(_13);var m=_13-_13.toFixed(0);if(!m&&arg<0){return _13.toFixed();}_13=_13.toFixed(Math.abs(arg));return (arg<0)?parseFloat(_13)+"":_13;},iriencode:function(_16){return _6.dtl.filter.strings._urlquote(_16,"/#%[]=:;$&()+,!");},linenumbers:function(_17){var df=_6.dtl.filter;var _19=_17.split("\n");var _1a=[];var _1b=(_19.length+"").length;for(var i=0,_1d;i<_19.length;i++){_1d=_19[i];_1a.push(df.strings.ljust(i+1,_1b)+". "+_6.dtl._base.escape(_1d));}return _1a.join("\n");},ljust:function(_1e,arg){_1e=_1e+"";arg=parseInt(arg,10);while(_1e.length<arg){_1e=_1e+" ";}return _1e;},lower:function(_20){return (_20+"").toLowerCase();},make_list:function(_21){var _22=[];if(typeof _21=="number"){_21=_21+"";}if(_21.charAt){for(var i=0;i<_21.length;i++){_22.push(_21.charAt(i));}return _22;}if(typeof _21=="object"){for(var key in _21){_22.push(_21[key]);}return _22;}return [];},rjust:function(_25,arg){_25=_25+"";arg=parseInt(arg,10);while(_25.length<arg){_25=" "+_25;}return _25;},slugify:function(_27){_27=_27.replace(/[^\w\s-]/g,"").toLowerCase();return _27.replace(/[\-\s]+/g,"-");},_strings:{},stringformat:function(_28,arg){arg=""+arg;var _2a=_6.dtl.filter.strings._strings;if(!_2a[arg]){_2a[arg]=new _6.string.sprintf.Formatter("%"+arg);}return _2a[arg].format(_28);},title:function(_2b){var _2c,_2d="";for(var i=0,_2f;i<_2b.length;i++){_2f=_2b.charAt(i);if(_2c==" "||_2c=="\n"||_2c=="\t"||!_2c){_2d+=_2f.toUpperCase();}else{_2d+=_2f.toLowerCase();}_2c=_2f;}return _2d;},_truncatewords:/[ \n\r\t]/,truncatewords:function(_30,arg){arg=parseInt(arg,10);if(!arg){return _30;}for(var i=0,j=_30.length,_34=0,_35,_36;i<_30.length;i++){_35=_30.charAt(i);if(_6.dtl.filter.strings._truncatewords.test(_36)){if(!_6.dtl.filter.strings._truncatewords.test(_35)){++_34;if(_34==arg){return _30.substring(0,j+1);}}}else{if(!_6.dtl.filter.strings._truncatewords.test(_35)){j=i;}}_36=_35;}return _30;},_truncate_words:/(&.*?;|<.*?>|(\w[\w\-]*))/g,_truncate_tag:/<(\/)?([^ ]+?)(?: (\/)| .*?)?>/,_truncate_singlets:{br:true,col:true,link:true,base:true,img:true,param:true,area:true,hr:true,input:true},truncatewords_html:function(_37,arg){arg=parseInt(arg,10);if(arg<=0){return "";}var _39=_6.dtl.filter.strings;var _3a=0;var _3b=[];var _3c=_6.string.tokenize(_37,_39._truncate_words,function(all,_3e){if(_3e){++_3a;if(_3a<arg){return _3e;}else{if(_3a==arg){return _3e+" ...";}}}var tag=all.match(_39._truncate_tag);if(!tag||_3a>=arg){return;}var _40=tag[1];var _41=tag[2].toLowerCase();var _42=tag[3];if(_40||_39._truncate_singlets[_41]){}else{if(_40){var i=_4.indexOf(_3b,_41);if(i!=-1){_3b=_3b.slice(i+1);}}else{_3b.unshift(_41);}}return all;}).join("");_3c=_3c.replace(/\s+$/g,"");for(var i=0,tag;tag=_3b[i];i++){_3c+="</"+tag+">";}return _3c;},upper:function(_46){return _46.toUpperCase();},urlencode:function(_47){return _6.dtl.filter.strings._urlquote(_47);},_urlize:/^((?:[(>]|&lt;)*)(.*?)((?:[.,)>\n]|&gt;)*)$/,_urlize2:/^\S+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+$/,urlize:function(_48){return _6.dtl.filter.strings.urlizetrunc(_48);},urlizetrunc:function(_49,arg){arg=parseInt(arg);return _6.string.tokenize(_49,/(\S+)/g,function(_4b){var _4c=_6.dtl.filter.strings._urlize.exec(_4b);if(!_4c){return _4b;}var _4d=_4c[1];var _4e=_4c[2];var _4f=_4c[3];var _50=_4e.indexOf("www.")==0;var _51=_4e.indexOf("@")!=-1;var _52=_4e.indexOf(":")!=-1;var _53=_4e.indexOf("http://")==0;var _54=_4e.indexOf("https://")==0;var _55=/[a-zA-Z0-9]/.test(_4e.charAt(0));var _56=_4e.substring(_4e.length-4);var _57=_4e;if(arg>3){_57=_57.substring(0,arg-3)+"...";}if(_50||(!_51&&!_53&&_4e.length&&_55&&(_56==".org"||_56==".net"||_56==".com"))){return "<a href=\"http://"+_4e+"\" rel=\"nofollow\">"+_57+"</a>";}else{if(_53||_54){return "<a href=\""+_4e+"\" rel=\"nofollow\">"+_57+"</a>";}else{if(_51&&!_50&&!_52&&_6.dtl.filter.strings._urlize2.test(_4e)){return "<a href=\"mailto:"+_4e+"\">"+_4e+"</a>";}}}return _4b;}).join("");},wordcount:function(_58){_58=_4.trim(_58);if(!_58){return 0;}return _58.split(/\s+/g).length;},wordwrap:function(_59,arg){arg=parseInt(arg);var _5b=[];var _5c=_59.split(/\s+/g);if(_5c.length){var _5d=_5c.shift();_5b.push(_5d);var pos=_5d.length-_5d.lastIndexOf("\n")-1;for(var i=0;i<_5c.length;i++){_5d=_5c[i];if(_5d.indexOf("\n")!=-1){var _60=_5d.split(/\n/g);}else{var _60=[_5d];}pos+=_60[0].length+1;if(arg&&pos>arg){_5b.push("\n");pos=_60[_60.length-1].length;}else{_5b.push(" ");if(_60.length>1){pos=_60[_60.length-1].length;}}_5b.push(_5d);}}return _5b.join("");}});}}};});